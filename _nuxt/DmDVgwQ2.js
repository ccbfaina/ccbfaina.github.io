import{_ as I,g as T,u as E,h as F,r as P,o as V,i as U,j as A,c as a,k as K,l as i,F as k,a as e,m as y,n as W,v as x,p as j,d as u,w as c,q as M,e as O,s as Z,b as o,x as G,f as B,y as S,t as b}from"#entry";import{L as H}from"./DqqTAazl.js";const J={class:"main"},Q={class:"search contener"},X=["value"],Y=["src"],ee={key:1,class:"las la-user"},te={key:1,class:"las la-user-slash"},se={class:"suggestions"},ne={class:"contener"},le=["onClick"],oe={class:"title"},ae={key:0,class:"las la-external-link-alt external-link-icon","aria-label":"Link externo",title:"Este link abrirá em uma nova aba."},re={class:"buttons"},ie={class:"contener"},ue={class:"contener footer"},ce={style:{position:"relative",display:"inline-block"}},de={key:0,class:"badge"},pe={__name:"index",async setup(ve){let d,C;const f=Z(),$=U(),{settings:p}=T(),{$indexedDB:D}=E(),{data:_,pending:R}=([d,C]=F(async()=>M("index-tags",async()=>{try{return await D.getTags()||[]}catch(s){return console.error("Erro ao carregar tags do IndexedDB:",s),[]}})),d=await d,C(),d),r=P("");V(()=>{const s=$.query.search;typeof s=="string"&&(r.value=s)});const v=s=>s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),w=s=>typeof s=="string"&&s.startsWith("http"),g=A(()=>{const s=r.value.trim();if(!s)return _.value?.slice(0,40);const t=v(s).split(/\s+/).filter(Boolean);return _.value?.filter(n=>{const l=v(`${n.title||""} ${n.description||""} ${n.group||""}`).split(/\s+/).filter(Boolean);return t.every(h=>l.some(z=>z.includes(h)))})}),q=s=>{r.value=s.target.value},L=s=>{!s||!s.href||(w(s.href)?window.open(s.href,"_blank","noopener noreferrer"):f.push(s.href))},m=()=>{const s=r.value.trim();if(!s)return alert("Por favor, digite sua busca!");const t=g.value.find(n=>v(n.title)===v(s))||{href:`/lista?search=${encodeURIComponent(s)}`};L(t)},N=A(()=>p?.pendingConfigsCount??0);return(s,t)=>{const n=O;return o(),a("div",J,[i(R)?(o(),K(H,{key:0})):(o(),a(k,{key:1},[e("header",null,[e("div",Q,[e("i",{class:"la la-search clickable",onClick:m}),e("input",{type:"text",placeholder:"Pesquisar...",value:r.value,onInput:q,onKeyup:W(m,["enter"])},null,40,X),y(e("i",{class:"la la-times clickable",onClick:t[0]||(t[0]=l=>r.value="")},null,512),[[x,r.value]]),e("div",{class:"user-info",onClick:t[1]||(t[1]=l=>i(f).push("/perfil")),style:{cursor:"pointer"}},[i(p).user?(o(),a(k,{key:0},[i(p).user.photoURL?(o(),a("img",{key:0,src:i(p).user.photoURL,alt:"Avatar do usuário"},null,8,Y)):(o(),a("i",ee))],64)):(o(),a("i",te))])])]),e("div",se,[e("ul",ne,[(o(!0),a(k,null,j(g.value,(l,h)=>(o(),a("li",{key:l.href+l.title.replace(/[^a-zA-Z0-9 ]/g,"")+h,onClick:()=>L(l)},[e("i",{class:G([l.icon||"la la-folder","icon"])},null,2),e("div",null,[e("strong",oe,[B(b(l.title)+" ",1),w(l.href)?(o(),a("i",ae)):S("",!0)]),e("small",null,b(l.description),1)])],8,le))),128)),y(e("li",{onClick:m},[...t[3]||(t[3]=[e("i",{class:"la la-calendar"},null,-1),e("div",null,[e("strong",null,"Pesquisar na agenda"),e("small",null,"Nenhum resultado encontrado.")],-1)])],512),[[x,!g.value.length]]),y(e("li",{onClick:t[2]||(t[2]=()=>i(f).push("/navegar"))},[...t[4]||(t[4]=[e("i",{class:"la la-chevron-down"},null,-1),e("div",null,[e("strong",null,"Navegar"),e("small",null,"Outros resultados...")],-1)])],512),[[x,!r.value&&i(_)?.length]])])]),e("div",re,[e("div",ie,[u(n,{to:"/navegar"},{default:c(()=>[...t[5]||(t[5]=[e("button",null,"Navegar",-1)])]),_:1}),u(n,{to:"/recentes"},{default:c(()=>[...t[6]||(t[6]=[e("button",null,"Atualizações",-1)])]),_:1}),u(n,{to:"/agenda?regionais=true"},{default:c(()=>[...t[7]||(t[7]=[e("button",null,"Próximos",-1)])]),_:1})])]),e("footer",null,[e("div",ue,[t[10]||(t[10]=e("span",null,"Regional Faina",-1)),u(n,{to:"/sobre"},{default:c(()=>[...t[8]||(t[8]=[B("Sobre",-1)])]),_:1}),u(n,{to:"/settings"},{default:c(()=>[e("div",ce,[t[9]||(t[9]=e("i",{class:"la la-cog"},null,-1)),N.value>0?(o(),a("span",de,b(N.value),1)):S("",!0)])]),_:1})])])],64))])}}},ge=I(pe,[["__scopeId","data-v-91b4054a"]]);export{ge as default};
