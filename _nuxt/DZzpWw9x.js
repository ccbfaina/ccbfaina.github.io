import{L as ve}from"./LMN2BN60.js";import{_ as ce,q as pe,r as y,s as ee,f as te,C as le,z as fe,Q as be,c as o,B as se,m as r,F as x,a as t,y as p,n as m,t as c,g as h,i as E,b as me,e as L,v as ne,j as $,L as ge,o as a,N as ae,P as _e}from"./6rw0KTUA.js";import{F as ye}from"./CymftGd0.js";import{a as he,S as Se,E as ke}from"./DkLWrPiO.js";const ze={class:"tabs-container print-hide"},De={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},Ce=["aria-selected"],Te={class:"badge"},xe=["aria-selected"],Ee=["aria-selected"],Le={class:"tab-content"},$e={id:"tab-content-lista",role:"tabpanel"},we={class:"text-center"},Ve={key:0},Be={key:1},Me={key:2},je={key:3},Fe={key:4},Ie={id:"tab-content-filters",role:"tabpanel"},Ge={id:"tab-content-print",role:"tabpanel"},Ne={class:"text-center flex col items-center gap-4"},Oe={class:"p form-group flex items-center aling-center"},Ae={class:"a4 print-hide"},qe={class:"settings-list print-hide"},Pe=["onDragstart","onDragover","onDrop"],We=["onClick"],Ue=["onDragstart","onDragover","onDrop"],He={colspan:"5"},Ke={class:"flex items-center aling-center justify-center"},Qe=["onClick"],Re={key:0},Je={key:0},Xe={key:0},Ye=["innerHTML"],Ze={__name:"index",setup(et){const{lista:s}=pe(),u=y("lista"),v=y({fontSize:15});ee(()=>{window.innerWidth>720?v.value.fontSize=15:v.value.fontSize=Math.max(13,Math.min(15,Math.round(window.innerWidth/40)))});function ie(){v.value.fontSize<10&&(v.value.fontSize=10),v.value.fontSize>20&&(v.value.fontSize=20),v.value.fontSize=Math.round(v.value.fontSize*10)/10}const w=l=>{var e;return(e=l==null?void 0:l.replace(/-$/,""))==null?void 0:e.trim()},oe=l=>{if(!l)return 0;let e=0;return l.search&&e++,l.title&&e++,l.locale&&e++,l.date&&e++,l.calendars&&l.calendars.length>0&&e++,e},re=()=>{u.value="lista",setTimeout(()=>{window.print()},1e3)},ue=te(()=>oe(s.filters)),d=y([]);le(()=>s.groupedEventsByTitle,()=>{var l,e,_,z,D;if(((e=(l=s.filters)==null?void 0:l.calendars)==null?void 0:e.length)>0||(_=s.filters)!=null&&_.locale||(z=s.filters)!=null&&z.date||(D=s.filters)!=null&&D.search){if(!s.groupedEventsByTitle){d.value=[];return}d.value=Object.entries(s.groupedEventsByTitle).map(([C,T])=>({title:C,items:T}))}else return d.value=[]},{immediate:!0,deep:!0});const g=y(null),S=y(null),V=l=>{g.value=l},B=l=>{S.value=l},M=l=>{if(g.value===null||g.value===l){g.value=null,S.value=null;return}const e=d.value.slice(),[_]=e.splice(g.value,1);e.splice(l,0,_),d.value=e,g.value=null,S.value=null},b=fe({});le(d,()=>{d.value&&d.value.forEach(l=>{l.title in b||(b[l.title]=!0)})},{immediate:!0});const j=l=>{u.value="print",b[l]=!b[l]},F=te(()=>d.value.length>0&&d.value.every(l=>b[l.title])),de=l=>{d.value.forEach(e=>{b[e.title]=l})},k=y(null);return ee(()=>{k.value=new he({extensions:[Se],content:`
      <p>Oração Santa Ceia</p>
      <p><strong>Pão:</strong> "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo."</p>
      <p><strong>Cálice:</strong> "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo."</p>
    `,editable:!0})}),be(()=>{k.value&&k.value.destroy()}),(l,e)=>{var z,D,C,T,I,G,N,O,A,q,P,W,U,H,K,Q,R,J,X,Y,Z;const _=ve;return a(),o("div",null,[r(s).loading?(a(),se(_,{key:0})):(a(),o(x,{key:1},[t("div",ze,[t("nav",De,[t("span",{id:"tab-filters","aria-selected":u.value==="filters",role:"tab",type:"button",class:m(["tab",{active:u.value==="filters"}]),style:{position:"relative"},onClick:e[0]||(e[0]=n=>u.value="filters")},[t("span",Te,c(ue.value),1),e[6]||(e[6]=t("i",{class:"la la-filter z-10"},null,-1))],10,Ce),t("span",{id:"tab-print","aria-selected":u.value==="print",role:"tab",type:"button",class:m(["tab",{active:u.value==="print"}]),onClick:e[1]||(e[1]=n=>u.value="print")},e[7]||(e[7]=[t("i",{class:"la la-print"},null,-1)]),10,xe),t("span",{id:"tab-lista","aria-selected":u.value==="lista",role:"tab",type:"button",class:m(["tab",{active:u.value==="lista"}]),onClick:e[2]||(e[2]=n=>u.value="lista")}," Lista ",10,Ee)])]),t("div",null,[t("div",Le,[h(t("div",$e,[t("div",we,[e[8]||(e[8]=t("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),(z=r(s).filters)!=null&&z.calendars?(a(),o("div",Ve,[t("b",null,c((((D=r(s).filters)==null?void 0:D.calendars)||[]).map(n=>w(n)).join(", ")),1)])):p("",!0),(C=r(s).filters)!=null&&C.locale?(a(),o("span",Be,[t("b",null,c(w((T=r(s).filters)==null?void 0:T.locale)),1)])):p("",!0),(I=r(s).filters)!=null&&I.date?(a(),o("span",Me," Data: "+c((A=(O=(N=(G=r(s).filters.date)==null?void 0:G.split("T")[0])==null?void 0:N.split("-"))==null?void 0:O.reverse())==null?void 0:A.join("/")),1)):p("",!0),!r(s).filters.date&&((q=r(s).filters)!=null&&q.start||(P=r(s).filters)!=null&&P.end)?(a(),o("div",je," Período: "+c((Q=(K=(H=(U=(W=r(s).filters)==null?void 0:W.start)==null?void 0:U.split("T")[0])==null?void 0:H.split("-"))==null?void 0:K.reverse())==null?void 0:Q.join("/"))+" à "+c((Z=(Y=(X=(J=(R=r(s).filters)==null?void 0:R.end)==null?void 0:J.split("T")[0])==null?void 0:X.split("-"))==null?void 0:Y.reverse())==null?void 0:Z.join("/")),1)):p("",!0),r(s).filters.search?(a(),o("div",Fe,c(r(s).filters.search),1)):p("",!0)])],512),[[E,u.value==="lista"]]),h(t("div",Ie,[me(ye)],512),[[E,u.value==="filters"]]),h(t("div",Ge,[t("div",Ne,[e[12]||(e[12]=t("b",{class:"mb-4 p"},"Ajustes de impressão:",-1)),t("div",Oe,[e[9]||(e[9]=t("label",null,"Fonte",-1)),h(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>v.value.fontSize=n),type:"range",min:"10",max:"20",step:"0.1",placeholder:"Font Size"},null,512),[[ne,v.value.fontSize,void 0,{number:!0}]]),h(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>v.value.fontSize=n),type:"number",min:"10",max:"20",step:"0.1",style:{width:"70px","margin-left":"8px"},onInput:ie},null,544),[[ne,v.value.fontSize,void 0,{number:!0}]]),e[10]||(e[10]=L(" px "))]),t("div",{class:"p"},[t("button",{class:"success",onClick:re},e[11]||(e[11]=[t("i",{class:"la la-print"},null,-1),L(" Imprimir ")]))])]),t("div",Ae,[t("div",qe,[e[13]||(e[13]=t("b",null,"Lista",-1)),t("div",null,[t("i",{class:m(["la",F.value?"la-toggle-on":"la-toggle-off"]),title:"Ocultar todos",onClick:e[5]||(e[5]=n=>de(!F.value))},null,2)])]),(a(!0),o(x,null,$(d.value,(n,f)=>(a(),o("div",{key:n.title,class:m(["settings-list print-hide",{"drag-over":S.value===f}]),draggable:"true",onDragstart:i=>V(f),onDragover:ae(i=>B(f),["prevent"]),onDrop:i=>M(f)},[L(c(n.title)+" ",1),t("i",{class:m(["la",b[n.title]?"la-toggle-on":"la-toggle-off"]),title:"Alterar visibilidade",onClick:i=>j(n.title)},null,10,We)],42,Pe))),128))])],512),[[E,u.value==="print"]])])]),d.value?(a(),o("div",{key:0,class:"print-page",style:ge({fontSize:v.value.fontSize+"px"})},[(a(!0),o(x,null,$(d.value,(n,f)=>h((a(),o("div",{key:n.title,class:m(["table-list",{"drag-over":S.value===f}]),draggable:"true",style:{cursor:"move"},onDragstart:i=>V(f),onDragover:ae(i=>B(f),["prevent"]),onDrop:i=>M(f)},[t("table",null,[t("thead",null,[t("tr",null,[t("th",He,[t("div",Ke,[L(c(n.title)+" ",1),t("i",{class:"la la-toggle-on print-hide",style:{cursor:"pointer"},onClick:i=>j(n.title)},null,8,Qe)])])])]),t("tbody",null,[(a(!0),o(x,null,$(n.items,i=>(a(),o("tr",{key:i.id},[t("td",null,[i.formatDate?(a(),o("span",Re,c(i.formatDate),1)):p("",!0)]),t("td",null,[i.formatWeek?(a(),o("span",Je,c(i.formatWeek),1)):p("",!0)]),t("td",null,[i.formatTime?(a(),o("span",Xe,c(i.formatTime),1)):p("",!0)]),t("td",null,c(i.locale),1),t("td",null,[i.desc?(a(),o("span",{key:0,innerHTML:r(_e)(i.desc)},null,8,Ye)):p("",!0)])]))),128))])])],42,Ue)),[[E,b[n.title]]])),128)),k.value?(a(),se(r(ke),{key:0,editor:k.value,class:"editable"},null,8,["editor"])):p("",!0)],4)):p("",!0)],64))])}}},ot=ce(Ze,[["__scopeId","data-v-237bbb9d"]]);export{ot as default};
