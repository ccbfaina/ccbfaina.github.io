import{_ as j,y as K,r as _,h as C,c as u,a,t as f,F as m,k as D,p as W,i as X,A as Z,o as c,n as L,m as P,B as $,e as ee}from"./Cyy48QG-.js";const te={class:"calendar-wrapper"},ne={class:"calendar-panel"},ae={class:"calendar-header"},se={class:"month-year"},le={class:"calendar-table"},oe=["onClick"],re={class:"day-content"},ue={class:"day-number"},ce={key:0,class:"event-indicators"},ie={class:"events-panel"},de={class:"events-list-container"},ve={class:"chips-container"},he=["onClick"],ge={key:0,class:"las la-toggle-on"},fe={key:1,class:"las la-toggle-off"},pe={class:"search-container"},me={key:0},De={class:"event-date-title"},_e={class:"events-list"},ye={class:"sub-events-list"},be=["onClick"],Ce=["innerHTML"],ke={key:1,class:"no-events-message"},Me={__name:"agenda",setup(we){const{lista:M}=K(),w=_(""),p=_([]),T=new Date,i=_(T.getMonth()),h=_(T.getFullYear()),d=_(null),U=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],A=C(()=>`${U[i.value]} ${h.value}`);function k(e){return e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):""}const B=C(()=>Array.from(new Set(M.allEvents.map(e=>e.group))).filter(e=>e).sort((e,t)=>e.localeCompare(t))),x=C(()=>{const e=w.value.trim();let t=M.allEvents;if(p.value.length>0&&(t=t.filter(l=>p.value.includes(l.group))),!e)return t;const n=l=>`${k(l.title||"")} ${k(l.locale||"")} ${k(l.desc||"")} ${new Date(l.date).toLocaleDateString("pt-BR")}`,s=(l,g)=>g.every(b=>b.test(l)),r=(l,g)=>g.test(l),v=t.map(l=>({event:l,text:n(l)}));if(e.includes("|"))try{const l=new RegExp(e,"i");return v.filter(({text:g})=>r(g,l)).map(({event:g})=>g)}catch(l){return console.error("Regex inválida:",l),[]}const y=k(e).replace(/\bou\b/gi,",").split(/,|\s+/).filter(Boolean).map(l=>new RegExp(l,"i"));return v.filter(({text:l})=>s(l,y)).map(({event:l})=>l)}),E=C(()=>{let e;if(d.value){const t=d.value.date;e=x.value.filter(n=>{const s=new Date(n.date);return s.getUTCFullYear()===t.getFullYear()&&s.getUTCMonth()===t.getMonth()&&s.getUTCDate()===t.getDate()})}else e=x.value.filter(t=>{const n=new Date(t.date);return n.getUTCFullYear()===h.value&&n.getUTCMonth()===i.value});return e.reduce((t,n)=>{const s=new Date(n.date),r=`${s.getUTCFullYear()}-${(s.getUTCMonth()+1).toString().padStart(2,"0")}-${s.getUTCDate().toString().padStart(2,"0")}`;return t[r]||(t[r]={}),t[r][n.title]||(t[r][n.title]=[]),t[r][n.title].push(n),t},{})}),z=C(()=>{const e=[],t=new Date(h.value,i.value,1).getDay(),n=new Date(h.value,i.value+1,0).getDate(),s=new Date(h.value,i.value,0).getDate();for(let o=t-1;o>=0;o--)e.push({dayNumber:s-o,isPrevMonth:!0,isNextMonth:!1,isToday:!1,hasEvent:!1,events:[]});for(let o=1;o<=n;o++){const y=new Date(h.value,i.value,o),l=x.value.filter(g=>{const b=new Date(g.date);return b.getUTCDate()===o&&b.getUTCMonth()===i.value&&b.getUTCFullYear()===h.value});e.push({dayNumber:o,date:y,isPrevMonth:!1,isNextMonth:!1,isToday:y.toDateString()===T.toDateString(),hasEvent:l.length>0,events:l})}const r=42-e.length;for(let o=1;o<=r;o++)e.push({dayNumber:o,isPrevMonth:!1,isNextMonth:!0,isToday:!1,hasEvent:!1,events:[]});const v=[];for(;e.length>0;)v.push(e.splice(0,7));return v});function I(e){const t=new Date(e),n=t.getUTCDate(),s=U[t.getUTCMonth()],r=t.getUTCFullYear();return`${n} de ${s} de ${r}`}function N(e){i.value+=e,i.value<0?(i.value=11,h.value--):i.value>11&&(i.value=0,h.value++),d.value=null}function O(e){return{"prev-month-day":e.isPrevMonth||e.isNextMonth,today:e.isToday,"has-event":e.hasEvent,"selected-day":d.value&&d.value.date&&e.date&&d.value.date.toDateString()===e.date.toDateString()}}function R(e){!e.isPrevMonth&&!e.isNextMonth&&(d.value&&d.value.date.toDateString()===e.date.toDateString()?d.value=null:d.value=e)}function V(e){return d.value?e.some(t=>{const n=new Date(t.date),s=d.value.date;return n.getUTCFullYear()===s.getFullYear()&&n.getUTCMonth()===s.getMonth()&&n.getUTCDate()===s.getDate()}):!1}const q=e=>{const t=`https://www.google.com/calendar/event?eid=${e.htmlLink}`;window.open(t,"_blank")};function J(e){const t=p.value.indexOf(e);t===-1?p.value.push(e):p.value.splice(t,1)}const Q=B;function H(e){const t=new Set;for(const n of e)n.group&&t.add(n.group);return[...t]}const F=["#c4d7b9","#b4d0e3","#d6b8c1","#d1c965","#cdb8d1","#c3bfe0","#e6b97f","#aed4d7","#b3a9a5","#a9c6aa","#d39a8f","#b0a2cc","#d28fa9","#b2d29f","#d1b05e","#84c9cc","#d1be83","#92c2be","#a3b1b5","#bdc75d"],S=_({});function Y(e){if(!S.value[e]){const n=Array.from(new Set(M.allEvents.map(s=>s.group).filter(s=>s!==null))).indexOf(e);S.value[e]=F[n%F.length]}return S.value[e]}function G(e){const t=Y(e);return p.value.includes(e),{backgroundColor:t}}return(e,t)=>(c(),u("div",te,[a("div",ne,[a("div",ae,[a("i",{class:"las la-chevron-left",onClick:t[0]||(t[0]=n=>N(-1))}),a("h2",se,f(A.value),1),a("i",{class:"las la-chevron-right",onClick:t[1]||(t[1]=n=>N(1))})]),a("table",le,[t[4]||(t[4]=a("thead",null,[a("tr",null,[a("th",null,"Dom"),a("th",null,"Seg"),a("th",null,"Ter"),a("th",null,"Qua"),a("th",null,"Qui"),a("th",null,"Sex"),a("th",null,"Sáb")])],-1)),a("tbody",null,[(c(!0),u(m,null,D(z.value,(n,s)=>(c(),u("tr",{key:s},[(c(!0),u(m,null,D(n,r=>(c(),u("td",{key:r.date,class:L(O(r)),onClick:v=>R(r)},[a("div",re,[a("div",ue,f(r.dayNumber),1),r.events.length?(c(),u("div",ce,[(c(!0),u(m,null,D(H(r.events),v=>(c(),u("span",{key:v,class:"event-indicator",style:$({backgroundColor:Y(v)})},null,4))),128))])):P("",!0)])],10,oe))),128))]))),128))])])]),a("div",ie,[a("div",de,[a("div",ve,[(c(!0),u(m,null,D(W(Q),n=>(c(),u("span",{key:n,class:"chip",style:$(G(n)),onClick:s=>J(n)},[p.value.includes(n)?(c(),u("i",ge)):(c(),u("i",fe)),ee(" "+f(n),1)],12,he))),128)),a("span",null,[a("i",{class:"lar la-window-close coursor",style:{padding:"4px"},onClick:t[2]||(t[2]=n=>p.value=[])})])]),a("div",pe,[X(a("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=n=>w.value=n),placeholder:"Buscar eventos...",class:"search-input"},null,512),[[Z,w.value]]),t[5]||(t[5]=a("i",{class:"las la-search search-icon"},null,-1))]),Object.keys(E.value).length?(c(),u("div",me,[(c(!0),u(m,null,D(E.value,(n,s)=>(c(),u("div",{key:s},[a("h4",De,f(I(s)),1),a("ul",_e,[(c(!0),u(m,null,D(n,(r,v)=>(c(),u("li",{key:v,class:L({"selected-event":V(r)}),style:$(G(r[0].group))},[a("strong",null,f(v),1),a("ul",ye,[(c(!0),u(m,null,D(r,o=>(c(),u("li",{key:o.id,onClick:y=>q(o)},[a("p",null,[a("b",null,[a("i",null,f(o.formatTime)+f(o.formatTime?" - ":"")+f(o.formatDate),1)])]),a("p",null,f(o.locale),1),o.desc?(c(),u("p",{key:0,innerHTML:o.desc},null,8,Ce)):P("",!0)],8,be))),128))])],6))),128))])]))),128))])):(c(),u("p",ke,"Nenhum evento agendado."))])])]))}},xe=j(Me,[["__scopeId","data-v-a27725d7"]]);export{xe as default};
