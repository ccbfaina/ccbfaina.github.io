import{_ as v,s as m,r as b,f as k,c as i,a as t,e as l,t as C,m as n,z as y,o as e}from"./BEhWOyjn.js";const w={key:0},N=["disabled"],A={key:0},x={key:1},P={key:1},B={key:0},D={key:1},E={__name:"settings",setup(I){const a=m(),u=b(!1);let r=null;function d(){navigator.share?navigator.share({title:"Agenda CCB",text:"Acesse o aplicativo Agenda CCB",url:"faina.ccbgo.org.br"}):alert("Compartilhamento não suportado neste navegador.")}async function c(){if(!("Notification"in window)){console.warn("Este navegador não suporta notificações."),alert("Este navegador não suporta notificações.");return}a.notifications.status="loading";try{const o=await Notification.requestPermission();o==="granted"?a.notifications.status="granted":o==="denied"?a.notifications.status="denied":a.notifications.status="default"}catch(o){console.error("Erro ao solicitar permissão de notificação:",o),a.notifications.status="default"}}function f(){r&&(r.prompt(),r.userChoice.then(({outcome:o})=>{console.log(o==="accepted"?"Usuário aceitou instalar o PWA.":"Usuário recusou instalar o PWA."),r=null,u.value=!1}))}function p(){console.log(`Seu token de notificação é: ${a.notifications.fcmToken}`)}function g(){alert("Para ativar as notificações, vá nas configurações do seu navegador e permita notificações para este aplicativo.")}return k(()=>{window.addEventListener("beforeinstallprompt",o=>{o.preventDefault(),r=o,u.value=!0}),"Notification"in window&&(a.notifications.status=Notification.permission)}),(o,s)=>(e(),i("div",null,[t("div",null,[t("button",{class:"action-button",onClick:d},s[0]||(s[0]=[t("i",{class:"la la-share-alt"},null,-1),l(" Compartilhar aplicativo ")]))]),s[14]||(s[14]=t("hr",{class:"section-separator"},null,-1)),t("div",null,C(n(a).pendingConfigsCount>0?`Você tem ${n(a).pendingConfigsCount} configuração(ões) pendente(s).`:"Todas as configurações estão atualizadas."),1),s[15]||(s[15]=t("hr",{class:"section-separator"},null,-1)),t("div",null,[t("section",null,[s[7]||(s[7]=t("h2",null,[t("i",{class:"la la-bell text-blue-500"}),l(" Permissões")],-1)),n(a).notifications.status==="default"||n(a).notifications.status==="loading"?(e(),i("div",w,[s[2]||(s[2]=t("p",{class:"info-message"}," Deseja receber atualizações importantes e lembretes? ",-1)),t("button",{class:"action-button primary",disabled:n(a).notifications.status==="loading",onClick:c},[s[1]||(s[1]=t("i",{class:"la la-bell"},null,-1)),n(a).notifications.status==="loading"?(e(),i("span",A," Solicitando... ")):(e(),i("span",x," Ativar Notificações "))],8,N)])):n(a).notifications.status==="denied"?(e(),i("div",P,[s[4]||(s[4]=t("p",{class:"error-message"},[t("i",{class:"la la-exclamation-triangle"}),l(" As notificações estão bloqueadas no navegador. ")],-1)),t("button",{class:"action-button secondary",onClick:g},s[3]||(s[3]=[t("i",{class:"la la-unlock"},null,-1),l(" Desbloquear Notificações ")])),s[5]||(s[5]=t("p",{class:"instructions-text"}," Para reativar, você precisará desbloqueá-las manualmente nas configurações do seu navegador para este site. ",-1))])):n(a).notifications.status==="granted"?(e(),i("div",{key:2,onClick:p},s[6]||(s[6]=[t("p",{class:"success-message"},[t("i",{class:"la la-check-circle"}),l(" Notificações ativadas! ")],-1)]))):y("",!0)]),s[12]||(s[12]=t("hr",{class:"section-separator"},null,-1)),t("section",null,[s[11]||(s[11]=t("h2",null,[t("i",{class:"lab la-app-store-ios text-blue-500"}),l(" Instalar")],-1)),u.value?(e(),i("div",B,[s[9]||(s[9]=t("p",{class:"info-message"},"Deseja instalar o app em seu dispositivo?",-1)),t("button",{class:"action-button",onClick:f},s[8]||(s[8]=[t("i",{class:"la la-download"},null,-1),l(" Instalar aplicativo ")]))])):(e(),i("div",D,s[10]||(s[10]=[t("p",{class:"info-message"}," O aplicativo já está instalado ou não é possível instalar neste navegador. ",-1)])))]),s[13]||(s[13]=t("hr",{class:"section-separator"},null,-1))])]))}},T=v(E,[["__scopeId","data-v-60045982"]]);export{T as default};
