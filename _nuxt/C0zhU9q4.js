import{L as ve}from"./hcp5vuFM.js";import{_ as pe,x as fe,r as g,h as T,A as me,D as be,f as _e,P as ge,c as o,C as ne,m as i,F as C,a as t,z as f,n as h,t as c,i as S,v as x,b as he,e as E,E as se,k as $,L as ye,o as s,N as ae,O as Se}from"./DUsU1EbR.js";import{F as ke}from"./BV0JURaq.js";import{a as De,S as ze,E as Ce}from"./yLpbTN3T.js";import"./BcZQbp_F.js";const xe={class:"tabs-container print-hide"},Ee={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},Te=["aria-selected"],$e={class:"badge"},Ve=["aria-selected"],Le=["aria-selected"],we={class:"tab-content"},Fe={id:"tab-content-lista",role:"tabpanel"},Ie={class:"text-center"},Oe={key:0},Ae={key:1},je={key:2},Me={key:3},Ne={key:4},Be={id:"tab-content-filters",role:"tabpanel"},Ge={id:"tab-content-print",role:"tabpanel"},Pe={class:"text-center flex col items-center gap-4"},Ue={class:"p form-group flex items-center aling-center"},qe={class:"a4 print-hide"},He={class:"settings-list print-hide"},We=["onDragstart","onDragover","onDrop"],Ke=["onClick"],Re={key:0,class:"print-page"},Je=["onDragstart","onDragover","onDrop"],Qe={class:"table-container"},Xe={colspan:"5"},Ye={class:"flex items-center aling-center justify-center"},Ze=["onClick"],et={key:0},tt={key:0},lt={key:0},nt=["innerHTML"],st={__name:"index",setup(at){const{lista:r}=fe(),u=g("lista"),p=g({fontSize:17}),V=g([]),k=g([]);function oe(l){V.value=l;const e=Array.from(new Set(l.map(v=>v.title||"Sem título"))),d=k.value.filter(v=>e.includes(v));e.forEach(v=>{d.includes(v)||d.push(v)}),k.value=d}const m=T(()=>{const l={};return V.value.forEach(e=>{const d=e.title||"Sem título";(l[d]||(l[d]=[])).push(e)}),k.value.filter(e=>l[e]).map(e=>({title:e,items:l[e].slice().sort((d,v)=>d.onDate&&v.onDate?d.onDate-v.onDate:0)}))});function ie(){p.value.fontSize<10&&(p.value.fontSize=10),p.value.fontSize>25&&(p.value.fontSize=25),p.value.fontSize=Math.round(p.value.fontSize*10)/10}const L=l=>{var e;return(e=l==null?void 0:l.replace(/-$/,""))==null?void 0:e.trim()},re=l=>{if(!l)return 0;let e=0;return l.search&&e++,l.title&&e++,l.locale&&e++,l.date&&e++,l.calendars&&l.calendars.length>0&&e++,e},ue=()=>{u.value="lista",setTimeout(()=>{window.print()},1e3)},de=T(()=>re(r.filters)),y=g(null),D=g(null),w=l=>{y.value=l},F=l=>{D.value=l},I=l=>{if(y.value===null||y.value===l){y.value=null,D.value=null;return}const e=k.value.slice(),[d]=e.splice(y.value,1);e.splice(l,0,d),k.value=e,y.value=null,D.value=null},_=me({});be(m,()=>{m.value&&m.value.forEach(l=>{l.title in _||(_[l.title]=!0)})},{immediate:!0});const O=l=>{u.value="print",_[l]=!_[l]},A=T(()=>m.value.length>0&&m.value.every(l=>_[l.title])),ce=l=>{m.value.forEach(e=>{_[e.title]=l})},z=g(null);return _e(()=>{z.value=new De({extensions:[ze],content:`
      <p>Oração Santa Ceia</p>
      <p><strong>Pão:</strong> "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo."</p>
      <p><strong>Cálice:</strong> "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo."</p>
    `,editable:!0})}),ge(()=>{z.value&&z.value.destroy()}),(l,e)=>{var v,j,M,N,B,G,P,U,q,H,W,K,R,J,Q,X,Y,Z,ee,te,le;const d=ve;return s(),o("div",{style:ye({fontSize:p.value.fontSize+"px"})},[i(r).loading?(s(),ne(d,{key:0})):(s(),o(C,{key:1},[t("div",xe,[t("nav",Ee,[t("span",{id:"tab-filters","aria-selected":u.value==="filters",role:"tab",type:"button",class:h(["tab",{active:u.value==="filters"}]),style:{position:"relative"},onClick:e[0]||(e[0]=n=>u.value="filters")},[t("span",$e,c(de.value),1),e[6]||(e[6]=t("i",{class:"la la-filter z-10"},null,-1))],10,Te),t("span",{id:"tab-print","aria-selected":u.value==="print",role:"tab",type:"button",class:h(["tab",{active:u.value==="print"}]),onClick:e[1]||(e[1]=n=>u.value="print")},e[7]||(e[7]=[t("i",{class:"la la-print"},null,-1)]),10,Ve),t("span",{id:"tab-lista","aria-selected":u.value==="lista",role:"tab",type:"button",class:h(["tab",{active:u.value==="lista"}]),onClick:e[2]||(e[2]=n=>u.value="lista")}," Lista ",10,Le)])]),t("div",null,[t("div",we,[S(t("div",Fe,[t("div",Ie,[e[8]||(e[8]=t("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),(v=i(r).filters)!=null&&v.calendars?(s(),o("div",Oe,[t("b",null,c((((j=i(r).filters)==null?void 0:j.calendars)||[]).map(n=>L(n)).join(", ")),1)])):f("",!0),(M=i(r).filters)!=null&&M.locale?(s(),o("span",Ae,[t("b",null,c(L((N=i(r).filters)==null?void 0:N.locale)),1)])):f("",!0),(B=i(r).filters)!=null&&B.date?(s(),o("span",je," Data: "+c((q=(U=(P=(G=i(r).filters.date)==null?void 0:G.split("T")[0])==null?void 0:P.split("-"))==null?void 0:U.reverse())==null?void 0:q.join("/")),1)):f("",!0),!i(r).filters.date&&((H=i(r).filters)!=null&&H.start||(W=i(r).filters)!=null&&W.end)?(s(),o("div",Me," Período: "+c((X=(Q=(J=(R=(K=i(r).filters)==null?void 0:K.start)==null?void 0:R.split("T")[0])==null?void 0:J.split("-"))==null?void 0:Q.reverse())==null?void 0:X.join("/"))+" à "+c((le=(te=(ee=(Z=(Y=i(r).filters)==null?void 0:Y.end)==null?void 0:Z.split("T")[0])==null?void 0:ee.split("-"))==null?void 0:te.reverse())==null?void 0:le.join("/")),1)):f("",!0),i(r).filters.search?(s(),o("div",Ne,c(i(r).filters.search),1)):f("",!0)])],512),[[x,u.value==="lista"]]),S(t("div",Be,[he(ke,{"onUpdate:filtered":oe})],512),[[x,u.value==="filters"]]),S(t("div",Ge,[t("div",Pe,[e[12]||(e[12]=t("b",{class:"mb-4 p"},"Ajustes de impressão:",-1)),t("div",Ue,[e[9]||(e[9]=t("label",null,"Fonte",-1)),S(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>p.value.fontSize=n),type:"range",min:"10",max:"25",step:"0.1",placeholder:"Font Size"},null,512),[[se,p.value.fontSize,void 0,{number:!0}]]),S(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>p.value.fontSize=n),type:"number",min:"10",max:"25",step:"0.1",style:{width:"70px","margin-left":"8px"},onInput:ie},null,544),[[se,p.value.fontSize,void 0,{number:!0}]]),e[10]||(e[10]=E(" px "))]),t("div",{class:"p"},[t("button",{class:"success",onClick:ue},e[11]||(e[11]=[t("i",{class:"la la-print"},null,-1),E(" Imprimir ")]))])]),t("div",qe,[t("div",He,[e[13]||(e[13]=t("b",null,"Lista",-1)),t("div",null,[t("i",{class:h(["la",A.value?"la-toggle-on":"la-toggle-off"]),title:"Ocultar todos",onClick:e[5]||(e[5]=n=>ce(!A.value))},null,2)])]),(s(!0),o(C,null,$(m.value,(n,b)=>(s(),o("div",{key:n.title,class:h(["settings-list print-hide",{"drag-over":D.value===b}]),draggable:"true",onDragstart:a=>w(b),onDragover:ae(a=>F(b),["prevent"]),onDrop:a=>I(b)},[E(c(n.title)+" ",1),t("i",{class:h(["la",_[n.title]?"la-toggle-on":"la-toggle-off"]),title:"Alterar visibilidade",onClick:a=>O(n.title)},null,10,Ke)],42,We))),128))])],512),[[x,u.value==="print"]])])]),m.value.length?(s(),o("div",Re,[(s(!0),o(C,null,$(m.value,(n,b)=>S((s(),o("div",{key:n.title,class:h(["table-list",{"drag-over":D.value===b}]),draggable:"true",style:{cursor:"move"},onDragstart:a=>w(b),onDragover:ae(a=>F(b),["prevent"]),onDrop:a=>I(b)},[t("div",Qe,[t("table",null,[t("thead",null,[t("tr",null,[t("th",Xe,[t("div",Ye,[E(c(n.title)+" ",1),t("i",{class:"la la-toggle-on print-hide",style:{cursor:"pointer"},onClick:a=>O(n.title)},null,8,Ze)])])])]),t("tbody",null,[(s(!0),o(C,null,$(n.items,a=>(s(),o("tr",{key:a.id},[t("td",null,[a.formatDate?(s(),o("span",et,c(a.formatDate),1)):f("",!0)]),t("td",null,[a.formatWeek?(s(),o("span",tt,c(a.formatWeek),1)):f("",!0)]),t("td",null,[a.formatTime?(s(),o("span",lt,c(a.formatTime),1)):f("",!0)]),t("td",null,c(a.locale),1),t("td",null,[a.desc?(s(),o("span",{key:0,innerHTML:i(Se)(a.desc)},null,8,nt)):f("",!0)])]))),128))])])])],42,Je)),[[x,_[n.title]]])),128)),z.value?(s(),ne(i(Ce),{key:0,editor:z.value,class:"editable"},null,8,["editor"])):f("",!0)])):f("",!0)],64))],4)}}},vt=pe(st,[["__scopeId","data-v-f87398eb"]]);export{vt as default};
