import{L as _t}from"./Cojtx5tD.js";import{_ as Dt,y as ht,r as k,I as ot,h as _,f as rt,B as z,P as Ct,c as r,C as it,p as E,F as D,a as e,m as d,n as h,t as u,i as v,v as I,A as w,k as L,G as ut,e as V,g as St,Q as B,l as $t,R as xt,o,H as Et,M as dt,O as Lt,K as Tt}from"./B9qtw-Ye.js";import{a as At,S as qt,E as wt}from"./BkMBT871.js";import{d as Vt}from"./BcZQbp_F.js";const jt={class:"tabs-container print-hide"},zt={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},It=["aria-selected"],Ot={class:"badge"},Ut=["aria-selected"],Bt=["aria-selected"],Ft={class:"tab-content"},Mt={id:"tab-content-lista",role:"tabpanel"},Gt={class:"text-center"},Rt={key:0},Pt={key:1},Nt={key:2},Ht={key:3},Kt={key:4},Wt={id:"tab-content-filters",role:"tabpanel"},Qt={class:"content"},Jt={class:"form-inline"},Xt={class:"form-group"},Yt={class:"row"},Zt={class:"form-group"},te={class:"row"},ee=["value"],le={class:"form-group"},se={class:"row"},ne=["value"],ae={class:"form-group"},oe={class:"flex gap-xs"},re={class:"form-group"},ie={class:"flex gap-xs"},ue={class:"form-group",style:{"align-items":"flex-start"}},de=["id","value"],ce=["for"],pe={class:"form-group",style:{"text-align":"right"}},ve=["disabled"],fe={class:"form-inline",style:{gap:"1rem","margin-top":"1rem"}},me={id:"tab-content-print",role:"tabpanel"},be={class:"text-center flex col items-center gap-4"},ge={class:"p form-group flex items-center aling-center"},ye={class:"a4 print-hide"},ke={class:"settings-list print-hide"},_e=["onDragstart","onDragover","onDrop","onClick"],De={key:0,class:"print-page"},he=["onDragstart","onDragover","onDrop"],Ce={colspan:"5"},Se={class:"flex items-center aling-center justify-center"},$e=["onClick"],xe=["onDblclick"],Ee={key:0},Le={key:0},Te={key:0},Ae=["innerHTML"],qe={__name:"index",setup(we){const{lista:C}=ht(),c=k("lista"),s=ot({search:"",title:"",locale:"",date:"",start:"",end:"",calendars:[]}),j=k(1),O=St(),F=$t(),M=k(!1),ct=()=>{const l=O.query||{};["search","title","locale","date","start","end"].forEach(m=>{l[m]!==void 0&&(s[m]=l[m])}),l.calendars&&(s.calendars=Array.isArray(l.calendars)?l.calendars:l.calendars.split(",").filter(Boolean));const{today:a,future:p}=B();s.start||(s.start=a),s.end||(s.end=p)},G=Vt(()=>{const l=Object.fromEntries(Object.entries(s).filter(([t,a])=>t==="calendars"?a.length:a!==""&&a!=null).map(([t,a])=>Array.isArray(a)?[t,a.join(",")]:[t,a]));F.replace({query:l})},200),S=_(()=>{const l=xt(C.allEvents||[],s);return Array.from(new Set(l.map(a=>a.id))).map(a=>l.find(p=>p.id===a))});function pt(){G()}rt(()=>{ct()}),z([s,j],G,{deep:!0});function T(l){if(l==="calendars")s.calendars=[];else if(l==="date"){s.date="";const{today:t,future:a}=B();s.start=t,s.end=a}else if(l==="start"||l==="end"){const{today:t,future:a}=B();s.start=t,s.end=a}else s[l]=""}function U(l,t){return Array.from(new Set(l.map(a=>a[t]).filter(a=>typeof a=="string"&&a.trim())))}const vt=_(()=>U(S.value,"title")),ft=_(()=>U(S.value,"locale")),mt=_(()=>U(C.allEvents,"list")),$=k([]);z(S,l=>{var m;const t=Array.from(new Set(l.map(b=>b.title||"Sem título"))),p=(((m=O.query.order)==null?void 0:m.split(",").filter(Boolean))||[]).filter(b=>t.includes(b));t.forEach(b=>{p.includes(b)||p.push(b)}),$.value=p},{immediate:!0}),z($,l=>{const t={...O.query};l&&l.length>0?t.order=l.join(","):delete t.order,F.replace({query:t})});const g=_(()=>{const l={};return S.value.forEach(t=>{const a=t.title||"Sem título";(l[a]||(l[a]=[])).push(t)}),$.value.filter(t=>l[t]).map(t=>({title:t,items:l[t].slice().sort((a,p)=>a.onDate&&p.onDate?a.onDate-p.onDate:0)}))}),R=l=>{var t;return(t=l==null?void 0:l.replace(/-$/,""))==null?void 0:t.trim()},bt=_(()=>{let l=0;return s.search&&l++,s.title&&l++,s.locale&&l++,s.date&&l++,s.calendars&&s.calendars.length>0&&l++,l}),gt=()=>{c.value="lista",setTimeout(()=>{window.print()},1e3)},x=k(null),A=k(null),P=l=>{x.value=l},N=l=>{A.value=l},H=l=>{if(x.value===null||x.value===l){x.value=null,A.value=null;return}const t=[...$.value],[a]=t.splice(x.value,1);t.splice(l,0,a),$.value=t,x.value=null,A.value=null},y=ot({});z(g,()=>{g.value&&g.value.forEach(l=>{l.title in y||(y[l.title]=!0)})},{immediate:!0});const K=l=>{c.value="print",y[l]=!y[l]},W=_(()=>g.value.length>0&&g.value.every(l=>y[l.title])),yt=l=>{g.value.forEach(t=>{y[t.title]=l})},kt=l=>{const t=`https://www.google.com/calendar/event?eid=${l.htmlLink}`;window.open(t,"_blank")},q=k(null);return rt(()=>{q.value=new At({extensions:[qt],content:`
      <p>Oração Santa Ceia</p>
      <p><strong>Pão:</strong> "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo."</p>
      <p><strong>Cálice:</strong> "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo."</p>
    `,editable:!0})}),Ct(()=>{q.value&&q.value.destroy()}),(l,t)=>{var p,m,b,Q,J,X,Y,Z,tt,et,lt,st,nt,at;const a=_t;return o(),r("div",null,[E(C).loading?(o(),it(a,{key:0})):(o(),r(D,{key:1},[e("div",jt,[e("nav",zt,[e("span",{id:"tab-filters","aria-selected":c.value==="filters",role:"tab",type:"button",class:h(["tab",{active:c.value==="filters"}]),style:{position:"relative"},onClick:t[0]||(t[0]=n=>c.value="filters")},[e("span",Ot,u(bt.value),1),t[18]||(t[18]=e("i",{class:"la la-filter z-10"},null,-1))],10,It),e("span",{id:"tab-print","aria-selected":c.value==="print",role:"tab",type:"button",class:h(["tab",{active:c.value==="print"}]),onClick:t[1]||(t[1]=n=>c.value="print")},t[19]||(t[19]=[e("i",{class:"la la-print"},null,-1)]),10,Ut),e("span",{id:"tab-lista","aria-selected":c.value==="lista",role:"tab",type:"button",class:h(["tab",{active:c.value==="lista"}]),onClick:t[2]||(t[2]=n=>c.value="lista")}," Lista ",10,Bt)])]),e("div",null,[e("div",Ft,[v(e("div",Mt,[e("div",Gt,[t[20]||(t[20]=e("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),s.calendars.length?(o(),r("div",Rt,[e("b",null,u(s.calendars.map(R).join(", ")),1)])):d("",!0),s.locale?(o(),r("span",Pt,[e("b",null,u(R(s.locale)),1)])):d("",!0),s.date?(o(),r("span",Nt," Data: "+u((Q=(b=(m=(p=s.date)==null?void 0:p.split("T")[0])==null?void 0:m.split("-"))==null?void 0:b.reverse())==null?void 0:Q.join("/")),1)):d("",!0),!s.date&&(s.start||s.end)?(o(),r("div",Ht," Período: "+u((Z=(Y=(X=(J=s.start)==null?void 0:J.split("T")[0])==null?void 0:X.split("-"))==null?void 0:Y.reverse())==null?void 0:Z.join("/"))+" à "+u((st=(lt=(et=(tt=s.end)==null?void 0:tt.split("T")[0])==null?void 0:et.split("-"))==null?void 0:lt.reverse())==null?void 0:st.join("/")),1)):d("",!0),s.search?(o(),r("div",Kt,u(s.search),1)):d("",!0)])],512),[[I,c.value==="lista"]]),v(e("div",Wt,[e("div",Qt,[e("div",Jt,[e("div",null,[e("div",Xt,[t[21]||(t[21]=e("label",{for:"search"},"Pesquisar",-1)),e("div",Yt,[v(e("input",{id:"search","onUpdate:modelValue":t[3]||(t[3]=n=>s.search=n),type:"text",placeholder:"Buscar itens..."},null,512),[[w,s.search]]),s.search?(o(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar pesquisa",type:"button",onClick:t[4]||(t[4]=n=>T("search"))}," × ")):d("",!0)])]),e("div",Zt,[t[23]||(t[23]=e("label",{for:"title"},"Título",-1)),e("div",te,[v(e("select",{id:"title","onUpdate:modelValue":t[5]||(t[5]=n=>s.title=n)},[t[22]||(t[22]=e("option",{value:""},"Todos os títulos",-1)),(o(!0),r(D,null,L(vt.value,n=>(o(),r("option",{key:n,value:n},u(n),9,ee))),128))],512),[[ut,s.title]]),s.title?(o(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar título",type:"button",onClick:t[6]||(t[6]=n=>T("title"))}," × ")):d("",!0)])]),e("div",le,[t[25]||(t[25]=e("label",{for:"locale"},"Local",-1)),e("div",se,[v(e("select",{id:"locale","onUpdate:modelValue":t[7]||(t[7]=n=>s.locale=n)},[t[24]||(t[24]=e("option",{value:""},"Todos os locais",-1)),(o(!0),r(D,null,L(ft.value,n=>(o(),r("option",{key:n,value:n},u(n),9,ne))),128))],512),[[ut,s.locale]]),s.locale?(o(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar local",type:"button",onClick:t[8]||(t[8]=n=>T("locale"))}," × ")):d("",!0)])]),e("div",ae,[t[26]||(t[26]=e("label",{for:"date"},"Data",-1)),e("div",oe,[v(e("input",{id:"date","onUpdate:modelValue":t[9]||(t[9]=n=>s.date=n),type:"date"},null,512),[[w,s.date]]),s.date?(o(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar data",type:"button",onClick:t[10]||(t[10]=n=>T("date"))}," × ")):d("",!0)])]),e("div",re,[t[27]||(t[27]=e("label",null,"Intervalo de Datas",-1)),e("div",ie,[v(e("input",{"onUpdate:modelValue":t[11]||(t[11]=n=>s.start=n),type:"date"},null,512),[[w,s.start]]),v(e("input",{"onUpdate:modelValue":t[12]||(t[12]=n=>s.end=n),type:"date"},null,512),[[w,s.end]]),s.start||s.end?(o(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar datas",type:"button",onClick:t[13]||(t[13]=n=>T("date"))}," × ")):d("",!0)])])]),e("div",null,[e("div",ue,[t[28]||(t[28]=e("label",null,"Agendas",-1)),e("div",null,[(o(!0),r(D,null,L(mt.value,n=>(o(),r("div",{key:n},[v(e("input",{id:"cat-"+n,"onUpdate:modelValue":t[14]||(t[14]=f=>s.calendars=f),type:"checkbox",value:n,style:{margin:"5px 5px 0 0"}},null,8,de),[[Et,s.calendars]]),e("label",{for:"cat-"+n,style:{"margin-bottom":"0"}},u(n),9,ce)]))),128))])]),e("div",pe,[t[29]||(t[29]=e("label",null,null,-1)),e("button",{class:"success",disabled:M.value||E(C).loading,onClick:t[15]||(t[15]=n=>pt())},u(M.value||E(C).loading?"Atualizando...":"Aplicar"),9,ve)])])]),e("div",fe,[e("span",null,[t[30]||(t[30]=e("i",{class:"la la-calendar-check"},null,-1)),V(" "+u(((at=(nt=E(C))==null?void 0:nt.calendars)==null?void 0:at.length)||0),1)]),e("span",null,[t[31]||(t[31]=e("i",{class:"la la-tasks"},null,-1)),V(" "+u(Array.isArray(S.value)?S.value.length:0),1)])])])],512),[[I,c.value==="filters"]]),v(e("div",me,[e("div",be,[t[34]||(t[34]=e("b",{class:"mb-4 p"},"Ajustes de impressão:",-1)),e("div",ge,[t[32]||(t[32]=e("label",null,"Fonte",-1)),v(e("input",{"onUpdate:modelValue":t[16]||(t[16]=n=>j.value=n),type:"range",min:"0.8",max:"1.6",step:"0.1",placeholder:"Font Size"},null,512),[[w,j.value]])]),e("div",{class:"p"},[e("button",{class:"success",onClick:gt},t[33]||(t[33]=[e("i",{class:"la la-print"},null,-1),V(" Imprimir ")]))])]),e("div",ye,[e("div",ke,[t[35]||(t[35]=e("b",null,"Lista",-1)),e("div",null,[e("i",{class:h(["la",W.value?"la-toggle-on":"la-toggle-off"]),title:"Ocultar todos",onClick:t[17]||(t[17]=n=>yt(!W.value))},null,2)])]),(o(!0),r(D,null,L($.value,(n,f)=>(o(),r("div",{key:n,class:h(["settings-list print-hide",{"drag-over":A.value===f}]),draggable:"true",onDragstart:i=>P(f),onDragover:dt(i=>N(f),["prevent"]),onDrop:i=>H(f),onClick:i=>K(n)},[V(u(n)+" ",1),e("i",{class:h(["la",y[n]?"la-toggle-on":"la-toggle-off"]),title:"Alterar visibilidade"},null,2)],42,_e))),128))])],512),[[I,c.value==="print"]])])]),g.value.length?(o(),r("div",De,[(o(!0),r(D,null,L(g.value,(n,f)=>v((o(),r("div",{key:n.title,class:h(["table-list",{"drag-over":A.value===f}]),draggable:"true",style:{cursor:"move"},onDragstart:i=>P(f),onDragover:dt(i=>N(f),["prevent"]),onDrop:i=>H(f)},[e("div",{class:"table-container",style:Tt({fontSize:j.value+"rem"})},[e("table",null,[e("thead",null,[e("tr",null,[e("th",Ce,[e("div",Se,[V(u(n.title)+" ",1),e("i",{class:"la la-toggle-on print-hide",style:{cursor:"pointer"},onClick:i=>K(n.title)},null,8,$e)])])])]),e("tbody",null,[(o(!0),r(D,null,L(n.items,i=>(o(),r("tr",{key:i.id,onDblclick:je=>kt(i)},[e("td",null,[i.formatDate?(o(),r("span",Ee,u(i.formatDate),1)):d("",!0)]),e("td",null,[i.formatWeek?(o(),r("span",Le,u(i.formatWeek),1)):d("",!0)]),e("td",null,[i.formatTime?(o(),r("span",Te,u(i.formatTime),1)):d("",!0)]),e("td",null,u(i.locale),1),e("td",null,[i.desc?(o(),r("span",{key:0,innerHTML:E(Lt)(i.desc)},null,8,Ae)):d("",!0)])],40,xe))),128))])])],4)],42,he)),[[I,y[n.title]]])),128)),q.value?(o(),it(E(wt),{key:0,editor:q.value,class:"editable"},null,8,["editor"])):d("",!0)])):d("",!0)],64))])}}},Be=Dt(qe,[["__scopeId","data-v-04d42b02"]]);export{Be as default};
