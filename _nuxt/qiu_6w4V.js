import{L as ht}from"./BENRx9rZ.js";import{_ as Ct,u as St,r as D,z as it,h as k,f as rt,A as j,R as Tt,c as i,B as ut,l as L,F as _,a as e,p as d,n as h,t as r,i as v,v as I,D as B,C as V,k as C,I as dt,e as z,g as Et,S as F,m as $t,U as xt,o,J as Lt,M as ct,E as At}from"./DjomU_UK.js";import{a as qt,S as wt,E as Vt}from"./Bdk7qMFR.js";import{d as zt}from"./BcZQbp_F.js";const jt={class:"tabs-container print-hide"},It={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},Ot=["aria-selected"],Ut={class:"badge"},Bt=["aria-selected"],Ft={class:"badge"},Mt=["aria-selected"],Gt={class:"tab-content"},Rt={id:"tab-content-lista",role:"tabpanel"},Nt={key:0},Pt={key:1},Ht={key:2},Wt={key:3},Jt={key:4},Kt={id:"tab-content-filters",role:"tabpanel"},Qt={class:"content"},Xt={class:"form-inline"},Yt={class:"form-group"},Zt={class:"row"},te={class:"form-group"},ee={class:"row"},le=["value"],se={class:"form-group"},ne={class:"row"},ae=["value"],oe={class:"form-group"},ie={class:"flex gap-xs"},re={class:"form-group"},ue={class:"flex gap-xs"},de={class:"form-group",style:{"align-items":"flex-start"}},ce=["id","value"],pe=["for"],ve={class:"form-group",style:{"text-align":"right"}},fe=["disabled"],me={class:"form-inline",style:{gap:"1rem","margin-top":"1rem"}},be={id:"tab-content-print",role:"tabpanel"},ge={class:"a4 print-hide"},ye={class:"settings-list"},ke={id:"fontSteps"},_e=["value"],De={class:"settings-list print-hide"},he=["onDragstart","onDragover","onDrop","onClick"],Ce={key:0,class:"print-page"},Se=["onDragstart","onDragover","onDrop"],Te={colspan:"5"},Ee={class:"flex items-center aling-center justify-center"},$e=["onClick"],xe=["onDblclick"],Le={key:0},Ae={key:0},qe={key:0},we=["innerHTML"],Ve={__name:"index",setup(ze){const{lista:S}=St(),c=D("lista"),s=it({search:"",title:"",locale:"",date:"",start:"",end:"",calendars:[]}),T=D(1),O=Et(),M=$t(),G=D(!1),pt=()=>{const l=O.query||{};["search","title","locale","date","start","end"].forEach(b=>{l[b]!==void 0&&(s[b]=l[b])}),l.calendars&&(s.calendars=Array.isArray(l.calendars)?l.calendars:l.calendars.split(",").filter(Boolean));const{today:a,future:p}=F();s.start||(s.start=a),s.end||(s.end=p)},R=zt(()=>{const l=Object.fromEntries(Object.entries(s).filter(([t,a])=>t==="calendars"?a.length:a!==""&&a!=null).map(([t,a])=>Array.isArray(a)?[t,a.join(",")]:[t,a]));M.replace({query:l})},200),E=k(()=>{const l=xt(S.allEvents||[],s);return Array.from(new Set(l.map(a=>a.id))).map(a=>l.find(p=>p.id===a))});function vt(){R()}rt(()=>{pt()}),j([s,T],R,{deep:!0});function A(l){if(l==="calendars")s.calendars=[];else if(l==="date"){s.date="";const{today:t,future:a}=F();s.start=t,s.end=a}else if(l==="start"||l==="end"){const{today:t,future:a}=F();s.start=t,s.end=a}else s[l]=""}function U(l,t){return Array.from(new Set(l.map(a=>a[t]).filter(a=>typeof a=="string"&&a.trim())))}const ft=k(()=>U(E.value,"title")),mt=k(()=>U(E.value,"locale")),bt=k(()=>U(S.allEvents,"list")),$=D([]);j(E,l=>{var b;const t=Array.from(new Set(l.map(g=>g.title||"Sem título"))),p=(((b=O.query.order)==null?void 0:b.split(",").filter(Boolean))||[]).filter(g=>t.includes(g));t.forEach(g=>{p.includes(g)||p.push(g)}),$.value=p},{immediate:!0}),j($,l=>{const t={...O.query};l&&l.length>0?t.order=l.join(","):delete t.order,M.replace({query:t})});const y=k(()=>{const l={};return E.value.forEach(t=>{const a=t.title||"Sem título";(l[a]||(l[a]=[])).push(t)}),$.value.filter(t=>l[t]).map(t=>({title:t,items:l[t].slice().sort((a,p)=>a.onDate&&p.onDate?a.onDate-p.onDate:0)}))}),N=l=>{var t;return(t=l==null?void 0:l.replace(/-$/,""))==null?void 0:t.trim()},gt=k(()=>{let l=0;return s.search&&l++,s.title&&l++,s.locale&&l++,s.date&&l++,s.calendars&&s.calendars.length>0&&l++,l}),yt=()=>{c.value="lista",setTimeout(()=>{window.print()},1e3)},x=D(null),q=D(null),P=l=>{x.value=l},H=l=>{q.value=l},W=l=>{if(x.value===null||x.value===l){x.value=null,q.value=null;return}const t=[...$.value],[a]=t.splice(x.value,1);t.splice(l,0,a),$.value=t,x.value=null,q.value=null},f=it({});j(y,()=>{if(!y.value)return;const l=y.value.map(t=>t.title);l.forEach(t=>{t in f||(f[t]=!0)});for(const t in f)l.includes(t)||delete f[t]},{immediate:!0});const J=l=>{c.value="print",f[l]=!f[l]},K=k(()=>y.value.length>0&&y.value.every(l=>f[l.title])),kt=l=>{y.value.forEach(t=>{f[t.title]=l})},_t=l=>{const t=`https://www.google.com/calendar/event?eid=${l.htmlLink}`;window.open(t,"_blank")},w=D(null),Dt=k(()=>Object.values(f).filter(Boolean).length);return rt(()=>{w.value=new qt({extensions:[wt],content:`
      <p>Oração Santa Ceia</p>
      <p><strong>Pão:</strong> "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo."</p>
      <p><strong>Cálice:</strong> "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo."</p>
    `,editable:!0})}),Tt(()=>{w.value&&w.value.destroy()}),(l,t)=>{var p,b,g,Q,X,Y,Z,tt,et,lt,st,nt,at,ot;const a=ht;return o(),i("div",null,[L(S).loading?(o(),ut(a,{key:0})):(o(),i(_,{key:1},[e("div",jt,[e("nav",It,[e("span",{id:"tab-filters","aria-selected":c.value==="filters",role:"tab",type:"button",class:h(["tab",{active:c.value==="filters"}]),style:{position:"relative"},onClick:t[0]||(t[0]=n=>c.value="filters")},[e("span",Ut,r(gt.value),1),t[18]||(t[18]=e("i",{class:"la la-filter z-10"},null,-1))],10,Ot),e("span",{id:"tab-print","aria-selected":c.value==="print",role:"tab",type:"button",class:h(["tab",{active:c.value==="print"}]),onClick:t[1]||(t[1]=n=>c.value="print")},[e("span",Ft,r(Dt.value),1),t[19]||(t[19]=e("i",{class:"la la-print"},null,-1))],10,Bt),e("span",{id:"tab-lista","aria-selected":c.value==="lista",role:"tab",type:"button",class:h(["tab",{active:c.value==="lista"}]),onClick:t[2]||(t[2]=n=>c.value="lista")}," Lista ",10,Mt)])]),e("div",null,[e("div",Gt,[v(e("div",Rt,[e("div",{class:"text-center",style:B({fontSize:T.value+"em"})},[t[20]||(t[20]=e("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),s.calendars.length?(o(),i("div",Nt,[e("b",null,r(s.calendars.map(N).join(", ")),1)])):d("",!0),s.locale?(o(),i("span",Pt,[e("b",null,r(N(s.locale)),1)])):d("",!0),s.date?(o(),i("span",Ht," Data: "+r((Q=(g=(b=(p=s.date)==null?void 0:p.split("T")[0])==null?void 0:b.split("-"))==null?void 0:g.reverse())==null?void 0:Q.join("/")),1)):d("",!0),!s.date&&(s.start||s.end)?(o(),i("div",Wt," Período: "+r((tt=(Z=(Y=(X=s.start)==null?void 0:X.split("T")[0])==null?void 0:Y.split("-"))==null?void 0:Z.reverse())==null?void 0:tt.join("/"))+" à "+r((nt=(st=(lt=(et=s.end)==null?void 0:et.split("T")[0])==null?void 0:lt.split("-"))==null?void 0:st.reverse())==null?void 0:nt.join("/")),1)):d("",!0),s.search?(o(),i("div",Jt,r(s.search),1)):d("",!0)],4)],512),[[I,c.value==="lista"]]),v(e("div",Kt,[e("div",Qt,[e("div",Xt,[e("div",null,[e("div",Yt,[t[21]||(t[21]=e("label",{for:"search"},"Pesquisar",-1)),e("div",Zt,[v(e("input",{id:"search","onUpdate:modelValue":t[3]||(t[3]=n=>s.search=n),type:"text",placeholder:"Buscar itens..."},null,512),[[V,s.search]]),s.search?(o(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar pesquisa",type:"button",onClick:t[4]||(t[4]=n=>A("search"))}," × ")):d("",!0)])]),e("div",te,[t[23]||(t[23]=e("label",{for:"title"},"Título",-1)),e("div",ee,[v(e("select",{id:"title","onUpdate:modelValue":t[5]||(t[5]=n=>s.title=n)},[t[22]||(t[22]=e("option",{value:""},"Todos os títulos",-1)),(o(!0),i(_,null,C(ft.value,n=>(o(),i("option",{key:n,value:n},r(n),9,le))),128))],512),[[dt,s.title]]),s.title?(o(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar título",type:"button",onClick:t[6]||(t[6]=n=>A("title"))}," × ")):d("",!0)])]),e("div",se,[t[25]||(t[25]=e("label",{for:"locale"},"Local",-1)),e("div",ne,[v(e("select",{id:"locale","onUpdate:modelValue":t[7]||(t[7]=n=>s.locale=n)},[t[24]||(t[24]=e("option",{value:""},"Todos os locais",-1)),(o(!0),i(_,null,C(mt.value,n=>(o(),i("option",{key:n,value:n},r(n),9,ae))),128))],512),[[dt,s.locale]]),s.locale?(o(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar local",type:"button",onClick:t[8]||(t[8]=n=>A("locale"))}," × ")):d("",!0)])]),e("div",oe,[t[26]||(t[26]=e("label",{for:"date"},"Data",-1)),e("div",ie,[v(e("input",{id:"date","onUpdate:modelValue":t[9]||(t[9]=n=>s.date=n),type:"date"},null,512),[[V,s.date]]),s.date?(o(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar data",type:"button",onClick:t[10]||(t[10]=n=>A("date"))}," × ")):d("",!0)])]),e("div",re,[t[27]||(t[27]=e("label",null,"Intervalo de Datas",-1)),e("div",ue,[v(e("input",{"onUpdate:modelValue":t[11]||(t[11]=n=>s.start=n),type:"date"},null,512),[[V,s.start]]),v(e("input",{"onUpdate:modelValue":t[12]||(t[12]=n=>s.end=n),type:"date"},null,512),[[V,s.end]]),s.start||s.end?(o(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar datas",type:"button",onClick:t[13]||(t[13]=n=>A("date"))}," × ")):d("",!0)])])]),e("div",null,[e("div",de,[t[28]||(t[28]=e("label",null,"Agendas",-1)),e("div",null,[(o(!0),i(_,null,C(bt.value,n=>(o(),i("div",{key:n},[v(e("input",{id:"cat-"+n,"onUpdate:modelValue":t[14]||(t[14]=m=>s.calendars=m),type:"checkbox",value:n,style:{margin:"5px 5px 0 0"}},null,8,ce),[[Lt,s.calendars]]),e("label",{for:"cat-"+n,style:{"margin-bottom":"0"}},r(n),9,pe)]))),128))])]),e("div",ve,[t[29]||(t[29]=e("label",null,null,-1)),e("button",{class:"success",disabled:G.value||L(S).loading,onClick:t[15]||(t[15]=n=>vt())},r(G.value||L(S).loading?"Atualizando...":"Aplicar"),9,fe)])])]),e("div",me,[e("span",null,[t[30]||(t[30]=e("i",{class:"la la-calendar-check"},null,-1)),z(" "+r(((ot=(at=L(S))==null?void 0:at.calendars)==null?void 0:ot.length)||0),1)]),e("span",null,[t[31]||(t[31]=e("i",{class:"la la-tasks"},null,-1)),z(" "+r(Array.isArray(E.value)?E.value.length:0),1)])])])],512),[[I,c.value==="filters"]]),v(e("div",be,[e("div",{class:"text-center flex col items-center gap-4"},[t[33]||(t[33]=e("b",{class:"mb-4 p"},"Ajustes de impressão:",-1)),e("div",{class:"p"},[e("button",{class:"success",onClick:yt},t[32]||(t[32]=[e("i",{class:"la la-print"},null,-1),z(" Imprimir ")]))])]),e("div",ge,[e("div",ye,[t[34]||(t[34]=e("b",null,"Tamanho da Fonte",-1)),v(e("input",{id:"fontSizeSlider",type:"range","onUpdate:modelValue":t[16]||(t[16]=n=>T.value=n),min:"0.5",max:"1.6",step:"0.05",list:"fontSteps"},null,512),[[V,T.value,void 0,{number:!0}]]),e("datalist",ke,[(o(),i(_,null,C(15,n=>e("option",{key:n,value:(n*.1).toFixed(1)},null,8,_e)),64))])]),e("div",De,[t[35]||(t[35]=e("b",null,"Lista",-1)),e("div",null,[e("i",{class:h(["la",K.value?"la-toggle-on":"la-toggle-off"]),title:"Ocultar todos",onClick:t[17]||(t[17]=n=>kt(!K.value))},null,2)])]),(o(!0),i(_,null,C($.value,(n,m)=>(o(),i("div",{key:n,class:h(["settings-list print-hide",{"drag-over":q.value===m}]),draggable:"true",onDragstart:u=>P(m),onDragover:ct(u=>H(m),["prevent"]),onDrop:u=>W(m),onClick:u=>J(n)},[z(r(n)+" ",1),e("i",{class:h(["la",f[n]?"la-toggle-on":"la-toggle-off"]),title:"Alterar visibilidade"},null,2)],42,he))),128))])],512),[[I,c.value==="print"]])])]),y.value.length?(o(),i("div",Ce,[(o(!0),i(_,null,C(y.value,(n,m)=>v((o(),i("div",{key:n.title,class:h(["table-list",{"drag-over":q.value===m}]),draggable:"true",style:{cursor:"move"},onDragstart:u=>P(m),onDragover:ct(u=>H(m),["prevent"]),onDrop:u=>W(m)},[e("div",{class:"table-container",style:B({fontSize:T.value+"em"})},[e("table",null,[e("thead",null,[e("tr",null,[e("th",Te,[e("div",Ee,[z(r(n.title)+" ",1),e("i",{class:"la la-toggle-on print-hide",style:{cursor:"pointer"},onClick:u=>J(n.title)},null,8,$e)])])])]),e("tbody",null,[(o(!0),i(_,null,C(n.items,u=>(o(),i("tr",{key:u.id,onDblclick:Ie=>_t(u)},[e("td",null,[u.formatDate?(o(),i("span",Le,r(u.formatDate),1)):d("",!0)]),e("td",null,[u.formatWeek?(o(),i("span",Ae,r(u.formatWeek),1)):d("",!0)]),e("td",null,[u.formatTime?(o(),i("span",qe,r(u.formatTime),1)):d("",!0)]),e("td",null,r(u.locale),1),e("td",null,[u.desc?(o(),i("span",{key:0,innerHTML:L(At)(u.desc)},null,8,we)):d("",!0)])],40,xe))),128))])])],4)],42,Se)),[[I,f[n.title]]])),128)),w.value?(o(),ut(L(Vt),{key:0,editor:w.value,class:"editable",style:B({fontSize:T.value+"em"})},null,8,["editor","style"])):d("",!0)])):d("",!0)],64))])}}},Me=Ct(Ve,[["__scopeId","data-v-201c73f1"]]);export{Me as default};
