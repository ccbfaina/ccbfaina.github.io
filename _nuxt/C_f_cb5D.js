import{_ as L,y as I,r as f,h as p,c as r,a,t as h,F as D,k as m,i as J,A as O,o as u,n as S,m as x}from"./C5rNtuYf.js";const Q={class:"calendar-wrapper"},R={class:"calendar-panel"},V={class:"calendar-header"},H={class:"month-year"},j={class:"calendar-table"},G=["onClick"],K={class:"day-number"},q={key:0,class:"event-indicator"},W={class:"events-panel"},X={class:"events-list-container"},Z={class:"search-container"},ee={key:0},te={class:"event-date-title"},ne={class:"events-list"},ae={class:"sub-events-list"},se=["innerHTML"],le={key:1,class:"no-events-message"},oe={__name:"agenda",setup(re){const{lista:N}=I(),y=f(N.allEvents),_=f(""),M=new Date,i=f(M.getMonth()),d=f(M.getFullYear()),c=f(null),b=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],E=p(()=>`${b[i.value]} ${d.value}`);function g(t){return t?t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):""}const T=p(()=>{const t=_.value.trim();if(!t)return y.value;if(t.includes("|"))try{const e=new RegExp(t,"i");return y.value.filter(n=>{const s=`${g(n.title||"")} ${g(n.locale||"")} ${g(n.desc||"")}`;return e.test(s)})}catch(e){return console.error("Regex inválida:",e),[]}else{const n=g(t).replace(/\bou\b/gi,",").split(/,|\s+/).map(s=>s.trim()).filter(Boolean).map(s=>new RegExp(`${s}`,"i"));return y.value.filter(s=>{const o=`${g(s.title||"")} ${g(s.locale||"")} ${g(s.desc||"")}`;return n.every(v=>v.test(o))})}}),k=p(()=>{let t;if(c.value){const e=c.value.date;t=T.value.filter(n=>{const s=new Date(n.date);return s.getUTCFullYear()===e.getFullYear()&&s.getUTCMonth()===e.getMonth()&&s.getUTCDate()===e.getDate()})}else t=T.value.filter(e=>{const n=new Date(e.date);return n.getUTCFullYear()===d.value&&n.getUTCMonth()===i.value});return t.reduce((e,n)=>{const s=new Date(n.date),o=`${s.getUTCFullYear()}-${(s.getUTCMonth()+1).toString().padStart(2,"0")}-${s.getUTCDate().toString().padStart(2,"0")}`;return e[o]||(e[o]={}),e[o][n.title]||(e[o][n.title]=[]),e[o][n.title].push(n),e},{})}),F=p(()=>{const t=[],e=new Date(d.value,i.value,1).getDay(),n=new Date(d.value,i.value+1,0).getDate(),s=new Date(d.value,i.value,0).getDate();for(let l=e-1;l>=0;l--)t.push({dayNumber:s-l,isPrevMonth:!0,isNextMonth:!1,isToday:!1,hasEvent:!1,events:[]});for(let l=1;l<=n;l++){const U=new Date(d.value,i.value,l),$=T.value.filter(A=>{const C=new Date(A.date);return C.getUTCDate()===l&&C.getUTCMonth()===i.value&&C.getUTCFullYear()===d.value});t.push({dayNumber:l,date:U,isPrevMonth:!1,isNextMonth:!1,isToday:U.toDateString()===M.toDateString(),hasEvent:$.length>0,events:$})}const o=42-t.length;for(let l=1;l<=o;l++)t.push({dayNumber:l,isPrevMonth:!1,isNextMonth:!0,isToday:!1,hasEvent:!1,events:[]});const v=[];for(;t.length>0;)v.push(t.splice(0,7));return v});function Y(t){const e=new Date(t),n=e.getUTCDate(),s=b[e.getUTCMonth()],o=e.getUTCFullYear();return`${n} de ${s} de ${o}`}function w(t){i.value+=t,i.value<0?(i.value=11,d.value--):i.value>11&&(i.value=0,d.value++),c.value=null}function P(t){return{"prev-month-day":t.isPrevMonth||t.isNextMonth,today:t.isToday,"has-event":t.hasEvent,"selected-day":c.value&&c.value.date&&t.date&&c.value.date.toDateString()===t.date.toDateString()}}function B(t){!t.isPrevMonth&&!t.isNextMonth&&(c.value&&c.value.date.toDateString()===t.date.toDateString()?c.value=null:c.value=t)}function z(t){return c.value?t.some(e=>{const n=new Date(e.date),s=c.value.date;return n.getUTCFullYear()===s.getFullYear()&&n.getUTCMonth()===s.getMonth()&&n.getUTCDate()===s.getDate()}):!1}return(t,e)=>(u(),r("div",Q,[a("div",R,[a("div",V,[a("i",{class:"las la-chevron-left",onClick:e[0]||(e[0]=n=>w(-1))}),a("h2",H,h(E.value),1),a("i",{class:"las la-chevron-right",onClick:e[1]||(e[1]=n=>w(1))})]),a("table",j,[e[3]||(e[3]=a("thead",null,[a("tr",null,[a("th",null,"Dom"),a("th",null,"Seg"),a("th",null,"Ter"),a("th",null,"Qua"),a("th",null,"Qui"),a("th",null,"Sex"),a("th",null,"Sáb")])],-1)),a("tbody",null,[(u(!0),r(D,null,m(F.value,(n,s)=>(u(),r("tr",{key:s},[(u(!0),r(D,null,m(n,o=>(u(),r("td",{key:o.date,class:S(P(o)),onClick:v=>B(o)},[a("div",K,h(o.dayNumber),1),o.events.length?(u(),r("div",q)):x("",!0)],10,G))),128))]))),128))])])]),a("div",W,[a("div",X,[e[5]||(e[5]=a("h3",null,"Eventos do Mês",-1)),a("div",Z,[J(a("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>_.value=n),placeholder:"Buscar eventos...",class:"search-input"},null,512),[[O,_.value]]),e[4]||(e[4]=a("i",{class:"las la-search search-icon"},null,-1))]),Object.keys(k.value).length?(u(),r("div",ee,[(u(!0),r(D,null,m(k.value,(n,s)=>(u(),r("div",{key:s},[a("h4",te,h(Y(s)),1),a("ul",ne,[(u(!0),r(D,null,m(n,(o,v)=>(u(),r("li",{key:v,class:S({"selected-event":z(o)})},[a("strong",null,h(v),1),a("ul",ae,[(u(!0),r(D,null,m(o,l=>(u(),r("li",{key:l.id},[a("p",null,[a("b",null,[a("i",null,h(l.formatTime)+h(l.formatTime?" - ":"")+h(l.formatDate),1)])]),a("p",null,h(l.locale),1),l.desc?(u(),r("p",{key:0,innerHTML:l.desc},null,8,se)):x("",!0)]))),128))])],2))),128))])]))),128))])):(u(),r("p",le,"Nenhum evento agendado para este mês."))])])]))}},ie=L(oe,[["__scopeId","data-v-17b6cca5"]]);export{ie as default};
