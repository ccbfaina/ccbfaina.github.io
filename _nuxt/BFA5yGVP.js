import{_ as z,y as A,r as M,h as T,c as u,a as n,t as f,F as p,k as _,i as I,A as J,o as i,n as U,m as $}from"./B4Og3mwD.js";const O={class:"calendar-wrapper"},Q={class:"calendar-panel"},V={class:"calendar-header"},H={class:"month-year"},j={class:"calendar-table"},G=["onClick"],K={class:"day-number"},q={key:0,class:"event-indicator"},W={class:"events-panel"},X={class:"events-list-container"},Z={class:"search-container"},ee={key:0},te={class:"event-date-title"},ne={class:"events-list"},ae={class:"sub-events-list"},se=["onClick"],le=["innerHTML"],oe={key:1,class:"no-events-message"},re={__name:"agenda",setup(ue){const{lista:N}=A(),C=M(""),w=new Date,c=M(w.getMonth()),v=M(w.getFullYear()),d=M(null),k=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],E=T(()=>`${k[c.value]} ${v.value}`);function y(e){return e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):""}const b=T(()=>{const e=C.value.trim(),t=N.allEvents;if(!e)return t;const a=s=>`${y(s.title||"")} ${y(s.locale||"")} ${y(s.desc||"")} ${new Date(s.date).toLocaleDateString("pt-BR")}`,o=(s,g)=>g.every(m=>m.test(s)),r=(s,g)=>g.test(s),h=t.map(s=>({event:s,text:a(s)}));if(e.includes("|"))try{const s=new RegExp(e,"i");return h.filter(({text:g})=>r(g,s)).map(({event:g})=>g)}catch(s){return console.error("Regex inválida:",s),[]}const D=y(e).replace(/\bou\b/gi,",").split(/,|\s+/).filter(Boolean).map(s=>new RegExp(s,"i"));return h.filter(({text:s})=>o(s,D)).map(({event:s})=>s)}),x=T(()=>{let e;if(d.value){const t=d.value.date;e=b.value.filter(a=>{const o=new Date(a.date);return o.getUTCFullYear()===t.getFullYear()&&o.getUTCMonth()===t.getMonth()&&o.getUTCDate()===t.getDate()})}else e=b.value.filter(t=>{const a=new Date(t.date);return a.getUTCFullYear()===v.value&&a.getUTCMonth()===c.value});return e.reduce((t,a)=>{const o=new Date(a.date),r=`${o.getUTCFullYear()}-${(o.getUTCMonth()+1).toString().padStart(2,"0")}-${o.getUTCDate().toString().padStart(2,"0")}`;return t[r]||(t[r]={}),t[r][a.title]||(t[r][a.title]=[]),t[r][a.title].push(a),t},{})}),F=T(()=>{const e=[],t=new Date(v.value,c.value,1).getDay(),a=new Date(v.value,c.value+1,0).getDate(),o=new Date(v.value,c.value,0).getDate();for(let l=t-1;l>=0;l--)e.push({dayNumber:o-l,isPrevMonth:!0,isNextMonth:!1,isToday:!1,hasEvent:!1,events:[]});for(let l=1;l<=a;l++){const D=new Date(v.value,c.value,l),s=b.value.filter(g=>{const m=new Date(g.date);return m.getUTCDate()===l&&m.getUTCMonth()===c.value&&m.getUTCFullYear()===v.value});e.push({dayNumber:l,date:D,isPrevMonth:!1,isNextMonth:!1,isToday:D.toDateString()===w.toDateString(),hasEvent:s.length>0,events:s})}const r=42-e.length;for(let l=1;l<=r;l++)e.push({dayNumber:l,isPrevMonth:!1,isNextMonth:!0,isToday:!1,hasEvent:!1,events:[]});const h=[];for(;e.length>0;)h.push(e.splice(0,7));return h});function Y(e){const t=new Date(e),a=t.getUTCDate(),o=k[t.getUTCMonth()],r=t.getUTCFullYear();return`${a} de ${o} de ${r}`}function S(e){c.value+=e,c.value<0?(c.value=11,v.value--):c.value>11&&(c.value=0,v.value++),d.value=null}function L(e){return{"prev-month-day":e.isPrevMonth||e.isNextMonth,today:e.isToday,"has-event":e.hasEvent,"selected-day":d.value&&d.value.date&&e.date&&d.value.date.toDateString()===e.date.toDateString()}}function B(e){!e.isPrevMonth&&!e.isNextMonth&&(d.value&&d.value.date.toDateString()===e.date.toDateString()?d.value=null:d.value=e)}function P(e){return d.value?e.some(t=>{const a=new Date(t.date),o=d.value.date;return a.getUTCFullYear()===o.getFullYear()&&a.getUTCMonth()===o.getMonth()&&a.getUTCDate()===o.getDate()}):!1}const R=e=>{const t=`https://www.google.com/calendar/event?eid=${e.htmlLink}`;window.open(t,"_blank")};return(e,t)=>(i(),u("div",O,[n("div",Q,[n("div",V,[n("i",{class:"las la-chevron-left",onClick:t[0]||(t[0]=a=>S(-1))}),n("h2",H,f(E.value),1),n("i",{class:"las la-chevron-right",onClick:t[1]||(t[1]=a=>S(1))})]),n("table",j,[t[3]||(t[3]=n("thead",null,[n("tr",null,[n("th",null,"Dom"),n("th",null,"Seg"),n("th",null,"Ter"),n("th",null,"Qua"),n("th",null,"Qui"),n("th",null,"Sex"),n("th",null,"Sáb")])],-1)),n("tbody",null,[(i(!0),u(p,null,_(F.value,(a,o)=>(i(),u("tr",{key:o},[(i(!0),u(p,null,_(a,r=>(i(),u("td",{key:r.date,class:U(L(r)),onClick:h=>B(r)},[n("div",K,f(r.dayNumber),1),r.events.length?(i(),u("div",q)):$("",!0)],10,G))),128))]))),128))])])]),n("div",W,[n("div",X,[n("div",Z,[I(n("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>C.value=a),placeholder:"Buscar eventos...",class:"search-input"},null,512),[[J,C.value]]),t[4]||(t[4]=n("i",{class:"las la-search search-icon"},null,-1))]),Object.keys(x.value).length?(i(),u("div",ee,[(i(!0),u(p,null,_(x.value,(a,o)=>(i(),u("div",{key:o},[n("h4",te,f(Y(o)),1),n("ul",ne,[(i(!0),u(p,null,_(a,(r,h)=>(i(),u("li",{key:h,class:U({"selected-event":P(r)})},[n("strong",null,f(h),1),n("ul",ae,[(i(!0),u(p,null,_(r,l=>(i(),u("li",{key:l.id,onClick:D=>R(l)},[n("p",null,[n("b",null,[n("i",null,f(l.formatTime)+f(l.formatTime?" - ":"")+f(l.formatDate),1)])]),n("p",null,f(l.locale),1),l.desc?(i(),u("p",{key:0,innerHTML:l.desc},null,8,le)):$("",!0)],8,se))),128))])],2))),128))])]))),128))])):(i(),u("p",oe,"Nenhum evento agendado para este mês."))])])]))}},ce=z(re,[["__scopeId","data-v-ef8eb2ba"]]);export{ce as default};
