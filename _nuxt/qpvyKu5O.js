import{_ as z,u as F,f as P,r as L,g as V,h as $,i as U,j as K,c as n,a as e,k as f,l as j,v as h,m as r,F as A,b as i,n as O,w as c,p as W,d as Z,q as G,o as a,s as H,e as N,t as E,x as m}from"./D4msPRtv.js";import{L as J}from"./CiEXHWot.js";import{d as M}from"./D0Dr7phT.js";const Q={class:"main"},X={class:"search contener"},Y=["value"],ee=["src"],se={key:1,class:"las la-user perfil-avatar"},te={key:1,class:"las la-user-slash"},ne={class:"suggestions"},ae={key:0,class:"loading-suggestions"},le={key:1,class:"contener"},oe=["onClick"],re={class:"title"},ie={key:0,class:"las la-external-link-alt external-link-icon","aria-label":"Link externo",title:"Este link abrirá em uma nova aba."},ue={class:"buttons"},ce={class:"contener"},de={class:"contener footer"},pe={style:{position:"relative",display:"inline-block"}},ve={key:0,class:"badge"},ge={__name:"index",async setup(_e){let d,k;const g=G(),I=V(),{settings:p}=F(),{$indexedDB:y}=P(),v=L([]),l=L(""),x=I.query.search;typeof x=="string"&&(l.value=x);const{data:R,pending:S}=([d,k]=$(async()=>W("index-tags",async()=>{try{return await y?.getTags({search:l.value})||[]}catch(t){return console.error("Erro ao carregar tags do IndexedDB:",t),[]}})),d=await d,k(),d),T=M(async()=>{v.value=await y?.getTags({search:l.value})||[]},300),b=t=>typeof t=="string"&&t.startsWith("http");U(l,async()=>{await T()},{immediate:!0,deep:!0});const q=t=>{l.value=t.target.value},C=t=>{!t||!t.href||(b(t.href)?window.open(t.href,"_blank","noopener noreferrer"):g.push(t.href))},_=()=>{const t=l.value.trim();if(!t)return alert("Por favor, digite sua busca!");C(v.value[0]||{href:`/lista?search=${encodeURIComponent(t)}`})},w=K(()=>p?.pendingConfigsCount??0),B=t=>{t.target.src="/icons/user.png"};return(t,s)=>{const u=Z;return a(),n("div",Q,[e("header",null,[e("div",X,[e("i",{class:"la la-search clickable",onClick:_}),e("input",{type:"text",placeholder:"Pesquisar...",value:l.value,onInput:q,onKeyup:j(_,["enter"])},null,40,Y),f(e("i",{class:"la la-times clickable",onClick:s[0]||(s[0]=o=>l.value="")},null,512),[[h,l.value]]),e("div",{class:"user-info",onClick:s[1]||(s[1]=o=>r(g).push("/perfil")),style:{cursor:"pointer"}},[r(p).user?(a(),n(A,{key:0},[r(p).user.photoURL?(a(),n("img",{key:0,src:r(p).user.photoURL,onError:B,alt:"Avatar do usuário"},null,40,ee)):(a(),n("i",se))],64)):(a(),n("i",te))])])]),e("div",ne,[r(S)?(a(),n("div",ae,[i(J)])):(a(),n("ul",le,[(a(!0),n(A,null,O(v.value,(o,D)=>(a(),n("li",{key:o.href+o.title.replace(/[^a-zA-Z0-9 ]/g,"")+D,onClick:()=>C(o)},[e("i",{class:H([o.icon||"la la-folder","icon"])},null,2),e("div",null,[e("strong",re,[N(m(o.title)+" ",1),b(o.href)?(a(),n("i",ie)):E("",!0)]),e("small",null,m(o.description),1)])],8,oe))),128)),f(e("li",{onClick:_},[...s[3]||(s[3]=[e("i",{class:"la la-calendar"},null,-1),e("div",null,[e("strong",null,"Pesquisar na agenda"),e("small",null,"Nenhum resultado encontrado.")],-1)])],512),[[h,!v.value.length]]),f(e("li",{onClick:s[2]||(s[2]=()=>r(g).push("/navegar"))},[...s[4]||(s[4]=[e("i",{class:"la la-chevron-down"},null,-1),e("div",null,[e("strong",null,"Navegar"),e("small",null,"Outros resultados...")],-1)])],512),[[h,!l.value&&r(R)?.length]])]))]),e("div",ue,[e("div",ce,[i(u,{to:"/navegar"},{default:c(()=>[...s[5]||(s[5]=[e("button",null,"Navegar",-1)])]),_:1}),i(u,{to:"/recentes"},{default:c(()=>[...s[6]||(s[6]=[e("button",null,"Atualizações",-1)])]),_:1}),i(u,{to:"/agenda?regionais=true"},{default:c(()=>[...s[7]||(s[7]=[e("button",null,"Próximos",-1)])]),_:1})])]),e("footer",null,[e("div",de,[s[10]||(s[10]=e("span",null,"Regional Faina",-1)),i(u,{to:"/sobre"},{default:c(()=>[...s[8]||(s[8]=[N("Sobre",-1)])]),_:1}),i(u,{to:"/settings"},{default:c(()=>[e("div",pe,[s[9]||(s[9]=e("i",{class:"la la-cog"},null,-1)),w.value>0?(a(),n("span",ve,m(w.value),1)):E("",!0)])]),_:1})])])])}}},ke=z(ge,[["__scopeId","data-v-8946d1a1"]]);export{ke as default};
