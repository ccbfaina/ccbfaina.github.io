import{_ as $,g as q,l as w,x as R,r as x,f as z,D as E,c as n,o as r,a as t,i as u,z as p,E as f,I as M,F as k,k as F,t as m,m as d,J as T,e as A,U as y}from"./B7aEwrNC.js";import{d as C}from"./BcZQbp_F.js";const _={class:"content"},j={class:"form-inline"},I={class:"form-group"},N={class:"row"},O={class:"form-group"},S={class:"row"},J={class:"form-group"},P={class:"row"},G=["value"],H={class:"form-group"},K={class:"flex gap-xs"},Q={class:"form-group"},W={class:"flex gap-xs"},X={class:"form-group",style:{"align-items":"flex-start"}},Y=["id","value"],Z=["for"],h={class:"form-group",style:{"text-align":"right"}},ee=["disabled"],te={class:"form-inline",style:{gap:"1rem","margin-top":"1rem"}},le={__name:"filters-lista",setup(ae){const V=q(),L=w(),{lista:i}=R(),b=x(!1),l=x({search:"",title:"",locale:"",date:"",start:"",end:"",calendars:[]}),U=()=>{const s=V.query||{};["search","title","locale","date","start","end"].forEach(a=>{s[a]!==void 0&&(l.value[a]=s[a])}),s.calendars&&(l.value.calendars=Array.isArray(s.calendars)?s.calendars:s.calendars.split(",").filter(Boolean));const{today:o,future:c}=y();l.value.start||(l.value.start=o),l.value.end||(l.value.end=c)},D=C(()=>{const s=Object.fromEntries(Object.entries(l.value).filter(([e,o])=>e==="calendars"?o.length:o!==""&&o!=null).map(([e,o])=>Array.isArray(o)?[e,o.join(",")]:[e,o]));L.replace({query:s})},200),g=C(()=>{b.value=!0,i.filters={...i.filters,...l.value}},1e3);z(()=>{U(),g()}),E(l,()=>{D(),g()},{deep:!0});function v(s){if(s==="calendars")l.value.calendars=[];else if(s==="date"){l.value.date="";const{today:e,future:o}=y();l.value.start=e,l.value.end=o}else if(s==="start"||s==="end"){const{today:e,future:o}=y();l.value.start=e,l.value.end=o}else l.value[s]=""}return(s,e)=>{var o,c;return r(),n("div",_,[t("div",j,[t("div",null,[t("div",I,[e[13]||(e[13]=t("label",{for:"search"},"Pesquisar",-1)),t("div",N,[u(t("input",{id:"search","onUpdate:modelValue":e[0]||(e[0]=a=>l.value.search=a),type:"text",placeholder:"Buscar itens..."},null,512),[[f,l.value.search]]),l.value.search?(r(),n("button",{key:0,class:"btn-clear","aria-label":"Limpar pesquisa",type:"button",onClick:e[1]||(e[1]=a=>v("search"))}," × ")):p("",!0)])]),t("div",O,[e[14]||(e[14]=t("label",{for:"title"},"Título",-1)),t("div",S,[u(t("input",{id:"title","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.title=a),type:"text",placeholder:"Filtrar por título..."},null,512),[[f,l.value.title]]),l.value.title?(r(),n("button",{key:0,class:"btn-clear","aria-label":"Limpar título",type:"button",onClick:e[3]||(e[3]=a=>v("title"))}," × ")):p("",!0)])]),t("div",J,[e[16]||(e[16]=t("label",{for:"locale"},"Local",-1)),t("div",P,[u(t("select",{id:"locale","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.locale=a)},[e[15]||(e[15]=t("option",{value:""},"Todos os locais",-1)),(r(!0),n(k,null,F(d(i).eventsLocales,a=>(r(),n("option",{key:a,value:a},m(a),9,G))),128))],512),[[M,l.value.locale]]),l.value.locale?(r(),n("button",{key:0,class:"btn-clear","aria-label":"Limpar local",type:"button",onClick:e[5]||(e[5]=a=>v("locale"))}," × ")):p("",!0)])]),t("div",H,[e[17]||(e[17]=t("label",{for:"date"},"Data",-1)),t("div",K,[u(t("input",{id:"date","onUpdate:modelValue":e[6]||(e[6]=a=>l.value.date=a),type:"date"},null,512),[[f,l.value.date]]),l.value.date?(r(),n("button",{key:0,class:"btn-clear","aria-label":"Limpar data",type:"button",onClick:e[7]||(e[7]=a=>v("date"))}," × ")):p("",!0)])]),t("div",Q,[e[18]||(e[18]=t("label",null,"Intervalo de Datas",-1)),t("div",W,[u(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>l.value.start=a),type:"date"},null,512),[[f,l.value.start]]),u(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>l.value.end=a),type:"date"},null,512),[[f,l.value.end]])]),l.value.start||l.value.end?(r(),n("button",{key:0,class:"btn-clear","aria-label":"Limpar datas",type:"button",onClick:e[10]||(e[10]=a=>v("date"))}," × ")):p("",!0)])]),t("div",null,[t("div",X,[e[19]||(e[19]=t("label",null,"Agendas",-1)),t("div",null,[(r(!0),n(k,null,F(d(i).eventsCalendars,a=>(r(),n("div",{key:a},[u(t("input",{id:"cat-"+a,"onUpdate:modelValue":e[11]||(e[11]=B=>l.value.calendars=B),type:"checkbox",value:a,style:{margin:"5px 5px 0 0"}},null,8,Y),[[T,l.value.calendars]]),t("label",{for:"cat-"+a,style:{"margin-bottom":"0"}},m(a),9,Z)]))),128))])]),t("div",h,[e[20]||(e[20]=t("label",null,null,-1)),t("button",{class:"success",disabled:b.value||d(i).loading,onClick:e[12]||(e[12]=a=>s.applyFilters())},m(b.value||d(i).loading?"Atualizando...":"Aplicar"),9,ee)])])]),t("div",te,[t("span",null,[e[21]||(e[21]=t("i",{class:"la la-calendar-check"},null,-1)),A(" "+m(((c=(o=d(i))==null?void 0:o.calendars)==null?void 0:c.length)||0),1)]),t("span",null,[e[22]||(e[22]=t("i",{class:"la la-tasks"},null,-1)),A(" "+m(Array.isArray(d(i).eventsFiltered)?d(i).eventsFiltered.length:0),1)])])])}}},ne=$(le,[["__scopeId","data-v-af339186"]]);export{ne as F};
