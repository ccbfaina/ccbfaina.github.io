import{_ as v,s as b,r as k,q as C,c as n,a,y as u,e as l,t as w,k as i,o as e}from"./lH2uTB9W.js";const y={key:0},N=["disabled"],x={key:0},A={key:1},P={key:1},q={__name:"settings",setup(B){const t=b(),c=k(!1);let r=null;async function d(){if(!("Notification"in window)){console.warn("Este navegador não suporta notificações."),alert("Este navegador não suporta notificações.");return}t.notifications.status="loading";try{const o=await Notification.requestPermission();o==="granted"?(console.log("Permissão para notificações concedida."),t.notifications.status="granted"):o==="denied"?(console.warn("Permissão para notificações negada."),t.notifications.status="denied"):(console.log("Permissão para notificações não foi concedida."),t.notifications.status="default")}catch(o){console.error("Erro ao solicitar permissão de notificação:",o)}}function f(){navigator.share?navigator.share({title:"Agenda CCB",text:"Acesse o aplicativo Agenda CCB",url:window.location.origin}):alert("Compartilhamento não suportado neste navegador.")}function p(){r&&(r.prompt(),r.userChoice.finally(()=>{r=null,c.value=!1}))}function g(){console.log(`Seu token de notificação é: ${t.notifications.fcmToken}`)}function m(){alert("Para ativar as notificações, vá nas configurações do seu navegador e permita notificações para este aplicativo.")}return C(()=>{window.addEventListener("beforeinstallprompt",o=>{o.preventDefault(),r=o,c.value=!0}),"Notification"in window?t.notifications.status=Notification.permission:console.warn("Notificações não suportadas neste ambiente.")}),(o,s)=>(e(),n("div",null,[a("div",null,[a("button",{class:"action-button",onClick:f},s[0]||(s[0]=[a("i",{class:"la la-share-alt"},null,-1),l(" Compartilhar aplicativo ")])),c.value?(e(),n("button",{key:0,class:"action-button",onClick:p},s[1]||(s[1]=[a("i",{class:"la la-download"},null,-1),l(" Instalar aplicativo ")]))):u("",!0),a("div",null,w(i(t).pendingConfigsCount>0?`Você tem ${i(t).pendingConfigsCount} configuração(ões) pendente(s).`:"Todas as configurações estão atualizadas."),1)]),s[10]||(s[10]=a("hr",{class:"section-separator"},null,-1)),a("div",null,[a("section",null,[s[8]||(s[8]=a("h2",null,[a("i",{class:"la la-bell text-blue-500"}),l(" Permissões")],-1)),i(t).notifications.status==="default"||i(t).notifications.status==="loading"?(e(),n("div",y,[s[3]||(s[3]=a("p",{class:"info-message"}," Deseja receber atualizações importantes e lembretes? ",-1)),a("button",{class:"action-button primary",disabled:i(t).notifications.status==="loading",onClick:d},[s[2]||(s[2]=a("i",{class:"la la-bell"},null,-1)),i(t).notifications.status==="loading"?(e(),n("span",x," Solicitando... ")):(e(),n("span",A," Ativar Notificações "))],8,N)])):i(t).notifications.status==="denied"?(e(),n("div",P,[s[5]||(s[5]=a("p",{class:"error-message"},[a("i",{class:"la la-exclamation-triangle"}),l(" As notificações estão bloqueadas no navegador. ")],-1)),a("button",{class:"action-button secondary",onClick:m},s[4]||(s[4]=[a("i",{class:"la la-unlock"},null,-1),l(" Desbloquear Notificações ")])),s[6]||(s[6]=a("p",{class:"instructions-text"}," Para reativar, você precisará desbloqueá-las manualmente nas configurações do seu navegador para este site. ",-1))])):i(t).notifications.status==="granted"?(e(),n("div",{key:2,onClick:g},s[7]||(s[7]=[a("p",{class:"success-message"},[a("i",{class:"la la-check-circle"}),l(" Notificações ativadas! ")],-1)]))):u("",!0)]),s[9]||(s[9]=a("hr",{class:"section-separator"},null,-1))])]))}},D=v(q,[["__scopeId","data-v-4fa820f5"]]);export{D as default};
