import{_ as g,r as v,s as b,g as C,c as n,a as t,x as c,e as i,t as k,l as o,o as e}from"./osfUo7GJ.js";import{u as y}from"./CTflSinv.js";const N={key:0},x=["disabled"],A={key:0},w={key:1},B={key:1},I={key:2},P={__name:"settings",setup(D){const a=y(),r=v(!1);let l=null;const{$enableFirebaseNotifications:p}=b();function f(){navigator.share?navigator.share({title:"Agenda CCB",text:"Acesse o aplicativo Agenda CCB",url:window.location.origin}):alert("Compartilhamento não suportado neste navegador.")}function m(){l&&(l.prompt(),l.userChoice.finally(()=>{l=null,r.value=!1}))}return C(()=>{window.addEventListener("beforeinstallprompt",u=>{u.preventDefault(),l=u,r.value=!0}),a.updateNotificationPermission(),a.monitorNotificationPermission()}),(u,s)=>(e(),n("div",null,[t("div",null,[t("button",{class:"action-button",onClick:f},s[2]||(s[2]=[t("i",{class:"la la-share-alt"},null,-1),i(" Compartilhar aplicativo ")])),r.value?(e(),n("button",{key:0,class:"action-button",onClick:m},s[3]||(s[3]=[t("i",{class:"la la-download"},null,-1),i(" Instalar aplicativo ")]))):c("",!0),t("div",null,k(o(a).pendingConfigsCount>0?`Você tem ${o(a).pendingConfigsCount} configuração(ões) pendente(s).`:"Todas as configurações estão atualizadas."),1)]),s[12]||(s[12]=t("hr",{class:"section-separator"},null,-1)),t("div",null,[t("section",null,[s[10]||(s[10]=t("h2",null,[t("i",{class:"la la-bell text-blue-500"}),i(" Permissões")],-1)),o(a).notifications.status==="default"||o(a).notifications.status==="loading"?(e(),n("div",N,[s[5]||(s[5]=t("p",{class:"info-message"}," Deseja receber atualizações importantes e lembretes? ",-1)),t("button",{class:"action-button primary",disabled:o(a).notifications.status==="loading",onClick:s[0]||(s[0]=d=>o(a).enableNotifications(o(p)))},[s[4]||(s[4]=t("i",{class:"la la-bell"},null,-1)),o(a).notifications.status==="loading"?(e(),n("span",A," Solicitando... ")):(e(),n("span",w," Ativar Notificações "))],8,x)])):o(a).notifications.status==="denied"?(e(),n("div",B,[s[7]||(s[7]=t("p",{class:"error-message"},[t("i",{class:"la la-exclamation-triangle"}),i(" As notificações estão bloqueadas no navegador. ")],-1)),t("button",{class:"action-button secondary",onClick:s[1]||(s[1]=(...d)=>o(a).showUnlockInstructions&&o(a).showUnlockInstructions(...d))},s[6]||(s[6]=[t("i",{class:"la la-unlock"},null,-1),i(" Desbloquear Notificações ")])),s[8]||(s[8]=t("p",{class:"instructions-text"}," Para reativar, você precisará desbloqueá-las manualmente nas configurações do seu navegador para este site. ",-1))])):o(a).notifications.status==="granted"?(e(),n("div",I,s[9]||(s[9]=[t("p",{class:"success-message"},[t("i",{class:"la la-check-circle"}),i(" Notificações ativadas! ")],-1)]))):c("",!0)]),s[11]||(s[11]=t("hr",{class:"section-separator"},null,-1))])]))}},q=g(P,[["__scopeId","data-v-87ae3f73"]]);export{q as default};
