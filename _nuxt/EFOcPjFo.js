import{_ as W,y as X,r as D,h as y,A as Z,c as r,a,t as p,F as m,k as _,e as P,i as ee,B as te,o as u,n as B,m as z,C as $}from"./C-HkbbVq.js";const ne={class:"calendar-wrapper"},ae={class:"calendar-panel"},le={class:"calendar-header"},se={class:"month-year"},oe={class:"calendar-table"},re=["onClick"],ue={class:"day-content"},ce={class:"day-number"},ie={key:0,class:"event-indicators"},de={class:"events-panel"},ve={class:"events-list-container"},he={class:"chips-container"},ge={key:0,class:"las la-toggle-on"},fe={key:1,class:"las la-toggle-off"},pe=["onClick"],me={key:0,class:"las la-toggle-on"},_e={key:1,class:"las la-toggle-off"},De={class:"search-container"},ye={key:0},be={class:"event-date-title"},Ce={class:"events-list"},ke={class:"sub-events-list"},Me=["onClick"],Te=["innerHTML"],we={key:1,class:"no-events-message"},Se={__name:"agenda",setup(xe){const{lista:T}=X(),w=new Date,i=D(w.getMonth()),g=D(w.getFullYear()),d=D(null),S=D(""),h=D([]),k=y(()=>Array.from(new Set(T.allEvents.map(e=>e.group))).filter(e=>e).sort((e,t)=>e.localeCompare(t))),E=y(()=>h.value.length===k.value.length);Z(k,e=>{h.value.length===0&&(h.value=[...e])},{immediate:!0});function I(e){const t=h.value.indexOf(e);t===-1?h.value.push(e):h.value.splice(t,1)}function O(){E.value?h.value=[]:h.value=[...k.value]}const x=y(()=>{const e=S.value.trim();let t=T.allEvents;if(h.value.length>0&&(t=t.filter(s=>h.value.includes(s.group))),!e)return t;const n=s=>`${M(s.title||"")} ${M(s.locale||"")} ${M(s.desc||"")} ${new Date(s.date).toLocaleDateString("pt-BR")}`,l=(s,f)=>f.every(C=>C.test(s)),c=(s,f)=>f.test(s),v=t.map(s=>({event:s,text:n(s)}));if(e.includes("|"))try{const s=new RegExp(e,"i");return v.filter(({text:f})=>c(f,s)).map(({event:f})=>f)}catch(s){return console.error("Regex inválida:",s),[]}const b=M(e).replace(/\bou/gi,",").split(/,|\s+/).filter(Boolean).map(s=>new RegExp(s,"i"));return v.filter(({text:s})=>l(s,b)).map(({event:s})=>s)}),N=y(()=>{let e;if(d.value){const t=d.value.date;e=x.value.filter(n=>{const l=new Date(n.date);return l.getUTCFullYear()===t.getFullYear()&&l.getUTCMonth()===t.getMonth()&&l.getUTCDate()===t.getDate()})}else e=x.value.filter(t=>{const n=new Date(t.date);return n.getUTCFullYear()===g.value&&n.getUTCMonth()===i.value});return e.reduce((t,n)=>{const l=new Date(n.date),c=`${l.getUTCFullYear()}-${(l.getUTCMonth()+1).toString().padStart(2,"0")}-${l.getUTCDate().toString().padStart(2,"0")}`;return t[c]||(t[c]={}),t[c][n.title]||(t[c][n.title]=[]),t[c][n.title].push(n),t},{})}),F=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],R=y(()=>`${F[i.value]} ${g.value}`),V=y(()=>{const e=[],t=new Date(g.value,i.value,1).getDay(),n=new Date(g.value,i.value+1,0).getDate(),l=new Date(g.value,i.value,0).getDate();for(let o=t-1;o>=0;o--)e.push({dayNumber:l-o,isPrevMonth:!0,isNextMonth:!1,isToday:!1,hasEvent:!1,events:[]});for(let o=1;o<=n;o++){const b=new Date(g.value,i.value,o),s=x.value.filter(f=>{const C=new Date(f.date);return C.getUTCDate()===o&&C.getUTCMonth()===i.value&&C.getUTCFullYear()===g.value});e.push({dayNumber:o,date:b,isPrevMonth:!1,isNextMonth:!1,isToday:b.toDateString()===w.toDateString(),hasEvent:s.length>0,events:s})}const c=42-e.length;for(let o=1;o<=c;o++)e.push({dayNumber:o,isPrevMonth:!1,isNextMonth:!0,isToday:!1,hasEvent:!1,events:[]});const v=[];for(;e.length>0;)v.push(e.splice(0,7));return v});function q(e){const t=new Date(e),n=t.getUTCDate(),l=F[t.getUTCMonth()],c=t.getUTCFullYear();return`${n} de ${l} de ${c}`}function G(e){i.value+=e,i.value<0?(i.value=11,g.value--):i.value>11&&(i.value=0,g.value++),d.value=null}function J(e){return{"prev-month-day":e.isPrevMonth||e.isNextMonth,today:e.isToday,"has-event":e.hasEvent,"selected-day":d.value&&d.value.date&&e.date&&d.value.date.toDateString()===e.date.toDateString()}}function Q(e){!e.isPrevMonth&&!e.isNextMonth&&(d.value&&d.value.date.toDateString()===e.date.toDateString()?d.value=null:d.value=e)}function H(e){return d.value?e.some(t=>{const n=new Date(t.date),l=d.value.date;return n.getUTCFullYear()===l.getFullYear()&&n.getUTCMonth()===l.getMonth()&&n.getUTCDate()===l.getDate()}):!1}function M(e){return e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):""}const j=e=>{const t=`https://www.google.com/calendar/event?eid=${e.htmlLink}`;window.open(t,"_blank")};function K(e){const t=new Set;for(const n of e)n.group&&t.add(n.group);return[...t]}const Y=["#c4d7b9","#b4d0e3","#d6b8c1","#d1c965","#cdb8d1","#c3bfe0","#e6b97f","#aed4d7","#b3a9a5","#a9c6aa","#d39a8f","#b0a2cc","#d28fa9","#b2d29f","#d1b05e","#84c9cc","#d1be83","#92c2be","#a3b1b5","#bdc75d"],U=D({});function A(e){if(!U.value[e]){const n=Array.from(new Set(T.allEvents.map(l=>l.group).filter(l=>l!==null))).indexOf(e);U.value[e]=Y[n%Y.length]}return U.value[e]}function L(e){return{backgroundColor:A(e)}}return(e,t)=>(u(),r("div",ne,[a("div",ae,[a("div",le,[a("i",{class:"las la-chevron-left",onClick:t[0]||(t[0]=n=>G(-1))}),a("h2",se,p(R.value),1),a("i",{class:"las la-chevron-right",onClick:t[1]||(t[1]=n=>G(1))})]),a("table",oe,[t[3]||(t[3]=a("thead",null,[a("tr",null,[a("th",null,"Dom"),a("th",null,"Seg"),a("th",null,"Ter"),a("th",null,"Qua"),a("th",null,"Qui"),a("th",null,"Sex"),a("th",null,"Sáb")])],-1)),a("tbody",null,[(u(!0),r(m,null,_(V.value,(n,l)=>(u(),r("tr",{key:l},[(u(!0),r(m,null,_(n,c=>(u(),r("td",{key:c.date,class:B(J(c)),onClick:v=>Q(c)},[a("div",ue,[a("div",ce,p(c.dayNumber),1),c.events.length?(u(),r("div",ie,[(u(!0),r(m,null,_(K(c.events),v=>(u(),r("span",{key:v,class:"event-indicator",style:$({backgroundColor:A(v)})},null,4))),128))])):z("",!0)])],10,re))),128))]))),128))])])]),a("div",de,[a("div",ve,[a("div",he,[a("span",{class:"chip",onClick:O},[E.value?(u(),r("i",ge)):(u(),r("i",fe)),t[4]||(t[4]=P(" Todos "))]),(u(!0),r(m,null,_(k.value,n=>(u(),r("span",{key:n,class:"chip",style:$(L(n)),onClick:l=>I(n)},[h.value.includes(n)?(u(),r("i",me)):(u(),r("i",_e)),P(" "+p(n),1)],12,pe))),128))]),a("div",De,[ee(a("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=n=>S.value=n),placeholder:"Buscar eventos...",class:"search-input"},null,512),[[te,S.value]]),t[5]||(t[5]=a("i",{class:"las la-search search-icon"},null,-1))]),Object.keys(N.value).length?(u(),r("div",ye,[(u(!0),r(m,null,_(N.value,(n,l)=>(u(),r("div",{key:l},[a("h4",be,p(q(l)),1),a("ul",Ce,[(u(!0),r(m,null,_(n,(c,v)=>(u(),r("li",{key:v,class:B({"selected-event":H(c)}),style:$(L(c[0].group))},[a("strong",null,p(v),1),a("ul",ke,[(u(!0),r(m,null,_(c,o=>(u(),r("li",{key:o.id,onClick:b=>j(o)},[a("p",null,[a("b",null,[a("i",null,p(o.formatTime)+p(o.formatTime?" - ":"")+p(o.formatDate),1)])]),a("p",null,p(o.locale),1),o.desc?(u(),r("p",{key:0,innerHTML:o.desc},null,8,Te)):z("",!0)],8,Me))),128))])],6))),128))])]))),128))])):(u(),r("p",we,"Nenhum evento agendado."))])])]))}},$e=W(Se,[["__scopeId","data-v-1b6b8711"]]);export{$e as default};
