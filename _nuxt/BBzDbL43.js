import{_ as z,u as E,f as F,r as L,g as P,h as V,i as $,j as U,c as n,a as e,k as f,l as K,v as h,m as i,F as A,b as r,n as j,w as c,p as O,d as W,q as Z,o as a,s as G,e as N,t as R,x as m}from"#entry";import{L as H}from"./DbEtIfB4.js";import{d as J}from"./D0Dr7phT.js";const M={class:"main"},Q={class:"search contener"},X=["value"],Y=["src"],ee={key:1,class:"las la-user"},se={key:1,class:"las la-user-slash"},te={class:"suggestions"},ne={key:0,class:"loading-suggestions"},ae={key:1,class:"contener"},le=["onClick"],oe={class:"title"},ie={key:0,class:"las la-external-link-alt external-link-icon","aria-label":"Link externo",title:"Este link abrirá em uma nova aba."},re={class:"buttons"},ue={class:"contener"},ce={class:"contener footer"},de={style:{position:"relative",display:"inline-block"}},pe={key:0,class:"badge"},ve={__name:"index",async setup(_e){let d,k;const _=Z(),S=P(),{settings:p}=E(),{$indexedDB:y}=F(),v=L([]),l=L(""),x=S.query.search;typeof x=="string"&&(l.value=x);const{data:T,pending:q}=([d,k]=V(async()=>O("index-tags",async()=>{try{return await y?.getTags({search:l.value})||[]}catch(t){return console.error("Erro ao carregar tags do IndexedDB:",t),[]}})),d=await d,k(),d),B=J(async()=>{v.value=await y?.getTags({search:l.value})||[]},300),b=t=>typeof t=="string"&&t.startsWith("http");$(l,async()=>{await B()},{immediate:!0,deep:!0});const D=t=>{l.value=t.target.value},C=t=>{!t||!t.href||(b(t.href)?window.open(t.href,"_blank","noopener noreferrer"):_.push(t.href))},g=()=>{const t=l.value.trim();if(!t)return alert("Por favor, digite sua busca!");C(v.value[0]||{href:`/lista?search=${encodeURIComponent(t)}`})},w=U(()=>p?.pendingConfigsCount??0);return(t,s)=>{const u=W;return a(),n("div",M,[e("header",null,[e("div",Q,[e("i",{class:"la la-search clickable",onClick:g}),e("input",{type:"text",placeholder:"Pesquisar...",value:l.value,onInput:D,onKeyup:K(g,["enter"])},null,40,X),f(e("i",{class:"la la-times clickable",onClick:s[0]||(s[0]=o=>l.value="")},null,512),[[h,l.value]]),e("div",{class:"user-info",onClick:s[1]||(s[1]=o=>i(_).push("/perfil")),style:{cursor:"pointer"}},[i(p).user?(a(),n(A,{key:0},[i(p).user.photoURL?(a(),n("img",{key:0,src:i(p).user.photoURL,alt:"Avatar do usuário"},null,8,Y)):(a(),n("i",ee))],64)):(a(),n("i",se))])])]),e("div",te,[i(q)?(a(),n("div",ne,[r(H)])):(a(),n("ul",ae,[(a(!0),n(A,null,j(v.value,(o,I)=>(a(),n("li",{key:o.href+o.title.replace(/[^a-zA-Z0-9 ]/g,"")+I,onClick:()=>C(o)},[e("i",{class:G([o.icon||"la la-folder","icon"])},null,2),e("div",null,[e("strong",oe,[N(m(o.title)+" ",1),b(o.href)?(a(),n("i",ie)):R("",!0)]),e("small",null,m(o.description),1)])],8,le))),128)),f(e("li",{onClick:g},[...s[3]||(s[3]=[e("i",{class:"la la-calendar"},null,-1),e("div",null,[e("strong",null,"Pesquisar na agenda"),e("small",null,"Nenhum resultado encontrado.")],-1)])],512),[[h,!v.value.length]]),f(e("li",{onClick:s[2]||(s[2]=()=>i(_).push("/navegar"))},[...s[4]||(s[4]=[e("i",{class:"la la-chevron-down"},null,-1),e("div",null,[e("strong",null,"Navegar"),e("small",null,"Outros resultados...")],-1)])],512),[[h,!l.value&&i(T)?.length]])]))]),e("div",re,[e("div",ue,[r(u,{to:"/navegar"},{default:c(()=>[...s[5]||(s[5]=[e("button",null,"Navegar",-1)])]),_:1}),r(u,{to:"/recentes"},{default:c(()=>[...s[6]||(s[6]=[e("button",null,"Atualizações",-1)])]),_:1}),r(u,{to:"/agenda?regionais=true"},{default:c(()=>[...s[7]||(s[7]=[e("button",null,"Próximos",-1)])]),_:1})])]),e("footer",null,[e("div",ce,[s[10]||(s[10]=e("span",null,"Regional Faina",-1)),r(u,{to:"/sobre"},{default:c(()=>[...s[8]||(s[8]=[N("Sobre",-1)])]),_:1}),r(u,{to:"/settings"},{default:c(()=>[e("div",de,[s[9]||(s[9]=e("i",{class:"la la-cog"},null,-1)),w.value>0?(a(),n("span",pe,m(w.value),1)):R("",!0)])]),_:1})])])])}}},me=z(ve,[["__scopeId","data-v-3abcf9f2"]]);export{me as default};
