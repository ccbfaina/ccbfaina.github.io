import{_ as v,r as b,s as k,g as C,c as n,a as t,x as c,e as i,t as y,l as a,o as e}from"./Dv679Stp.js";import{u as N}from"./B_s_H8fa.js";const x={key:0},w=["disabled"],A={key:0},B={key:1},I={key:1},P={__name:"settings",setup(S){const o=N(),r=b(!1);let l=null;const{$enableFirebaseNotifications:p}=k();function f(){consosle.log(`Seu token de notificação é: ${o.notifications.fcmToken}`)}function m(){navigator.share?navigator.share({title:"Agenda CCB",text:"Acesse o aplicativo Agenda CCB",url:window.location.origin}):alert("Compartilhamento não suportado neste navegador.")}function g(){l&&(l.prompt(),l.userChoice.finally(()=>{l=null,r.value=!1}))}return C(()=>{window.addEventListener("beforeinstallprompt",u=>{u.preventDefault(),l=u,r.value=!0}),o.updateNotificationPermission(),o.monitorNotificationPermission()}),(u,s)=>(e(),n("div",null,[t("div",null,[t("button",{class:"action-button",onClick:m},s[2]||(s[2]=[t("i",{class:"la la-share-alt"},null,-1),i(" Compartilhar aplicativo ")])),r.value?(e(),n("button",{key:0,class:"action-button",onClick:g},s[3]||(s[3]=[t("i",{class:"la la-download"},null,-1),i(" Instalar aplicativo ")]))):c("",!0),t("div",null,y(a(o).pendingConfigsCount>0?`Você tem ${a(o).pendingConfigsCount} configuração(ões) pendente(s).`:"Todas as configurações estão atualizadas."),1)]),s[12]||(s[12]=t("hr",{class:"section-separator"},null,-1)),t("div",null,[t("section",null,[s[10]||(s[10]=t("h2",null,[t("i",{class:"la la-bell text-blue-500"}),i(" Permissões")],-1)),a(o).notifications.status==="default"||a(o).notifications.status==="loading"?(e(),n("div",x,[s[5]||(s[5]=t("p",{class:"info-message"}," Deseja receber atualizações importantes e lembretes? ",-1)),t("button",{class:"action-button primary",disabled:a(o).notifications.status==="loading",onClick:s[0]||(s[0]=d=>a(o).enableNotifications(()=>a(p)()))},[s[4]||(s[4]=t("i",{class:"la la-bell"},null,-1)),a(o).notifications.status==="loading"?(e(),n("span",A," Solicitando... ")):(e(),n("span",B," Ativar Notificações "))],8,w)])):a(o).notifications.status==="denied"?(e(),n("div",I,[s[7]||(s[7]=t("p",{class:"error-message"},[t("i",{class:"la la-exclamation-triangle"}),i(" As notificações estão bloqueadas no navegador. ")],-1)),t("button",{class:"action-button secondary",onClick:s[1]||(s[1]=(...d)=>a(o).showUnlockInstructions&&a(o).showUnlockInstructions(...d))},s[6]||(s[6]=[t("i",{class:"la la-unlock"},null,-1),i(" Desbloquear Notificações ")])),s[8]||(s[8]=t("p",{class:"instructions-text"}," Para reativar, você precisará desbloqueá-las manualmente nas configurações do seu navegador para este site. ",-1))])):a(o).notifications.status==="granted"?(e(),n("div",{key:2,onClick:f},s[9]||(s[9]=[t("p",{class:"success-message"},[t("i",{class:"la la-check-circle"}),i(" Notificações ativadas! ")],-1)]))):c("",!0)]),s[11]||(s[11]=t("hr",{class:"section-separator"},null,-1))])]))}},V=v(P,[["__scopeId","data-v-c6d52d45"]]);export{V as default};
