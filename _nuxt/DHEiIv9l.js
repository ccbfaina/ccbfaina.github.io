import{L as _t}from"./J6iyAyYO.js";import{_ as St,y as Dt,r as z,I as ot,h as k,f as at,B as V,P as ht,c as i,C as it,p as $,F as _,a as e,m as d,n as S,t as u,i as v,v as I,A as E,k as L,G as rt,e as T,K as Ct,g as xt,Q as U,l as zt,R as $t,o as a,H as Et,M as ut,O as Lt}from"./M9ouRNVy.js";import{a as Tt,S as At,E as qt}from"./DjsJiwXj.js";import{d as wt}from"./BcZQbp_F.js";const Vt={class:"tabs-container print-hide"},It={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},jt=["aria-selected"],Ot={class:"badge"},Ut=["aria-selected"],Mt=["aria-selected"],Bt={class:"tab-content"},Ft={id:"tab-content-lista",role:"tabpanel"},Gt={class:"text-center"},Rt={key:0},Pt={key:1},Nt={key:2},Ht={key:3},Kt={key:4},Wt={id:"tab-content-filters",role:"tabpanel"},Qt={class:"content"},Jt={class:"form-inline"},Xt={class:"form-group"},Yt={class:"row"},Zt={class:"form-group"},te={class:"row"},ee=["value"],le={class:"form-group"},ne={class:"row"},se=["value"],oe={class:"form-group"},ae={class:"flex gap-xs"},ie={class:"form-group"},re={class:"flex gap-xs"},ue={class:"form-group",style:{"align-items":"flex-start"}},de=["id","value"],pe=["for"],ce={class:"form-group",style:{"text-align":"right"}},ve=["disabled"],fe={class:"form-inline",style:{gap:"1rem","margin-top":"1rem"}},me={id:"tab-content-print",role:"tabpanel"},be={class:"text-center flex col items-center gap-4"},ge={class:"p form-group flex items-center aling-center"},ye={class:"a4 print-hide"},ke={class:"settings-list print-hide"},_e=["onDragstart","onDragover","onDrop","onClick"],Se={key:0,class:"print-page"},De=["onDragstart","onDragover","onDrop"],he={class:"table-container"},Ce={colspan:"5"},xe={class:"flex items-center aling-center justify-center"},ze=["onClick"],$e=["onDblclick"],Ee={key:0},Le={key:0},Te={key:0},Ae=["innerHTML"],qe={__name:"index",setup(we){const{lista:D}=Dt(),p=z("lista"),l=ot({fontSize:17,search:"",title:"",locale:"",date:"",start:"",end:"",calendars:[]}),j=xt(),M=zt(),B=z(!1),dt=()=>{const n=j.query||{};["search","title","locale","date","start","end"].forEach(m=>{n[m]!==void 0&&(l[m]=n[m])}),n.calendars&&(l.calendars=Array.isArray(n.calendars)?n.calendars:n.calendars.split(",").filter(Boolean));const{today:o,future:c}=U();l.start||(l.start=o),l.end||(l.end=c)},F=wt(()=>{const n=Object.fromEntries(Object.entries(l).filter(([t,o])=>t==="calendars"?o.length:o!==""&&o!=null).map(([t,o])=>Array.isArray(o)?[t,o.join(",")]:[t,o]));M.replace({query:n})},200),h=k(()=>{const n=$t(D.allEvents||[],l);return Array.from(new Set(n.map(o=>o.id))).map(o=>n.find(c=>c.id===o))});function pt(){F()}at(()=>{dt()}),V(l,F,{deep:!0});function A(n){if(n==="calendars")l.calendars=[];else if(n==="date"){l.date="";const{today:t,future:o}=U();l.start=t,l.end=o}else if(n==="start"||n==="end"){const{today:t,future:o}=U();l.start=t,l.end=o}else l[n]=""}function O(n,t){return Array.from(new Set(n.map(o=>o[t]).filter(o=>typeof o=="string"&&o.trim())))}const ct=k(()=>O(h.value,"title")),vt=k(()=>O(h.value,"locale")),ft=k(()=>O(D.allEvents,"list")),C=z([]);V(h,n=>{var m;const t=Array.from(new Set(n.map(b=>b.title||"Sem título"))),c=(((m=j.query.order)==null?void 0:m.split(",").filter(Boolean))||[]).filter(b=>t.includes(b));t.forEach(b=>{c.includes(b)||c.push(b)}),C.value=c},{immediate:!0}),V(C,n=>{const t={...j.query};n&&n.length>0?t.order=n.join(","):delete t.order,M.replace({query:t})});const g=k(()=>{const n={};return h.value.forEach(t=>{const o=t.title||"Sem título";(n[o]||(n[o]=[])).push(t)}),C.value.filter(t=>n[t]).map(t=>({title:t,items:n[t].slice().sort((o,c)=>o.onDate&&c.onDate?o.onDate-c.onDate:0)}))});function mt(){l.fontSize<10&&(l.fontSize=10),l.fontSize>25&&(l.fontSize=25),l.fontSize=Math.round(l.fontSize*10)/10}const G=n=>{var t;return(t=n==null?void 0:n.replace(/-$/,""))==null?void 0:t.trim()},bt=k(()=>{let n=0;return l.search&&n++,l.title&&n++,l.locale&&n++,l.date&&n++,l.calendars&&l.calendars.length>0&&n++,n}),gt=()=>{p.value="lista",setTimeout(()=>{window.print()},1e3)},x=z(null),q=z(null),R=n=>{x.value=n},P=n=>{q.value=n},N=n=>{if(x.value===null||x.value===n){x.value=null,q.value=null;return}const t=[...C.value],[o]=t.splice(x.value,1);t.splice(n,0,o),C.value=t,x.value=null,q.value=null},y=ot({});V(g,()=>{g.value&&g.value.forEach(n=>{n.title in y||(y[n.title]=!0)})},{immediate:!0});const H=n=>{p.value="print",y[n]=!y[n]},K=k(()=>g.value.length>0&&g.value.every(n=>y[n.title])),yt=n=>{g.value.forEach(t=>{y[t.title]=n})},kt=n=>{const t=`https://www.google.com/calendar/event?eid=${n.htmlLink}`;window.open(t,"_blank")},w=z(null);return at(()=>{w.value=new Tt({extensions:[At],content:`
      <p>Oração Santa Ceia</p>
      <p><strong>Pão:</strong> "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo."</p>
      <p><strong>Cálice:</strong> "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo."</p>
    `,editable:!0})}),ht(()=>{w.value&&w.value.destroy()}),(n,t)=>{var c,m,b,W,Q,J,X,Y,Z,tt,et,lt,nt,st;const o=_t;return a(),i("div",{style:Ct({fontSize:(l.fontSize?l.fontSize:17)+"px"})},[$(D).loading?(a(),it(o,{key:0})):(a(),i(_,{key:1},[e("div",Vt,[e("nav",It,[e("span",{id:"tab-filters","aria-selected":p.value==="filters",role:"tab",type:"button",class:S(["tab",{active:p.value==="filters"}]),style:{position:"relative"},onClick:t[0]||(t[0]=s=>p.value="filters")},[e("span",Ot,u(bt.value),1),t[19]||(t[19]=e("i",{class:"la la-filter z-10"},null,-1))],10,jt),e("span",{id:"tab-print","aria-selected":p.value==="print",role:"tab",type:"button",class:S(["tab",{active:p.value==="print"}]),onClick:t[1]||(t[1]=s=>p.value="print")},t[20]||(t[20]=[e("i",{class:"la la-print"},null,-1)]),10,Ut),e("span",{id:"tab-lista","aria-selected":p.value==="lista",role:"tab",type:"button",class:S(["tab",{active:p.value==="lista"}]),onClick:t[2]||(t[2]=s=>p.value="lista")}," Lista ",10,Mt)])]),e("div",null,[e("div",Bt,[v(e("div",Ft,[e("div",Gt,[t[21]||(t[21]=e("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),l.calendars.length?(a(),i("div",Rt,[e("b",null,u(l.calendars.map(G).join(", ")),1)])):d("",!0),l.locale?(a(),i("span",Pt,[e("b",null,u(G(l.locale)),1)])):d("",!0),l.date?(a(),i("span",Nt," Data: "+u((W=(b=(m=(c=l.date)==null?void 0:c.split("T")[0])==null?void 0:m.split("-"))==null?void 0:b.reverse())==null?void 0:W.join("/")),1)):d("",!0),!l.date&&(l.start||l.end)?(a(),i("div",Ht," Período: "+u((Y=(X=(J=(Q=l.start)==null?void 0:Q.split("T")[0])==null?void 0:J.split("-"))==null?void 0:X.reverse())==null?void 0:Y.join("/"))+" à "+u((lt=(et=(tt=(Z=l.end)==null?void 0:Z.split("T")[0])==null?void 0:tt.split("-"))==null?void 0:et.reverse())==null?void 0:lt.join("/")),1)):d("",!0),l.search?(a(),i("div",Kt,u(l.search),1)):d("",!0)])],512),[[I,p.value==="lista"]]),v(e("div",Wt,[e("div",Qt,[e("div",Jt,[e("div",null,[e("div",Xt,[t[22]||(t[22]=e("label",{for:"search"},"Pesquisar",-1)),e("div",Yt,[v(e("input",{id:"search","onUpdate:modelValue":t[3]||(t[3]=s=>l.search=s),type:"text",placeholder:"Buscar itens..."},null,512),[[E,l.search]]),l.search?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar pesquisa",type:"button",onClick:t[4]||(t[4]=s=>A("search"))}," × ")):d("",!0)])]),e("div",Zt,[t[24]||(t[24]=e("label",{for:"title"},"Título",-1)),e("div",te,[v(e("select",{id:"title","onUpdate:modelValue":t[5]||(t[5]=s=>l.title=s)},[t[23]||(t[23]=e("option",{value:""},"Todos os títulos",-1)),(a(!0),i(_,null,L(ct.value,s=>(a(),i("option",{key:s,value:s},u(s),9,ee))),128))],512),[[rt,l.title]]),l.title?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar título",type:"button",onClick:t[6]||(t[6]=s=>A("title"))}," × ")):d("",!0)])]),e("div",le,[t[26]||(t[26]=e("label",{for:"locale"},"Local",-1)),e("div",ne,[v(e("select",{id:"locale","onUpdate:modelValue":t[7]||(t[7]=s=>l.locale=s)},[t[25]||(t[25]=e("option",{value:""},"Todos os locais",-1)),(a(!0),i(_,null,L(vt.value,s=>(a(),i("option",{key:s,value:s},u(s),9,se))),128))],512),[[rt,l.locale]]),l.locale?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar local",type:"button",onClick:t[8]||(t[8]=s=>A("locale"))}," × ")):d("",!0)])]),e("div",oe,[t[27]||(t[27]=e("label",{for:"date"},"Data",-1)),e("div",ae,[v(e("input",{id:"date","onUpdate:modelValue":t[9]||(t[9]=s=>l.date=s),type:"date"},null,512),[[E,l.date]]),l.date?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar data",type:"button",onClick:t[10]||(t[10]=s=>A("date"))}," × ")):d("",!0)])]),e("div",ie,[t[28]||(t[28]=e("label",null,"Intervalo de Datas",-1)),e("div",re,[v(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.start=s),type:"date"},null,512),[[E,l.start]]),v(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>l.end=s),type:"date"},null,512),[[E,l.end]]),l.start||l.end?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar datas",type:"button",onClick:t[13]||(t[13]=s=>A("date"))}," × ")):d("",!0)])])]),e("div",null,[e("div",ue,[t[29]||(t[29]=e("label",null,"Agendas",-1)),e("div",null,[(a(!0),i(_,null,L(ft.value,s=>(a(),i("div",{key:s},[v(e("input",{id:"cat-"+s,"onUpdate:modelValue":t[14]||(t[14]=f=>l.calendars=f),type:"checkbox",value:s,style:{margin:"5px 5px 0 0"}},null,8,de),[[Et,l.calendars]]),e("label",{for:"cat-"+s,style:{"margin-bottom":"0"}},u(s),9,pe)]))),128))])]),e("div",ce,[t[30]||(t[30]=e("label",null,null,-1)),e("button",{class:"success",disabled:B.value||$(D).loading,onClick:t[15]||(t[15]=s=>pt())},u(B.value||$(D).loading?"Atualizando...":"Aplicar"),9,ve)])])]),e("div",fe,[e("span",null,[t[31]||(t[31]=e("i",{class:"la la-calendar-check"},null,-1)),T(" "+u(((st=(nt=$(D))==null?void 0:nt.calendars)==null?void 0:st.length)||0),1)]),e("span",null,[t[32]||(t[32]=e("i",{class:"la la-tasks"},null,-1)),T(" "+u(Array.isArray(h.value)?h.value.length:0),1)])])])],512),[[I,p.value==="filters"]]),v(e("div",me,[e("div",be,[t[36]||(t[36]=e("b",{class:"mb-4 p"},"Ajustes de impressão:",-1)),e("div",ge,[t[33]||(t[33]=e("label",null,"Fonte",-1)),v(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>l.fontSize=s),type:"range",min:"10",max:"25",step:"0.1",placeholder:"Font Size"},null,512),[[E,l.fontSize,void 0,{number:!0}]]),v(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>l.fontSize=s),type:"number",min:"10",max:"25",step:"0.1",style:{width:"70px","margin-left":"8px"},onInput:mt},null,544),[[E,l.fontSize,void 0,{number:!0}]]),t[34]||(t[34]=T(" px "))]),e("div",{class:"p"},[e("button",{class:"success",onClick:gt},t[35]||(t[35]=[e("i",{class:"la la-print"},null,-1),T(" Imprimir ")]))])]),e("div",ye,[e("div",ke,[t[37]||(t[37]=e("b",null,"Lista",-1)),e("div",null,[e("i",{class:S(["la",K.value?"la-toggle-on":"la-toggle-off"]),title:"Ocultar todos",onClick:t[18]||(t[18]=s=>yt(!K.value))},null,2)])]),(a(!0),i(_,null,L(C.value,(s,f)=>(a(),i("div",{key:s,class:S(["settings-list print-hide",{"drag-over":q.value===f}]),draggable:"true",onDragstart:r=>R(f),onDragover:ut(r=>P(f),["prevent"]),onDrop:r=>N(f),onClick:r=>H(s)},[T(u(s)+" ",1),e("i",{class:S(["la",y[s]?"la-toggle-on":"la-toggle-off"]),title:"Alterar visibilidade"},null,2)],42,_e))),128))])],512),[[I,p.value==="print"]])])]),g.value.length?(a(),i("div",Se,[(a(!0),i(_,null,L(g.value,(s,f)=>v((a(),i("div",{key:s.title,class:S(["table-list",{"drag-over":q.value===f}]),draggable:"true",style:{cursor:"move"},onDragstart:r=>R(f),onDragover:ut(r=>P(f),["prevent"]),onDrop:r=>N(f)},[e("div",he,[e("table",null,[e("thead",null,[e("tr",null,[e("th",Ce,[e("div",xe,[T(u(s.title)+" ",1),e("i",{class:"la la-toggle-on print-hide",style:{cursor:"pointer"},onClick:r=>H(s.title)},null,8,ze)])])])]),e("tbody",null,[(a(!0),i(_,null,L(s.items,r=>(a(),i("tr",{key:r.id,onDblclick:Ie=>kt(r)},[e("td",null,[r.formatDate?(a(),i("span",Ee,u(r.formatDate),1)):d("",!0)]),e("td",null,[r.formatWeek?(a(),i("span",Le,u(r.formatWeek),1)):d("",!0)]),e("td",null,[r.formatTime?(a(),i("span",Te,u(r.formatTime),1)):d("",!0)]),e("td",null,u(r.locale),1),e("td",null,[r.desc?(a(),i("span",{key:0,innerHTML:$(Lt)(r.desc)},null,8,Ae)):d("",!0)])],40,$e))),128))])])])],42,De)),[[I,y[s.title]]])),128)),w.value?(a(),it($(qt),{key:0,editor:w.value,class:"editable"},null,8,["editor"])):d("",!0)])):d("",!0)],64))],4)}}},Be=St(qe,[["__scopeId","data-v-adb837c0"]]);export{Be as default};
