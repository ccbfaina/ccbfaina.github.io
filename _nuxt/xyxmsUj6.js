import{_ as A,y as I,r as p,h as T,c as u,a as n,t as D,F as _,k as y,i as J,A as O,o as i,n as U,m as $}from"./M9ouRNVy.js";const Q={class:"calendar-wrapper"},V={class:"calendar-panel"},H={class:"calendar-header"},j={class:"month-year"},G={class:"calendar-table"},K=["onClick"],q={class:"day-number"},W={key:0,class:"event-indicator"},X={class:"events-panel"},Z={class:"events-list-container"},ee={class:"search-container"},te={key:0},ne={class:"event-date-title"},ae={class:"events-list"},se={class:"sub-events-list"},le=["onClick"],oe=["innerHTML"],re={key:1,class:"no-events-message"},ue={__name:"agenda",setup(ie){const{lista:N}=I(),E=p(N.allEvents),C=p(""),w=new Date,c=p(w.getMonth()),v=p(w.getFullYear()),d=p(null),b=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],F=T(()=>`${b[c.value]} ${v.value}`);function M(e){return e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):""}const k=T(()=>{const e=C.value.trim(),t=E.value;if(!e)return t;const a=s=>`${M(s.title||"")} ${M(s.locale||"")} ${M(s.desc||"")} ${new Date(s.date).toLocaleDateString("pt-BR")}`,o=(s,g)=>g.every(m=>m.test(s)),r=(s,g)=>g.test(s),h=t.map(s=>({event:s,text:a(s)}));if(e.includes("|"))try{const s=new RegExp(e,"i");return h.filter(({text:g})=>r(g,s)).map(({event:g})=>g)}catch(s){return console.error("Regex inválida:",s),[]}const f=M(e).replace(/\bou\b/gi,",").split(/,|\s+/).filter(Boolean).map(s=>new RegExp(s,"i"));return h.filter(({text:s})=>o(s,f)).map(({event:s})=>s)}),x=T(()=>{let e;if(d.value){const t=d.value.date;e=k.value.filter(a=>{const o=new Date(a.date);return o.getUTCFullYear()===t.getFullYear()&&o.getUTCMonth()===t.getMonth()&&o.getUTCDate()===t.getDate()})}else e=k.value.filter(t=>{const a=new Date(t.date);return a.getUTCFullYear()===v.value&&a.getUTCMonth()===c.value});return e.reduce((t,a)=>{const o=new Date(a.date),r=`${o.getUTCFullYear()}-${(o.getUTCMonth()+1).toString().padStart(2,"0")}-${o.getUTCDate().toString().padStart(2,"0")}`;return t[r]||(t[r]={}),t[r][a.title]||(t[r][a.title]=[]),t[r][a.title].push(a),t},{})}),Y=T(()=>{const e=[],t=new Date(v.value,c.value,1).getDay(),a=new Date(v.value,c.value+1,0).getDate(),o=new Date(v.value,c.value,0).getDate();for(let l=t-1;l>=0;l--)e.push({dayNumber:o-l,isPrevMonth:!0,isNextMonth:!1,isToday:!1,hasEvent:!1,events:[]});for(let l=1;l<=a;l++){const f=new Date(v.value,c.value,l),s=k.value.filter(g=>{const m=new Date(g.date);return m.getUTCDate()===l&&m.getUTCMonth()===c.value&&m.getUTCFullYear()===v.value});e.push({dayNumber:l,date:f,isPrevMonth:!1,isNextMonth:!1,isToday:f.toDateString()===w.toDateString(),hasEvent:s.length>0,events:s})}const r=42-e.length;for(let l=1;l<=r;l++)e.push({dayNumber:l,isPrevMonth:!1,isNextMonth:!0,isToday:!1,hasEvent:!1,events:[]});const h=[];for(;e.length>0;)h.push(e.splice(0,7));return h});function L(e){const t=new Date(e),a=t.getUTCDate(),o=b[t.getUTCMonth()],r=t.getUTCFullYear();return`${a} de ${o} de ${r}`}function S(e){c.value+=e,c.value<0?(c.value=11,v.value--):c.value>11&&(c.value=0,v.value++),d.value=null}function B(e){return{"prev-month-day":e.isPrevMonth||e.isNextMonth,today:e.isToday,"has-event":e.hasEvent,"selected-day":d.value&&d.value.date&&e.date&&d.value.date.toDateString()===e.date.toDateString()}}function P(e){!e.isPrevMonth&&!e.isNextMonth&&(d.value&&d.value.date.toDateString()===e.date.toDateString()?d.value=null:d.value=e)}function R(e){return d.value?e.some(t=>{const a=new Date(t.date),o=d.value.date;return a.getUTCFullYear()===o.getFullYear()&&a.getUTCMonth()===o.getMonth()&&a.getUTCDate()===o.getDate()}):!1}const z=e=>{const t=`https://www.google.com/calendar/event?eid=${e.htmlLink}`;window.open(t,"_blank")};return(e,t)=>(i(),u("div",Q,[n("div",V,[n("div",H,[n("i",{class:"las la-chevron-left",onClick:t[0]||(t[0]=a=>S(-1))}),n("h2",j,D(F.value),1),n("i",{class:"las la-chevron-right",onClick:t[1]||(t[1]=a=>S(1))})]),n("table",G,[t[3]||(t[3]=n("thead",null,[n("tr",null,[n("th",null,"Dom"),n("th",null,"Seg"),n("th",null,"Ter"),n("th",null,"Qua"),n("th",null,"Qui"),n("th",null,"Sex"),n("th",null,"Sáb")])],-1)),n("tbody",null,[(i(!0),u(_,null,y(Y.value,(a,o)=>(i(),u("tr",{key:o},[(i(!0),u(_,null,y(a,r=>(i(),u("td",{key:r.date,class:U(B(r)),onClick:h=>P(r)},[n("div",q,D(r.dayNumber),1),r.events.length?(i(),u("div",W)):$("",!0)],10,K))),128))]))),128))])])]),n("div",X,[n("div",Z,[n("div",ee,[J(n("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>C.value=a),placeholder:"Buscar eventos...",class:"search-input"},null,512),[[O,C.value]]),t[4]||(t[4]=n("i",{class:"las la-search search-icon"},null,-1))]),Object.keys(x.value).length?(i(),u("div",te,[(i(!0),u(_,null,y(x.value,(a,o)=>(i(),u("div",{key:o},[n("h4",ne,D(L(o)),1),n("ul",ae,[(i(!0),u(_,null,y(a,(r,h)=>(i(),u("li",{key:h,class:U({"selected-event":R(r)})},[n("strong",null,D(h),1),n("ul",se,[(i(!0),u(_,null,y(r,l=>(i(),u("li",{key:l.id,onClick:f=>z(l)},[n("p",null,[n("b",null,[n("i",null,D(l.formatTime)+D(l.formatTime?" - ":"")+D(l.formatDate),1)])]),n("p",null,D(l.locale),1),l.desc?(i(),u("p",{key:0,innerHTML:l.desc},null,8,oe)):$("",!0)],8,le))),128))])],2))),128))])]))),128))])):(i(),u("p",re,"Nenhum evento agendado para este mês."))])])]))}},de=A(ue,[["__scopeId","data-v-2db2161e"]]);export{de as default};
