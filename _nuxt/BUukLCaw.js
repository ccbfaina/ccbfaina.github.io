import{_ as I,y as J,r as f,h as p,c as r,a,t as h,F as D,k as m,i as O,A as Q,o as u,n as S,m as x}from"./BwyjsAo3.js";const R={class:"calendar-wrapper"},V={class:"calendar-panel"},H={class:"calendar-header"},j={class:"month-year"},G={class:"calendar-table"},K=["onClick"],q={class:"day-number"},W={key:0,class:"event-indicator"},X={class:"events-panel"},Z={class:"events-list-container"},ee={class:"search-container"},te={key:0},ne={class:"event-date-title"},ae={class:"events-list"},le={class:"sub-events-list"},se=["onClick"],oe=["innerHTML"],re={key:1,class:"no-events-message"},ue={__name:"agenda",setup(ie){const{lista:E}=J(),_=f(E.allEvents),y=f(""),M=new Date,i=f(M.getMonth()),d=f(M.getFullYear()),c=f(null),w=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],N=p(()=>`${w[i.value]} ${d.value}`);function g(t){return t?t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):""}const T=p(()=>{const t=y.value.trim();if(!t)return _.value;if(t.includes("|"))try{const e=new RegExp(t,"i");return _.value.filter(n=>{const l=`${g(n.title||"")} ${g(n.locale||"")} ${g(n.desc||"")}`;return e.test(l)})}catch(e){return console.error("Regex inválida:",e),[]}else{const n=g(t).replace(/\bou\b/gi,",").split(/,|\s+/).map(l=>l.trim()).filter(Boolean).map(l=>new RegExp(`${l}`,"i"));return _.value.filter(l=>{const o=`${g(l.title||"")} ${g(l.locale||"")} ${g(l.desc||"")}`;return n.every(v=>v.test(o))})}}),b=p(()=>{let t;if(c.value){const e=c.value.date;t=T.value.filter(n=>{const l=new Date(n.date);return l.getUTCFullYear()===e.getFullYear()&&l.getUTCMonth()===e.getMonth()&&l.getUTCDate()===e.getDate()})}else t=T.value.filter(e=>{const n=new Date(e.date);return n.getUTCFullYear()===d.value&&n.getUTCMonth()===i.value});return t.reduce((e,n)=>{const l=new Date(n.date),o=`${l.getUTCFullYear()}-${(l.getUTCMonth()+1).toString().padStart(2,"0")}-${l.getUTCDate().toString().padStart(2,"0")}`;return e[o]||(e[o]={}),e[o][n.title]||(e[o][n.title]=[]),e[o][n.title].push(n),e},{})}),F=p(()=>{const t=[],e=new Date(d.value,i.value,1).getDay(),n=new Date(d.value,i.value+1,0).getDate(),l=new Date(d.value,i.value,0).getDate();for(let s=e-1;s>=0;s--)t.push({dayNumber:l-s,isPrevMonth:!0,isNextMonth:!1,isToday:!1,hasEvent:!1,events:[]});for(let s=1;s<=n;s++){const C=new Date(d.value,i.value,s),U=T.value.filter(A=>{const k=new Date(A.date);return k.getUTCDate()===s&&k.getUTCMonth()===i.value&&k.getUTCFullYear()===d.value});t.push({dayNumber:s,date:C,isPrevMonth:!1,isNextMonth:!1,isToday:C.toDateString()===M.toDateString(),hasEvent:U.length>0,events:U})}const o=42-t.length;for(let s=1;s<=o;s++)t.push({dayNumber:s,isPrevMonth:!1,isNextMonth:!0,isToday:!1,hasEvent:!1,events:[]});const v=[];for(;t.length>0;)v.push(t.splice(0,7));return v});function Y(t){const e=new Date(t),n=e.getUTCDate(),l=w[e.getUTCMonth()],o=e.getUTCFullYear();return`${n} de ${l} de ${o}`}function $(t){i.value+=t,i.value<0?(i.value=11,d.value--):i.value>11&&(i.value=0,d.value++),c.value=null}function L(t){return{"prev-month-day":t.isPrevMonth||t.isNextMonth,today:t.isToday,"has-event":t.hasEvent,"selected-day":c.value&&c.value.date&&t.date&&c.value.date.toDateString()===t.date.toDateString()}}function P(t){!t.isPrevMonth&&!t.isNextMonth&&(c.value&&c.value.date.toDateString()===t.date.toDateString()?c.value=null:c.value=t)}function B(t){return c.value?t.some(e=>{const n=new Date(e.date),l=c.value.date;return n.getUTCFullYear()===l.getFullYear()&&n.getUTCMonth()===l.getMonth()&&n.getUTCDate()===l.getDate()}):!1}const z=t=>{const e=`https://www.google.com/calendar/event?eid=${t.htmlLink}`;window.open(e,"_blank")};return(t,e)=>(u(),r("div",R,[a("div",V,[a("div",H,[a("i",{class:"las la-chevron-left",onClick:e[0]||(e[0]=n=>$(-1))}),a("h2",j,h(N.value),1),a("i",{class:"las la-chevron-right",onClick:e[1]||(e[1]=n=>$(1))})]),a("table",G,[e[3]||(e[3]=a("thead",null,[a("tr",null,[a("th",null,"Dom"),a("th",null,"Seg"),a("th",null,"Ter"),a("th",null,"Qua"),a("th",null,"Qui"),a("th",null,"Sex"),a("th",null,"Sáb")])],-1)),a("tbody",null,[(u(!0),r(D,null,m(F.value,(n,l)=>(u(),r("tr",{key:l},[(u(!0),r(D,null,m(n,o=>(u(),r("td",{key:o.date,class:S(L(o)),onClick:v=>P(o)},[a("div",q,h(o.dayNumber),1),o.events.length?(u(),r("div",W)):x("",!0)],10,K))),128))]))),128))])])]),a("div",X,[a("div",Z,[e[5]||(e[5]=a("h3",null,"Eventos do Mês",-1)),a("div",ee,[O(a("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>y.value=n),placeholder:"Buscar eventos...",class:"search-input"},null,512),[[Q,y.value]]),e[4]||(e[4]=a("i",{class:"las la-search search-icon"},null,-1))]),Object.keys(b.value).length?(u(),r("div",te,[(u(!0),r(D,null,m(b.value,(n,l)=>(u(),r("div",{key:l},[a("h4",ne,h(Y(l)),1),a("ul",ae,[(u(!0),r(D,null,m(n,(o,v)=>(u(),r("li",{key:v,class:S({"selected-event":B(o)})},[a("strong",null,h(v),1),a("ul",le,[(u(!0),r(D,null,m(o,s=>(u(),r("li",{key:s.id,onClick:C=>z(s)},[a("p",null,[a("b",null,[a("i",null,h(s.formatTime)+h(s.formatTime?" - ":"")+h(s.formatDate),1)])]),a("p",null,h(s.locale),1),s.desc?(u(),r("p",{key:0,innerHTML:s.desc},null,8,oe)):x("",!0)],8,se))),128))])],2))),128))])]))),128))])):(u(),r("p",re,"Nenhum evento agendado para este mês."))])])]))}},de=I(ue,[["__scopeId","data-v-98b29a8f"]]);export{de as default};
