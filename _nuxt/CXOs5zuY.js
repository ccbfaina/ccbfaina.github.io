import{_ as h,f as P,H as V,r as c,i as z,A as F,c as e,t as G,x as v,a as r,k as J,I as R,F as x,n as D,m as l,e as y,b as L,w,d as U,q as E,o}from"#entry";const H={class:"perfil-container"},T={key:0,class:"city-selector"},q={key:0},j={key:1},W={key:2},X={key:4},$=["value"],K={key:1,class:"city-confirmed-display"},Q={key:2,class:"perfil-card"},Y=["src"],Z={key:1,class:"las la-user perfil-avatar"},aa={class:"col",style:{"margin-top":"20px"}},ea={key:3,class:"login-prompt"},oa={__name:"perfil",setup(ta){E();const{$session:b}=P(),{loginWithGoogle:S,logoutWithGoogle:I}=b,{user:C,location:t}=V(),O=c(""),n=c(""),m=c(""),p=c(!1),u=c(t.confirmed||!1),A=c(["Americano do Brasil - Central/GO","Araguapaz - Central/GO","Araguapaz - Recantão/GO","Araguapaz - Setor Sol Nascente/GO","Araguapaz - Tiririca/GO","Aruanã - Central/GO","Aruanã - Setor Morada do Sol/GO","Aruanã - Setor Nova Aruanã/GO","Aruanã - Setor Parque Aeroporto/GO","Britânia - Centro/GO","Britânia - Vila Goiás (Central)/GO","Faina - Caiçara/GO","Faina - Central/GO","Faina - Fazenda Alto Da Serra/GO","Faina - Jeroaquara (Santa Rita)/GO","Faina - Lar de Idosos/GO","Goiás - Buenolândia/GO","Goiás - Central/GO","Goiás - Col. de Uvá/GO","Goiás - Hospital São Pedro/GO","Goiás - Povoado de Areias/GO","Goiás - Região Bom Sucesso/GO","Goiás - St. Papyrus/GO","Goiás - Tempo Novo/GO","Goiás - Vila Lions/GO","Goiás - Assentamento Novo Horizonte/GO","Guaraíta - Central/GO","Heitoraí - Central/GO","Itaberaí - Calcilândia/GO","Itaberaí - Central/GO","Itaberaí - Fazenda Mato Dentro/GO","Itaberaí - Fazenda Sobradinho/GO","Itaberaí - Jardim Cristina/GO","Itaberaí - Olho D'água de São Benedito/GO","Itaberaí - Vila Comunitária/GO","Itaberaí - Vila Leonor/GO","Itaberaí - Vila Progresso/GO","Itapirapuã - Central/GO","Itapuranga - Central/GO","Itapuranga - Cibele/GO","Itapuranga - Comunidade Terapêutica Bom Pastor/GO","Itapuranga - Sandra Vilela/GO","Itapuranga - Setor Xixazão/GO","Itapuranga - Vila Renata/GO","Jussara - Bebedouro/GO","Jussara - Central/GO","Jussara - Lar Beneficiente Bom Jesus/GO","Jussara - São Sebastião do Rio Claro (Gueroba)/GO","Jussara - Setor Goiás/GO","Jussara - Setor Guanabara/GO","Jussara - Setor Nova Jussara/GO","Matrinchã - Central/GO","Matrinchã - Lua Nova/GO","Morro Agudo de Goiás - Central/GO","Mossâmedes - Central/GO","Mossâmedes - Mirandópolis/GO","Mozarlândia - Central/GO","Mozarlândia - Setor Nova Morzalândia/GO","Mundo Novo - Assentamento Santa Marta/GO","Mundo Novo - Central/GO","Nova Crixás - Assentamento Florestan Fernandes/GO","Nova Crixás - Central/GO","Nova Crixás - São José Dos Bandeirantes - Setor Aeroporto/GO","Nova Crixás - Setor Água Branca/GO","Novo Brasil - Central/GO","Santa Fé de Goiás - Central/GO","Santa Rita (Itaberaí)/GO","São José Dos Bandeirantes/GO","São Miguel do Araguaia - Bosque Da Saúde/GO","São Miguel do Araguaia - Central/GO","São Miguel do Araguaia - Setor Oeste/GO","São Miguel do Araguaia - Vila Martins/GO","São Patrício - Central/GO","São Patrício - Fazenda São Domingos/GO","Uruana - Central/GO","Uruana - Distrito de Uruíta/GO","Uruana - Jardim Vale do Sol/GO","Uruana - Perilândia/GO","Uruíta - Central/GO","São Paulo/SP","Rio de Janeiro/RJ","Belo Horizonte/MG","Brasília/DF","Porto Alegre/RS","Curitiba/PR","Fortaleza/CE","Salvador/BA","Goiânia/GO","Uruaçu/GO","Anápolis/GO","Catalão/GO","Itumbiara/GO","Rio Verde/GO","Jataí/GO","Luziânia/GO","Valparaíso de Goiás/GO","Águas Lindas de Goiás/GO","Formosa/GO","Planaltina/GO","Novo Gama/GO","Cristalina/GO","Senador Canedo/GO","Trindade/GO","Caldas Novas/GO","Itapaci/GO","Ceres/GO","Santa Helena de Goiás/GO","Itauçu/GO","Bom Jesus de Goiás/GO","Itaguaru/GO","Itaberaí/GO","Itaguari/GO"]);z(()=>t.confirmed,s=>{u.value=s}),F(()=>{u.value||g()});const _=async()=>{await I()},k=()=>{n.value&&(t.city=n.value,t.state=m.value,t.confirmed=!0,u.value=!0,console.log("Cidade detectada confirmada:",t.city,t.state))},B=()=>{p.value=!0,n.value="",m.value=""},f=()=>{if(O.value){const s=O.value,a="GO";t.city=s,t.state=a,t.confirmed=!0,u.value=!0,p.value=!1,console.log("Cidade selecionada confirmada:",t.city,t.state)}},M=()=>{t.confirmed=!1,u.value=!1,g(),console.log("Modo de edição de cidade ativado.")},g=async()=>{const a=await(async()=>{try{const d=await fetch("https://api.bigdatacloud.net/data/reverse-geocode-client?localityLanguage=pt-BR");if(!d.ok)throw new Error("Erro na requisição de IP.");const i=await d.json();if(i&&i.city&&i.principalSubdivisionCode)return{city:i.city,state:i.principalSubdivisionCode.split("-")[1]};throw new Error("Cidade ou estado não encontrados na resposta do IP.")}catch(d){return console.error("Erro ao obter localização por IP:",d),null}})();a&&(n.value=a.city,m.value=a.state)},N=s=>{s.target.src="/icons/user.png"};return(s,a)=>{const d=U;return o(),e("div",H,[u.value?(o(),e("div",K,[r("p",null,[r("strong",null,v(l(t).city),1)]),r("button",{onClick:M},"Alterar Local")])):(o(),e("div",T,[n.value?(o(),e("p",q,"Detectamos que sua cidade é "+v(n.value)+"/"+v(m.value)+". Confirma?",1)):G("",!0),n.value?(o(),e("div",j,[r("button",{onClick:k},"Sim, é minha cidade"),r("button",{onClick:B},"Não, selecionar outra")])):G("",!0),!n.value&&!p.value?(o(),e("p",W,"Para continuar, por favor, informe sua cidade.")):G("",!0),!n.value&&!p.value?(o(),e("button",{key:3,onClick:g},"Detectar minha localização")):G("",!0),p.value?(o(),e("div",X,[J(r("select",{"onUpdate:modelValue":a[0]||(a[0]=i=>O.value=i),onChange:f},[a[2]||(a[2]=r("option",{value:"",disabled:""},"Selecione sua cidade",-1)),(o(!0),e(x,null,D(A.value,i=>(o(),e("option",{key:i,value:i},v(i),9,$))),128))],544),[[R,O.value]]),O.value?(o(),e("button",{key:0,onClick:f},"Confirmar Cidade")):G("",!0)])):G("",!0)])),l(C)?.uid?(o(),e("div",Q,[l(C).photoURL?(o(),e("img",{key:0,src:l(C).photoURL,alt:"Avatar do usuário",class:"perfil-avatar",onError:N},null,40,Y)):(o(),e("i",Z)),a[5]||(a[5]=r("strong",null,"Bem vindo ",-1)),y(" "+v(l(C).displayName||"")+" ",1),r("button",{onClick:_},"Sair"),a[6]||(a[6]=r("hr",null,null,-1)),r("div",aa,[a[4]||(a[4]=r("div",null," Você deseja: ",-1)),L(d,{to:"/evento/solicitar"},{default:w(()=>[...a[3]||(a[3]=[y(" Agendar evento ",-1)])]),_:1})])])):(o(),e("div",ea,[a[7]||(a[7]=r("p",null,"Você precisa estar logado para obter mais recursos.",-1)),r("button",{onClick:a[1]||(a[1]=(...i)=>l(S)&&l(S)(...i))},"Entrar")]))])}}},ia=h(oa,[["__scopeId","data-v-3296a2c9"]]);export{ia as default};
