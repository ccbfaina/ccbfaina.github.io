import{_ as I,y as J,r as f,h as p,c as r,a as l,t as h,F as D,k as m,i as O,A as Q,o as u,n as S,m as x}from"./-PIXM2h1.js";const R={class:"calendar-wrapper"},V={class:"calendar-panel"},H={class:"calendar-header"},j={class:"month-year"},G={class:"calendar-table"},K=["onClick"],q={class:"day-number"},W={key:0,class:"event-indicator"},X={class:"events-panel"},Z={class:"events-list-container"},ee={class:"search-container"},te={key:0},ne={class:"event-date-title"},ae={class:"events-list"},le={class:"sub-events-list"},se=["onClick"],oe=["innerHTML"],re={key:1,class:"no-events-message"},ue={__name:"agenda",setup(ie){const{lista:N}=J(),_=f(N.allEvents),y=f(""),M=new Date,i=f(M.getMonth()),d=f(M.getFullYear()),c=f(null),w=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],E=p(()=>`${w[i.value]} ${d.value}`);function g(e){return e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):""}const T=p(()=>{const e=y.value.trim();if(!e)return _.value;if(e.includes("|"))try{const t=new RegExp(e,"i");return _.value.filter(n=>{const a=`${g(n.title||"")} ${g(n.locale||"")} ${g(n.desc||"")}`;return t.test(a)})}catch(t){return console.error("Regex inválida:",t),[]}else{const n=g(e).replace(/\bou\b/gi,",").split(/,|\s+/).map(a=>a.trim()).filter(Boolean).map(a=>new RegExp(`${a}`,"i"));return _.value.filter(a=>{const o=`${g(a.title||"")} ${g(a.locale||"")} ${g(a.desc||"")}`;return n.every(v=>v.test(o))})}}),b=p(()=>{let e;if(c.value){const t=c.value.date;e=T.value.filter(n=>{const a=new Date(n.date);return a.getUTCFullYear()===t.getFullYear()&&a.getUTCMonth()===t.getMonth()&&a.getUTCDate()===t.getDate()})}else e=T.value.filter(t=>{const n=new Date(t.date);return n.getUTCFullYear()===d.value&&n.getUTCMonth()===i.value});return e.reduce((t,n)=>{const a=new Date(n.date),o=`${a.getUTCFullYear()}-${(a.getUTCMonth()+1).toString().padStart(2,"0")}-${a.getUTCDate().toString().padStart(2,"0")}`;return t[o]||(t[o]={}),t[o][n.title]||(t[o][n.title]=[]),t[o][n.title].push(n),t},{})}),F=p(()=>{const e=[],t=new Date(d.value,i.value,1).getDay(),n=new Date(d.value,i.value+1,0).getDate(),a=new Date(d.value,i.value,0).getDate();for(let s=t-1;s>=0;s--)e.push({dayNumber:a-s,isPrevMonth:!0,isNextMonth:!1,isToday:!1,hasEvent:!1,events:[]});for(let s=1;s<=n;s++){const C=new Date(d.value,i.value,s),U=T.value.filter(A=>{const k=new Date(A.date);return k.getUTCDate()===s&&k.getUTCMonth()===i.value&&k.getUTCFullYear()===d.value});e.push({dayNumber:s,date:C,isPrevMonth:!1,isNextMonth:!1,isToday:C.toDateString()===M.toDateString(),hasEvent:U.length>0,events:U})}const o=42-e.length;for(let s=1;s<=o;s++)e.push({dayNumber:s,isPrevMonth:!1,isNextMonth:!0,isToday:!1,hasEvent:!1,events:[]});const v=[];for(;e.length>0;)v.push(e.splice(0,7));return v});function Y(e){const t=new Date(e),n=t.getUTCDate(),a=w[t.getUTCMonth()],o=t.getUTCFullYear();return`${n} de ${a} de ${o}`}function $(e){i.value+=e,i.value<0?(i.value=11,d.value--):i.value>11&&(i.value=0,d.value++),c.value=null}function L(e){return{"prev-month-day":e.isPrevMonth||e.isNextMonth,today:e.isToday,"has-event":e.hasEvent,"selected-day":c.value&&c.value.date&&e.date&&c.value.date.toDateString()===e.date.toDateString()}}function P(e){!e.isPrevMonth&&!e.isNextMonth&&(c.value&&c.value.date.toDateString()===e.date.toDateString()?c.value=null:c.value=e)}function B(e){return c.value?e.some(t=>{const n=new Date(t.date),a=c.value.date;return n.getUTCFullYear()===a.getFullYear()&&n.getUTCMonth()===a.getMonth()&&n.getUTCDate()===a.getDate()}):!1}const z=e=>{const t=`https://www.google.com/calendar/event?eid=${e.htmlLink}`;window.open(t,"_blank")};return(e,t)=>(u(),r("div",R,[l("div",V,[l("div",H,[l("i",{class:"las la-chevron-left",onClick:t[0]||(t[0]=n=>$(-1))}),l("h2",j,h(E.value),1),l("i",{class:"las la-chevron-right",onClick:t[1]||(t[1]=n=>$(1))})]),l("table",G,[t[3]||(t[3]=l("thead",null,[l("tr",null,[l("th",null,"Dom"),l("th",null,"Seg"),l("th",null,"Ter"),l("th",null,"Qua"),l("th",null,"Qui"),l("th",null,"Sex"),l("th",null,"Sáb")])],-1)),l("tbody",null,[(u(!0),r(D,null,m(F.value,(n,a)=>(u(),r("tr",{key:a},[(u(!0),r(D,null,m(n,o=>(u(),r("td",{key:o.date,class:S(L(o)),onClick:v=>P(o)},[l("div",q,h(o.dayNumber),1),o.events.length?(u(),r("div",W)):x("",!0)],10,K))),128))]))),128))])])]),l("div",X,[l("div",Z,[l("div",ee,[O(l("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=n=>y.value=n),placeholder:"Buscar eventos...",class:"search-input"},null,512),[[Q,y.value]]),t[4]||(t[4]=l("i",{class:"las la-search search-icon"},null,-1))]),Object.keys(b.value).length?(u(),r("div",te,[(u(!0),r(D,null,m(b.value,(n,a)=>(u(),r("div",{key:a},[l("h4",ne,h(Y(a)),1),l("ul",ae,[(u(!0),r(D,null,m(n,(o,v)=>(u(),r("li",{key:v,class:S({"selected-event":B(o)})},[l("strong",null,h(v),1),l("ul",le,[(u(!0),r(D,null,m(o,s=>(u(),r("li",{key:s.id,onClick:C=>z(s)},[l("p",null,[l("b",null,[l("i",null,h(s.formatTime)+h(s.formatTime?" - ":"")+h(s.formatDate),1)])]),l("p",null,h(s.locale),1),s.desc?(u(),r("p",{key:0,innerHTML:s.desc},null,8,oe)):x("",!0)],8,se))),128))])],2))),128))])]))),128))])):(u(),r("p",re,"Nenhum evento agendado para este mês."))])])]))}},de=I(ue,[["__scopeId","data-v-73471779"]]);export{de as default};
