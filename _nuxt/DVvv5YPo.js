import{_ as D,G as $,k as w,q as R,r as x,H as k,V as b,g as _,B as j,c as r,o as u,a as t,h as d,x as f,C as c,I as M,F,j as V,t as m,l as i,J as T,e as A}from"./lOCF2xEd.js";const E={class:"content"},I={class:"form-inline"},N={class:"form-group"},O={class:"row"},S={class:"form-group"},z={class:"row"},G={class:"form-group"},H={class:"row"},J=["value"],P={class:"form-group"},W={class:"flex gap-xs"},K={class:"form-group"},Q={class:"flex gap-xs"},X={class:"form-group",style:{"align-items":"flex-start"}},Y=["id","value"],Z=["for"],h={class:"form-group",style:{"text-align":"right"}},ee=["disabled"],te={class:"form-inline",style:{gap:"1rem","margin-top":"1rem"}},le={__name:"filters-lista",setup(ae){const C=$(),L=w(),{lista:n}=R(),g=x(!1),l=x({search:"",title:"",locale:"",date:"",start:"",end:"",calendars:[]}),B=()=>{const o=C.query||{};["search","title","locale","date","start","end"].forEach(a=>{o[a]!==void 0&&(l.value[a]=o[a])}),o.calendars&&(l.value.calendars=Array.isArray(o.calendars)?o.calendars:o.calendars.split(",").filter(Boolean));const{today:s,future:v}=b();l.value.start||(l.value.start=s),l.value.end||(l.value.end=v)},U=k(()=>{const o=Object.fromEntries(Object.entries(l.value).filter(([e,s])=>{if(e==="calendars")return s.length;const{today:v,future:a}=b();return e==="start"&&s===v||e==="end"&&s===a?!1:s!==""&&s!=null}).map(([e,s])=>Array.isArray(s)?[e,s.join(",")]:[e,s]));L.replace({query:o})},200),y=k(()=>{n.filters={...n.filters,...l.value},n.updateFetchFilters()},1e3);_(()=>{B(),y()}),j(l,()=>{U(),y()},{deep:!0});function p(o){if(o==="calendars")l.value.calendars=[];else if(o==="date"){l.value.date="";const{today:e,future:s}=b();l.value.start=e,l.value.end=s}else if(o==="start"||o==="end"){l.value[o]="";const{today:e,future:s}=b();l.value.start=e,l.value.end=s}else l.value[o]=""}return(o,e)=>{var s,v;return u(),r("div",E,[t("div",I,[t("div",null,[t("div",N,[e[13]||(e[13]=t("label",{for:"search"},"Pesquisar",-1)),t("div",O,[d(t("input",{id:"search","onUpdate:modelValue":e[0]||(e[0]=a=>l.value.search=a),type:"text",placeholder:"Buscar itens..."},null,512),[[c,l.value.search]]),l.value.search?(u(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar pesquisa",type:"button",onClick:e[1]||(e[1]=a=>p("search"))}," × ")):f("",!0)])]),t("div",S,[e[14]||(e[14]=t("label",{for:"title"},"Título",-1)),t("div",z,[d(t("input",{id:"title","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.title=a),type:"text",placeholder:"Filtrar por título..."},null,512),[[c,l.value.title]]),l.value.title?(u(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar título",type:"button",onClick:e[3]||(e[3]=a=>p("title"))}," × ")):f("",!0)])]),t("div",G,[e[16]||(e[16]=t("label",{for:"locale"},"Local",-1)),t("div",H,[d(t("select",{id:"locale","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.locale=a)},[e[15]||(e[15]=t("option",{value:""},"Todos os locais",-1)),(u(!0),r(F,null,V(i(n).eventsLocales,a=>(u(),r("option",{key:a,value:a},m(a),9,J))),128))],512),[[M,l.value.locale]]),l.value.locale?(u(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar local",type:"button",onClick:e[5]||(e[5]=a=>p("locale"))}," × ")):f("",!0)])]),t("div",P,[e[17]||(e[17]=t("label",{for:"date"},"Data",-1)),t("div",W,[d(t("input",{id:"date","onUpdate:modelValue":e[6]||(e[6]=a=>l.value.date=a),type:"date"},null,512),[[c,l.value.date]]),l.value.date?(u(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar data",type:"button",onClick:e[7]||(e[7]=a=>p("date"))}," × ")):f("",!0)])]),t("div",K,[e[18]||(e[18]=t("label",null,"Intervalo de Datas",-1)),t("div",Q,[d(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>l.value.start=a),type:"date"},null,512),[[c,l.value.start]]),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>l.value.end=a),type:"date"},null,512),[[c,l.value.end]])]),l.value.start||l.value.end?(u(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar datas",type:"button",onClick:e[10]||(e[10]=a=>p("date"))}," × ")):f("",!0)])]),t("div",null,[t("div",X,[e[19]||(e[19]=t("label",null,"Agendas",-1)),t("div",null,[(u(!0),r(F,null,V(i(n).eventsCalendars,a=>(u(),r("div",{key:a},[d(t("input",{id:"cat-"+a,"onUpdate:modelValue":e[11]||(e[11]=q=>l.value.calendars=q),type:"checkbox",value:a,style:{margin:"5px 5px 0 0"}},null,8,Y),[[T,l.value.calendars]]),t("label",{for:"cat-"+a,style:{"margin-bottom":"0"}},m(a),9,Z)]))),128))])]),t("div",h,[e[20]||(e[20]=t("label",null,null,-1)),t("button",{class:"success",disabled:g.value||i(n).loading,onClick:e[12]||(e[12]=a=>i(y)())},m(g.value||i(n).loading?"Atualizando...":"Aplicar"),9,ee)])])]),t("div",te,[t("span",null,[e[21]||(e[21]=t("i",{class:"la la-calendar-check"},null,-1)),A(" "+m(((v=(s=i(n))==null?void 0:s.calendars)==null?void 0:v.length)||0),1)]),t("span",null,[e[22]||(e[22]=t("i",{class:"la la-tasks"},null,-1)),A(" "+m(Array.isArray(i(n).eventsFiltered)?i(n).eventsFiltered.length:0),1)])])])}}},oe=D(le,[["__scopeId","data-v-18f51efd"]]);export{oe as F};
