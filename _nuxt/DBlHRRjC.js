import{L as Dt}from"./BXVbbdtd.js";import{_ as ht,y as Ct,r as D,L as ot,h as k,f as rt,B as O,Q as St,c as r,C as it,p as h,F as C,a as e,m as d,n as S,t as i,i as v,v as z,D as A,k as $,J as ut,e as V,g as Et,R as U,l as Tt,S as Lt,o,K as $t,O as dt,G as xt,E as qt}from"./CyWUL_Tt.js";import{a as wt,S as At,E as Vt}from"./Uwn1OeAn.js";import{d as jt}from"./BcZQbp_F.js";const Ot={class:"tabs-container print-hide"},zt={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},Bt=["aria-selected"],It={class:"badge"},Ut=["aria-selected"],Gt={class:"badge"},Ft=["aria-selected"],Mt={class:"tab-content"},Rt={id:"tab-content-lista",role:"tabpanel"},Nt={class:"text-center"},Pt={key:0},Ht={key:1},Kt={key:2},Wt={key:3},Jt={key:4},Qt={id:"tab-content-filters",role:"tabpanel"},Xt={class:"content"},Yt={class:"form-inline"},Zt={class:"form-group"},te={class:"row"},ee={class:"form-group"},le={class:"row"},se=["value"],ne={class:"form-group"},ae={class:"row"},oe=["value"],re={class:"form-group"},ie={class:"flex gap-xs"},ue={class:"form-group"},de={class:"flex gap-xs"},ce={class:"form-group",style:{"align-items":"flex-start"}},pe=["id","value"],ve=["for"],fe={class:"form-group",style:{"text-align":"right"}},me=["disabled"],be={class:"form-inline",style:{gap:"1rem","margin-top":"1rem"}},ge={id:"tab-content-print",role:"tabpanel"},ye={class:"a4 print-hide"},ke={class:"settings-list"},_e={class:"settings-list print-hide"},De=["onDragstart","onDragover","onDrop","onClick"],he={key:0,class:"print-page"},Ce=["onDragstart","onDragover","onDrop"],Se={colspan:"5"},Ee={class:"flex items-center aling-center justify-center"},Te=["onClick"],Le=["onDblclick"],$e={key:0},xe={key:0},qe={key:0},we=["innerHTML"],Ae={__name:"index",setup(Ve){const{lista:_}=Ct(),c=D("lista"),s=ot({search:"",title:"",locale:"",date:"",start:"",end:"",calendars:[]}),j=D(1),B=Et(),G=Tt(),F=D(!1),ct=()=>{const l=B.query||{};["search","title","locale","date","start","end"].forEach(b=>{l[b]!==void 0&&(s[b]=l[b])}),l.calendars&&(s.calendars=Array.isArray(l.calendars)?l.calendars:l.calendars.split(",").filter(Boolean));const{today:a,future:p}=U();s.start||(s.start=a),s.end||(s.end=p)},M=jt(()=>{const l=Object.fromEntries(Object.entries(s).filter(([t,a])=>t==="calendars"?a.length:a!==""&&a!=null).map(([t,a])=>Array.isArray(a)?[t,a.join(",")]:[t,a]));G.replace({query:l})},200),E=k(()=>{const l=Lt(_.allEvents||[],s);return Array.from(new Set(l.map(a=>a.id))).map(a=>l.find(p=>p.id===a))});function pt(){M()}rt(()=>{ct()}),O([s,j],M,{deep:!0});function x(l){if(l==="calendars")s.calendars=[];else if(l==="date"){s.date="";const{today:t,future:a}=U();s.start=t,s.end=a}else if(l==="start"||l==="end"){const{today:t,future:a}=U();s.start=t,s.end=a}else s[l]=""}function I(l,t){return Array.from(new Set(l.map(a=>a[t]).filter(a=>typeof a=="string"&&a.trim())))}const vt=k(()=>I(E.value,"title")),ft=k(()=>I(E.value,"locale")),mt=k(()=>I(_.allEvents,"list")),T=D([]);O(E,l=>{var b;const t=Array.from(new Set(l.map(g=>g.title||"Sem título"))),p=(((b=B.query.order)==null?void 0:b.split(",").filter(Boolean))||[]).filter(g=>t.includes(g));t.forEach(g=>{p.includes(g)||p.push(g)}),T.value=p},{immediate:!0}),O(T,l=>{const t={...B.query};l&&l.length>0?t.order=l.join(","):delete t.order,G.replace({query:t})});const y=k(()=>{const l={};return E.value.forEach(t=>{const a=t.title||"Sem título";(l[a]||(l[a]=[])).push(t)}),T.value.filter(t=>l[t]).map(t=>({title:t,items:l[t].slice().sort((a,p)=>a.onDate&&p.onDate?a.onDate-p.onDate:0)}))}),R=l=>{var t;return(t=l==null?void 0:l.replace(/-$/,""))==null?void 0:t.trim()},bt=k(()=>{let l=0;return s.search&&l++,s.title&&l++,s.locale&&l++,s.date&&l++,s.calendars&&s.calendars.length>0&&l++,l}),gt=()=>{c.value="lista",setTimeout(()=>{window.print()},1e3)},L=D(null),q=D(null),N=l=>{L.value=l},P=l=>{q.value=l},H=l=>{if(L.value===null||L.value===l){L.value=null,q.value=null;return}const t=[...T.value],[a]=t.splice(L.value,1);t.splice(l,0,a),T.value=t,L.value=null,q.value=null},f=ot({});O(y,()=>{if(!y.value)return;const l=y.value.map(t=>t.title);l.forEach(t=>{t in f||(f[t]=!0)});for(const t in f)l.includes(t)||delete f[t]},{immediate:!0});const K=l=>{c.value="print",f[l]=!f[l]},W=k(()=>y.value.length>0&&y.value.every(l=>f[l.title])),yt=l=>{y.value.forEach(t=>{f[t.title]=l})},kt=l=>{const t=`https://www.google.com/calendar/event?eid=${l.htmlLink}`;window.open(t,"_blank")},w=D(null),_t=k(()=>Object.values(f).filter(Boolean).length);return rt(()=>{w.value=new wt({extensions:[At],content:`
      <p>Oração Santa Ceia</p>
      <p><strong>Pão:</strong> "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo."</p>
      <p><strong>Cálice:</strong> "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo."</p>
    `,editable:!0})}),St(()=>{w.value&&w.value.destroy()}),(l,t)=>{var p,b,g,J,Q,X,Y,Z,tt,et,lt,st,nt,at;const a=Dt;return o(),r("div",null,[h(_).loading&&h(_).allEvents.length===0?(o(),it(a,{key:0})):(o(),r(C,{key:1},[e("div",Ot,[e("nav",zt,[e("span",{id:"tab-filters","aria-selected":c.value==="filters",role:"tab",type:"button",class:S(["tab",{active:c.value==="filters"}]),style:{position:"relative"},onClick:t[0]||(t[0]=n=>c.value="filters")},[e("span",It,i(bt.value),1),t[18]||(t[18]=e("i",{class:"la la-filter z-10"},null,-1))],10,Bt),e("span",{id:"tab-print","aria-selected":c.value==="print",role:"tab",type:"button",class:S(["tab",{active:c.value==="print"}]),onClick:t[1]||(t[1]=n=>c.value="print")},[e("span",Gt,i(_t.value),1),t[19]||(t[19]=e("i",{class:"la la-print"},null,-1))],10,Ut),e("span",{id:"tab-lista","aria-selected":c.value==="lista",role:"tab",type:"button",class:S(["tab",{active:c.value==="lista"}]),onClick:t[2]||(t[2]=n=>c.value="lista")}," Lista ",10,Ft)])]),e("div",null,[e("div",Mt,[v(e("div",Rt,[e("div",Nt,[t[20]||(t[20]=e("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),s.calendars.length?(o(),r("div",Pt,[e("b",null,i(s.calendars.map(R).join(", ")),1)])):d("",!0),s.locale?(o(),r("span",Ht,[e("b",null,i(R(s.locale)),1)])):d("",!0),s.date?(o(),r("span",Kt," Data: "+i((J=(g=(b=(p=s.date)==null?void 0:p.split("T")[0])==null?void 0:b.split("-"))==null?void 0:g.reverse())==null?void 0:J.join("/")),1)):d("",!0),!s.date&&(s.start||s.end)?(o(),r("div",Wt," Período: "+i((Z=(Y=(X=(Q=s.start)==null?void 0:Q.split("T")[0])==null?void 0:X.split("-"))==null?void 0:Y.reverse())==null?void 0:Z.join("/"))+" à "+i((st=(lt=(et=(tt=s.end)==null?void 0:tt.split("T")[0])==null?void 0:et.split("-"))==null?void 0:lt.reverse())==null?void 0:st.join("/")),1)):d("",!0),s.search?(o(),r("div",Jt,i(s.search),1)):d("",!0)])],512),[[z,c.value==="lista"]]),v(e("div",Qt,[e("div",Xt,[e("div",Yt,[e("div",null,[e("div",Zt,[t[21]||(t[21]=e("label",{for:"search"},"Pesquisar",-1)),e("div",te,[v(e("input",{id:"search","onUpdate:modelValue":t[3]||(t[3]=n=>s.search=n),type:"text",placeholder:"Buscar itens..."},null,512),[[A,s.search]]),s.search?(o(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar pesquisa",type:"button",onClick:t[4]||(t[4]=n=>x("search"))}," × ")):d("",!0)])]),e("div",ee,[t[23]||(t[23]=e("label",{for:"title"},"Título",-1)),e("div",le,[v(e("select",{id:"title","onUpdate:modelValue":t[5]||(t[5]=n=>s.title=n)},[t[22]||(t[22]=e("option",{value:""},"Todos os títulos",-1)),(o(!0),r(C,null,$(vt.value,n=>(o(),r("option",{key:n,value:n},i(n),9,se))),128))],512),[[ut,s.title]]),s.title?(o(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar título",type:"button",onClick:t[6]||(t[6]=n=>x("title"))}," × ")):d("",!0)])]),e("div",ne,[t[25]||(t[25]=e("label",{for:"locale"},"Local",-1)),e("div",ae,[v(e("select",{id:"locale","onUpdate:modelValue":t[7]||(t[7]=n=>s.locale=n)},[t[24]||(t[24]=e("option",{value:""},"Todos os locais",-1)),(o(!0),r(C,null,$(ft.value,n=>(o(),r("option",{key:n,value:n},i(n),9,oe))),128))],512),[[ut,s.locale]]),s.locale?(o(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar local",type:"button",onClick:t[8]||(t[8]=n=>x("locale"))}," × ")):d("",!0)])]),e("div",re,[t[26]||(t[26]=e("label",{for:"date"},"Data",-1)),e("div",ie,[v(e("input",{id:"date","onUpdate:modelValue":t[9]||(t[9]=n=>s.date=n),type:"date"},null,512),[[A,s.date]]),s.date?(o(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar data",type:"button",onClick:t[10]||(t[10]=n=>x("date"))}," × ")):d("",!0)])]),e("div",ue,[t[27]||(t[27]=e("label",null,"Intervalo de Datas",-1)),e("div",de,[v(e("input",{"onUpdate:modelValue":t[11]||(t[11]=n=>s.start=n),type:"date"},null,512),[[A,s.start]]),v(e("input",{"onUpdate:modelValue":t[12]||(t[12]=n=>s.end=n),type:"date"},null,512),[[A,s.end]]),s.start||s.end?(o(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar datas",type:"button",onClick:t[13]||(t[13]=n=>x("date"))}," × ")):d("",!0)])])]),e("div",null,[e("div",ce,[t[28]||(t[28]=e("label",null,"Agendas",-1)),e("div",null,[(o(!0),r(C,null,$(mt.value,n=>(o(),r("div",{key:n},[v(e("input",{id:"cat-"+n,"onUpdate:modelValue":t[14]||(t[14]=m=>s.calendars=m),type:"checkbox",value:n,style:{margin:"5px 5px 0 0"}},null,8,pe),[[$t,s.calendars]]),e("label",{for:"cat-"+n,style:{"margin-bottom":"0"}},i(n),9,ve)]))),128))])]),e("div",fe,[t[29]||(t[29]=e("label",null,null,-1)),e("button",{class:"success",disabled:F.value||h(_).loading,onClick:t[15]||(t[15]=n=>pt())},i(F.value||h(_).loading?"Atualizando...":"Aplicar"),9,me)])])]),e("div",be,[e("span",null,[t[30]||(t[30]=e("i",{class:"la la-calendar-check"},null,-1)),V(" "+i(((at=(nt=h(_))==null?void 0:nt.calendars)==null?void 0:at.length)||0),1)]),e("span",null,[t[31]||(t[31]=e("i",{class:"la la-tasks"},null,-1)),V(" "+i(Array.isArray(E.value)?E.value.length:0),1)])])])],512),[[z,c.value==="filters"]]),v(e("div",ge,[e("div",{class:"text-center flex col items-center gap-4"},[t[33]||(t[33]=e("b",{class:"mb-4 p"},"Ajustes de impressão:",-1)),e("div",{class:"p"},[e("button",{class:"success",onClick:gt},t[32]||(t[32]=[e("i",{class:"la la-print"},null,-1),V(" Imprimir ")]))])]),e("div",ye,[e("div",ke,[t[34]||(t[34]=e("b",null,"Tamanho da Fonte",-1)),v(e("input",{type:"range","onUpdate:modelValue":t[16]||(t[16]=n=>j.value=n),min:"0.8",max:"1.6",step:"0.1"},null,512),[[A,j.value]])]),e("div",_e,[t[35]||(t[35]=e("b",null,"Lista",-1)),e("div",null,[e("i",{class:S(["la",W.value?"la-toggle-on":"la-toggle-off"]),title:"Ocultar todos",onClick:t[17]||(t[17]=n=>yt(!W.value))},null,2)])]),(o(!0),r(C,null,$(T.value,(n,m)=>(o(),r("div",{key:n,class:S(["settings-list print-hide",{"drag-over":q.value===m}]),draggable:"true",onDragstart:u=>N(m),onDragover:dt(u=>P(m),["prevent"]),onDrop:u=>H(m),onClick:u=>K(n)},[V(i(n)+" ",1),e("i",{class:S(["la",f[n]?"la-toggle-on":"la-toggle-off"]),title:"Alterar visibilidade"},null,2)],42,De))),128))])],512),[[z,c.value==="print"]])])]),y.value.length?(o(),r("div",he,[(o(!0),r(C,null,$(y.value,(n,m)=>v((o(),r("div",{key:n.title,class:S(["table-list",{"drag-over":q.value===m}]),draggable:"true",style:{cursor:"move"},onDragstart:u=>N(m),onDragover:dt(u=>P(m),["prevent"]),onDrop:u=>H(m)},[e("div",{class:"table-container",style:qt({fontSize:j.value+"rem"})},[e("table",null,[e("thead",null,[e("tr",null,[e("th",Se,[e("div",Ee,[V(i(n.title)+" ",1),e("i",{class:"la la-toggle-on print-hide",style:{cursor:"pointer"},onClick:u=>K(n.title)},null,8,Te)])])])]),e("tbody",null,[(o(!0),r(C,null,$(n.items,u=>(o(),r("tr",{key:u.id,onDblclick:Oe=>kt(u)},[e("td",null,[u.formatDate?(o(),r("span",$e,i(u.formatDate),1)):d("",!0)]),e("td",null,[u.formatWeek?(o(),r("span",xe,i(u.formatWeek),1)):d("",!0)]),e("td",null,[u.formatTime?(o(),r("span",qe,i(u.formatTime),1)):d("",!0)]),e("td",null,i(u.locale),1),e("td",null,[u.desc?(o(),r("span",{key:0,innerHTML:h(xt)(u.desc)},null,8,we)):d("",!0)])],40,Le))),128))])])],4)],42,Ce)),[[z,f[n.title]]])),128)),w.value?(o(),it(h(Vt),{key:0,editor:w.value,class:"editable"},null,8,["editor"])):d("",!0)])):d("",!0)],64))])}}},Ge=ht(Ae,[["__scopeId","data-v-413c0c91"]]);export{Ge as default};
