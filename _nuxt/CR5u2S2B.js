import{_ as m,s as v,f as b,c as e,a,e as i,t as k,p as o,m as y,o as n}from"./Cyy48QG-.js";const C={key:0},N=["disabled"],w={key:0},x={key:1},A={key:1},P={key:0},I={key:1},B={__name:"settings",setup(T){const{notifications:t,pendingConfigsCount:u,install:r}=v();async function d(){if(navigator.share)navigator.share({title:"Agenda CCB",text:"Acesse o aplicativo Agenda CCB",url:"https://faina.ccbgo.org.br"});else try{await navigator.clipboard.writeText("https://faina.ccbgo.org.br"),alert("URL copiada para a área de transferência!")}catch{alert("Não foi possível copiar a URL.")}}async function c(){if(!("Notification"in window)){console.warn("Este navegador não suporta notificações."),alert("Este navegador não suporta notificações.");return}t.status="loading";try{const l=await Notification.requestPermission();l==="granted"?t.status="granted":l==="denied"?t.status="denied":t.status="default"}catch(l){console.error("Erro ao solicitar permissão de notificação:",l),t.status="default"}}function p(){r.deferredPrompt&&(r.deferredPrompt.prompt(),r.deferredPrompt.userChoice.then(({outcome:l})=>{l==="accepted"?(console.log("Usuário aceitou instalar o PWA."),r.canInstall=!1,r.deferredPrompt=null):console.log("Usuário recusou instalar o PWA.")}))}function f(){console.log(`Seu token de notificação é: ${t.fcmToken}`)}function g(){alert("Para ativar as notificações, vá nas configurações do seu navegador e permita notificações para este aplicativo.")}return b(()=>{"Notification"in window&&(t.status=Notification.permission)}),(l,s)=>(n(),e("div",null,[a("div",null,[a("button",{class:"action-button",onClick:d},s[0]||(s[0]=[a("i",{class:"la la-share-alt"},null,-1),i(" Compartilhar aplicativo ")]))]),s[14]||(s[14]=a("hr",{class:"section-separator"},null,-1)),a("div",null,k(o(u)>0?`Você tem ${o(u)} configuração(ões) pendente(s).`:"Todas as configurações estão atualizadas."),1),s[15]||(s[15]=a("hr",{class:"section-separator"},null,-1)),a("div",null,[a("section",null,[s[7]||(s[7]=a("h2",null,[a("i",{class:"la la-bell text-blue-500"}),i(" Permissões")],-1)),o(t).status==="default"||o(t).status==="loading"?(n(),e("div",C,[s[2]||(s[2]=a("p",{class:"info-message"}," Deseja receber atualizações importantes e lembretes? ",-1)),a("button",{class:"action-button primary",disabled:o(t).status==="loading",onClick:c},[s[1]||(s[1]=a("i",{class:"la la-bell"},null,-1)),o(t).status==="loading"?(n(),e("span",w," Solicitando... ")):(n(),e("span",x," Ativar Notificações "))],8,N)])):o(t).status==="denied"?(n(),e("div",A,[s[4]||(s[4]=a("p",{class:"error-message"},[a("i",{class:"la la-exclamation-triangle"}),i(" As notificações estão bloqueadas no navegador. ")],-1)),a("button",{class:"action-button secondary",onClick:g},s[3]||(s[3]=[a("i",{class:"la la-unlock"},null,-1),i(" Desbloquear Notificações ")])),s[5]||(s[5]=a("p",{class:"instructions-text"}," Para reativar, você precisará desbloqueá-las manualmente nas configurações do seu navegador para este site. ",-1))])):o(t).status==="granted"?(n(),e("div",{key:2,onClick:f},s[6]||(s[6]=[a("p",{class:"success-message"},[a("i",{class:"la la-check-circle"}),i(" Notificações ativadas! ")],-1)]))):y("",!0)]),s[12]||(s[12]=a("hr",{class:"section-separator"},null,-1)),a("section",null,[s[11]||(s[11]=a("h2",null,[a("i",{class:"lab la-app-store-ios text-blue-500"}),i(" Instalar")],-1)),o(r).canInstall?(n(),e("div",P,[s[9]||(s[9]=a("p",{class:"info-message"},"Deseja instalar o app em seu dispositivo?",-1)),a("button",{class:"action-button",onClick:p},s[8]||(s[8]=[a("i",{class:"la la-download"},null,-1),i(" Instalar aplicativo ")]))])):(n(),e("div",I,s[10]||(s[10]=[a("p",{class:"success-message"},[a("i",{class:"la la-check-circle"}),i("O aplicativo já está instalado. ")],-1)])))]),s[13]||(s[13]=a("hr",{class:"section-separator"},null,-1))])]))}},q=m(B,[["__scopeId","data-v-83170869"]]);export{q as default};
