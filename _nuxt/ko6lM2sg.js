import{L as re}from"./Dx1zgraH.js";import{_ as ue,u as ie,r as p,y as ce,h as D,z as E,c as o,A as de,a,t as f,F as m,k as y,e as q,i as he,B as ve,g as ge,C as fe,o as l,n as B,p as X,D as x,l as pe,E as me}from"./CoNwJIvt.js";const ye={key:1,class:"calendar-wrapper"},De={class:"calendar-header"},_e={class:"month-year"},be={class:"calendar-table"},ke=["onClick"],Ce={class:"day-content"},Me={class:"day-number"},Te={key:0,class:"event-indicators"},we={class:"events-panel"},Se={class:"events-list-container"},Ee={class:"chips-container"},xe={key:0,class:"las la-toggle-on"},Ne={key:1,class:"las la-toggle-off"},Ue=["onClick"],Fe={key:0,class:"las la-toggle-on"},Ae={key:1,class:"las la-toggle-off"},Ge={class:"search-container"},Ye={key:0},$e={class:"event-date-title"},Pe={class:"events-list"},ze={class:"sub-events-list"},Oe=["onClick"],Le=["innerHTML"],Re={key:1,class:"no-events-message"},J="agenda_selected_groups",V=50,Ie={__name:"agenda",setup(qe){const{lista:_}=ie(),N=ge(),U=p(!0),C=new Date,d=p(C.getMonth()),g=p(C.getFullYear()),h=p(null),u=ce({search:"",title:"",locale:"",date:"",start:"",end:"",groups:[]});(()=>{const e=N.query||{};["search","title","locale","date","start","end"].forEach(s=>{e[s]!==void 0&&(u[s]=e[s])}),e.groups&&(u.groups=Array.isArray(e.groups)?e.groups:e.groups.split(",").filter(Boolean))})();const b=D(()=>Array.from(new Set(_.allEvents.map(e=>e.group))).filter(e=>e).sort((e,t)=>e.localeCompare(t))),F=D(()=>u.groups.length===b.value.length);function H(){localStorage.setItem(J,JSON.stringify(u.groups))}function K(){const e=localStorage.getItem(J);return e?JSON.parse(e):null}E(b,e=>{if(u.groups.length)return;const t=K();t&&t.length>0?u.groups=t.filter(s=>e.includes(s)):u.groups=e.filter(s=>s!=="Rodízios")},{immediate:!0}),E(()=>u.groups,()=>{H()},{deep:!0});function Q(e){const t=u.groups.indexOf(e);t===-1?u.groups.push(e):u.groups.splice(t,1)}function j(){F.value?u.groups=[]:u.groups=[...b.value]}const M=D(()=>{const e=u.search.trim();let t=fe(_.allEvents||[],u);if(N.query.next==="true"){const n=new Date;t=t.filter(i=>new Date(i.date)>n)}return t=t.filter(n=>u.groups.includes(n.group)).filter(n=>!n.noDate),t}),A=D(()=>{let e;if(h.value){const s=h.value.date;e=M.value.filter(n=>{const i=new Date(n.date);return i.getUTCFullYear()===s.getFullYear()&&i.getUTCMonth()===s.getMonth()&&i.getUTCDate()===s.getDate()})}else e=M.value.filter(s=>{const n=new Date(s.date);return n.getUTCFullYear()===g.value&&n.getUTCMonth()===d.value});const t=new Map;for(const s of e){const i=new Date(s.date).toISOString().split("T")[0];t.has(i)||t.set(i,new Map);const c=t.get(i);c.has(s.title)||c.set(s.title,[]),c.get(s.title).push(s)}return Array.from(t.entries()).sort(([s],[n])=>new Date(s)-new Date(n))}),G=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],W=D(()=>`${G[d.value]} ${g.value}`),Z=D(()=>{const e=[],t=new Date(g.value,d.value,1).getDay(),s=new Date(g.value,d.value+1,0).getDate(),n=new Date(g.value,d.value,0).getDate();for(let r=t-1;r>=0;r--)e.push({dayNumber:n-r,isPrevMonth:!0,isNextMonth:!1,isToday:!1,hasEvent:!1,events:[]});for(let r=1;r<=s;r++){const v=new Date(g.value,d.value,r),w=M.value.filter(oe=>{const S=new Date(oe.date);return S.getUTCDate()===r&&S.getUTCMonth()===d.value&&S.getUTCFullYear()===g.value});e.push({dayNumber:r,date:v,isPrevMonth:!1,isNextMonth:!1,isToday:v.toDateString()===C.toDateString(),hasEvent:w.length>0,events:w})}const i=42-e.length;for(let r=1;r<=i;r++)e.push({dayNumber:r,isPrevMonth:!1,isNextMonth:!0,isToday:!1,hasEvent:!1,events:[]});const c=[];for(;e.length>0;)c.push(e.splice(0,7));return c});function ee(e){const t=new Date(e),s=t.getUTCDate(),n=G[t.getUTCMonth()],i=t.getUTCFullYear();return`${s} de ${n} de ${i}`}function k(e){d.value+=e,d.value<0?(d.value=11,g.value--):d.value>11&&(d.value=0,g.value++),h.value=null}function te(e){return{"prev-month-day":e.isPrevMonth||e.isNextMonth,today:e.isToday,"has-event":e.hasEvent,"selected-day":h.value&&h.value.date&&e.date&&h.value.date.toDateString()===e.date.toDateString()}}function ne(e){!e.isPrevMonth&&!e.isNextMonth&&(h.value&&h.value.date.toDateString()===e.date.toDateString()?h.value=null:h.value=e)}function se(e){return h.value?e.some(t=>{const s=new Date(t.date),n=h.value.date;return s.getUTCFullYear()===n.getFullYear()&&s.getUTCMonth()===n.getMonth()&&s.getUTCDate()===n.getDate()}):!1}const ae=e=>{const t=`https://www.google.com/calendar/event?eid=${e.htmlLink}`;window.open(t,"_blank")};function le(e){const t=new Set;for(const s of e)s.group&&t.add(s.group);return[...t]}const Y=["#d6b8c1","#d1c965","#cdb8d1","#aed4d7","#b3a9a5","a9c6aa","#d39a8f","#b0a2cc","#d28fa9","#b2d29f","#d1b05e","#84c9cc","#d1be83","#92c2be","#a3b1b5","#bdc75d"],$={Reuniões:"#c4d7b9",Atendimentos:"#b4d0e3",Rodízios:"#e6b97f",Outros:"#c3bfe0"},T=p({});function P(e){if($[e])return $[e];if(!T.value[e]){const s=Array.from(new Set(_.allEvents.map(n=>n.group).filter(n=>n!==null))).indexOf(e);T.value[e]=Y[s%Y.length]}return T.value[e]}function z(e){return{backgroundColor:P(e)}}E(()=>_.allEvents,e=>{e&&e.length>0&&(U.value=!1)},{immediate:!0});const O=p(0),L=p(0);function R(e){O.value=e.touches?e.touches[0].clientX:e.clientX}function I(e){L.value=e.changedTouches?e.changedTouches[0].clientX:e.clientX;const t=L.value-O.value;t>V?k(-1):t<-V&&k(1)}return(e,t)=>{const s=re;return l(),o("div",null,[U.value?(l(),de(s,{key:0})):(l(),o("div",ye,[a("div",{class:"calendar-panel",onTouchstart:R,onTouchend:I,onMousedown:R,onMouseup:I},[a("div",De,[a("i",{class:"las la-chevron-left",onClick:t[0]||(t[0]=n=>k(-1))}),a("h2",_e,f(W.value),1),a("i",{class:"las la-chevron-right",onClick:t[1]||(t[1]=n=>k(1))})]),a("table",be,[t[3]||(t[3]=a("thead",null,[a("tr",null,[a("th",null,"Dom"),a("th",null,"Seg"),a("th",null,"Ter"),a("th",null,"Qua"),a("th",null,"Qui"),a("th",null,"Sex"),a("th",null,"Sáb")])],-1)),a("tbody",null,[(l(!0),o(m,null,y(Z.value,(n,i)=>(l(),o("tr",{key:i},[(l(!0),o(m,null,y(n,c=>(l(),o("td",{key:c.date,class:B(te(c)),onClick:r=>ne(c)},[a("div",Ce,[a("div",Me,f(c.dayNumber),1),c.events.length?(l(),o("div",Te,[(l(!0),o(m,null,y(le(c.events),r=>(l(),o("span",{key:r,class:"event-indicator",style:x({backgroundColor:P(r)})},null,4))),128))])):X("",!0)])],10,ke))),128))]))),128))])])],32),a("div",we,[a("div",Se,[a("div",Ee,[a("span",{class:"chip",onClick:j},[F.value?(l(),o("i",xe)):(l(),o("i",Ne)),t[4]||(t[4]=q(" Todos ",-1))]),(l(!0),o(m,null,y(b.value,n=>(l(),o("span",{key:n,class:"chip",style:x(z(n)),onClick:i=>Q(n)},[u.groups.includes(n)?(l(),o("i",Fe)):(l(),o("i",Ae)),q(" "+f(n),1)],12,Ue))),128))]),a("div",Ge,[he(a("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>u.search=n),type:"text",placeholder:"Buscar eventos...",class:"search-input"},null,512),[[ve,u.search]]),t[5]||(t[5]=a("i",{class:"las la-search search-icon"},null,-1))]),Object.keys(A.value).length?(l(),o("div",Ye,[(l(!0),o(m,null,y(A.value,([n,i])=>(l(),o("div",{key:n},[a("h4",$e,f(ee(n)),1),a("ul",Pe,[(l(!0),o(m,null,y(i,([c,r])=>(l(),o("li",{key:c,class:B({"selected-event":se(r)}),style:x(z(r[0].group))},[a("strong",null,f(c),1),a("ul",ze,[(l(!0),o(m,null,y(r,v=>(l(),o("li",{key:v.id,onClick:w=>ae(v)},[a("p",null,[a("b",null,[a("i",null,f(v.formatTime)+f(v.formatTime?" - ":"")+f(v.formatDate),1)]),t[6]||(t[6]=a("i",{style:{"margin-left":"5px"},class:"las la-external-link-alt","aria-label":"Google Agenda",title:"Este link abrirá em uma nova aba."},null,-1))]),a("p",null,f(v.locale),1),v.desc?(l(),o("p",{key:0,innerHTML:pe(me)(v.desc)},null,8,Le)):X("",!0)],8,Oe))),128))])],6))),128))])]))),128))])):(l(),o("p",Re,"Nenhum evento agendado."))])])]))])}}},Ve=ue(Ie,[["__scopeId","data-v-62bba8fc"]]);export{Ve as default};
