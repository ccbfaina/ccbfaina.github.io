import{L as ft}from"./ZdkOge9K.js";import{_ as bt,y as mt,r as h,A as Q,f as X,D as Y,h as T,P as yt,c as i,C as Z,p as f,F as g,a as e,m as d,n as A,t as r,i as c,v as V,E as _,k as S,I as tt,e as C,L as gt,g as kt,Q as F,R as _t,l as St,o as a,J as Ct,O as xt}from"./Da9JZ9Vm.js";import{d as et,a as zt,S as ht,E as Tt}from"./DL35dPyn.js";const At={class:"tabs-container print-hide"},Et={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},Lt=["aria-selected"],Vt={class:"badge"},Dt=["aria-selected"],Ft=["aria-selected"],$t={class:"tab-content"},qt={id:"tab-content-lista",role:"tabpanel"},wt={class:"text-center"},Ut={key:0},jt={key:1},It={key:2},Mt={key:3},Ot={key:4},Bt={id:"tab-content-filters",role:"tabpanel"},Rt={class:"content"},Gt={class:"form-inline"},Pt={class:"form-group"},Nt={class:"row"},Ht={class:"form-group"},Wt={class:"row"},Jt=["value"],Kt={class:"form-group"},Qt={class:"row"},Xt=["value"],Yt={class:"form-group"},Zt={class:"flex gap-xs"},te={class:"form-group"},ee={class:"flex gap-xs"},le={class:"form-group",style:{"align-items":"flex-start"}},se=["id","value"],ne=["for"],ae={class:"form-group",style:{"text-align":"right"}},oe=["disabled"],ie={class:"form-inline",style:{gap:"1rem","margin-top":"1rem"}},re={id:"tab-content-print",role:"tabpanel"},de={class:"text-center flex col items-center gap-4"},ue={class:"p form-group flex items-center aling-center"},pe={class:"a4 print-hide"},ce={class:"settings-list print-hide"},ve=["onClick"],fe={key:0,class:"print-page"},be={class:"table-container"},me={colspan:"5"},ye={class:"flex items-center aling-center justify-center"},ge=["onClick"],ke={key:0},_e={key:0},Se={key:0},Ce=["innerHTML"],xe={__name:"calendar",setup(ze){const{lista:b}=mt(),u=h("lista"),l=Q({fontSize:17,search:"",title:"",locale:"",date:"",start:"",end:"",calendars:[]}),lt=kt(),st=St(),E=h(!1),nt=()=>{const n=lt.query||{};["search","title","locale","date","start","end"].forEach(k=>{n[k]!==void 0&&(l[k]=n[k])}),n.calendars&&(l.calendars=Array.isArray(n.calendars)?n.calendars:n.calendars.split(",").filter(Boolean));const{today:o,future:y}=F();l.start||(l.start=o),l.end||(l.end=y)},at=et(()=>{const n=Object.fromEntries(Object.entries(l).filter(([t,o])=>t==="calendars"?o.length:o!==""&&o!=null).map(([t,o])=>Array.isArray(o)?[t,o.join(",")]:[t,o]));st.replace({query:n})},200),D=et(()=>{E.value=!0;const n=_t(b.allEvents||[],l);dt(n),E.value=!1},200);function ot(){D()}X(()=>{nt(),D()}),Y(l,()=>{at(),D()},{deep:!0});function x(n){if(n==="calendars")l.calendars=[];else if(n==="date"){l.date="";const{today:t,future:o}=F();l.start=t,l.end=o}else if(n==="start"||n==="end"){const{today:t,future:o}=F();l.start=t,l.end=o}else l[n]=""}function $(n,t){return Array.from(new Set(n.map(o=>o[t]).filter(o=>typeof o=="string"&&o.trim())))}const it=T(()=>$(L.value,"title")),rt=T(()=>$(L.value,"locale")),L=h([]),q=h([]);function dt(n){L.value=n;const t=Array.from(new Set(n.map(o=>o.title||"Sem título")));q.value=t}const v=T(()=>{const n={};return L.value.forEach(t=>{const o=t.title||"Sem título";(n[o]||(n[o]=[])).push(t)}),q.value.filter(t=>n[t]).map(t=>({title:t,items:n[t].slice().sort((o,y)=>o.onDate&&y.onDate?o.onDate-y.onDate:0)}))});function ut(){l.fontSize<10&&(l.fontSize=10),l.fontSize>25&&(l.fontSize=25),l.fontSize=Math.round(l.fontSize*10)/10}const w=n=>{var t;return(t=n==null?void 0:n.replace(/-$/,""))==null?void 0:t.trim()},pt=T(()=>{let n=0;return l.search&&n++,l.title&&n++,l.locale&&n++,l.date&&n++,l.calendars&&l.calendars.length>0&&n++,n}),ct=()=>{u.value="lista",setTimeout(()=>{window.print()},1e3)},m=Q({});Y(v,()=>{v.value&&v.value.forEach(n=>{n.title in m||(m[n.title]=!0)})},{immediate:!0});const U=n=>{u.value="print",m[n]=!m[n]},j=T(()=>v.value.length>0&&v.value.every(n=>m[n.title])),vt=n=>{v.value.forEach(t=>{m[t.title]=n})},z=h(null);return X(()=>{z.value=new zt({extensions:[ht],content:`
      <p>Oração Santa Ceia</p>
      <p><strong>Pão:</strong> "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo."</p>
      <p><strong>Cálice:</strong> "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo."</p>
    `,editable:!0})}),yt(()=>{z.value&&z.value.destroy()}),(n,t)=>{var y,k,I,M,O,B,R,G,P,N,H,W,J,K;const o=ft;return a(),i("div",{style:gt({fontSize:(l.fontSize?l.fontSize:17)+"px"})},[f(b).loading?(a(),Z(o,{key:0})):(a(),i(g,{key:1},[e("div",At,[e("nav",Et,[e("span",{id:"tab-filters","aria-selected":u.value==="filters",role:"tab",type:"button",class:A(["tab",{active:u.value==="filters"}]),style:{position:"relative"},onClick:t[0]||(t[0]=s=>u.value="filters")},[e("span",Vt,r(pt.value),1),t[19]||(t[19]=e("i",{class:"la la-filter z-10"},null,-1))],10,Lt),e("span",{id:"tab-print","aria-selected":u.value==="print",role:"tab",type:"button",class:A(["tab",{active:u.value==="print"}]),onClick:t[1]||(t[1]=s=>u.value="print")},t[20]||(t[20]=[e("i",{class:"la la-print"},null,-1)]),10,Dt),e("span",{id:"tab-lista","aria-selected":u.value==="lista",role:"tab",type:"button",class:A(["tab",{active:u.value==="lista"}]),onClick:t[2]||(t[2]=s=>u.value="lista")}," Lista ",10,Ft)])]),e("div",null,[e("div",$t,[c(e("div",qt,[e("div",wt,[t[21]||(t[21]=e("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),l.calendars.length?(a(),i("div",Ut,[e("b",null,r(l.calendars.map(w).join(", ")),1)])):d("",!0),l.locale?(a(),i("span",jt,[e("b",null,r(w(l.locale)),1)])):d("",!0),l.date?(a(),i("span",It," Data: "+r((M=(I=(k=(y=l.date)==null?void 0:y.split("T")[0])==null?void 0:k.split("-"))==null?void 0:I.reverse())==null?void 0:M.join("/")),1)):d("",!0),!l.date&&(l.start||l.end)?(a(),i("div",Mt," Período: "+r((G=(R=(B=(O=l.start)==null?void 0:O.split("T")[0])==null?void 0:B.split("-"))==null?void 0:R.reverse())==null?void 0:G.join("/"))+" à "+r((W=(H=(N=(P=l.end)==null?void 0:P.split("T")[0])==null?void 0:N.split("-"))==null?void 0:H.reverse())==null?void 0:W.join("/")),1)):d("",!0),l.search?(a(),i("div",Ot,r(l.search),1)):d("",!0)])],512),[[V,u.value==="lista"]]),c(e("div",Bt,[e("div",Rt,[e("div",Gt,[e("div",null,[e("div",Pt,[t[22]||(t[22]=e("label",{for:"search"},"Pesquisar",-1)),e("div",Nt,[c(e("input",{id:"search","onUpdate:modelValue":t[3]||(t[3]=s=>l.search=s),type:"text",placeholder:"Buscar itens..."},null,512),[[_,l.search]]),l.search?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar pesquisa",type:"button",onClick:t[4]||(t[4]=s=>x("search"))}," × ")):d("",!0)])]),e("div",Ht,[t[24]||(t[24]=e("label",{for:"title"},"Título",-1)),e("div",Wt,[c(e("select",{id:"title","onUpdate:modelValue":t[5]||(t[5]=s=>l.title=s)},[t[23]||(t[23]=e("option",{value:""},"Todos os títulos",-1)),(a(!0),i(g,null,S(it.value,s=>(a(),i("option",{key:s,value:s},r(s),9,Jt))),128))],512),[[tt,l.title]]),l.title?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar título",type:"button",onClick:t[6]||(t[6]=s=>x("title"))}," × ")):d("",!0)])]),e("div",Kt,[t[26]||(t[26]=e("label",{for:"locale"},"Local",-1)),e("div",Qt,[c(e("select",{id:"locale","onUpdate:modelValue":t[7]||(t[7]=s=>l.locale=s)},[t[25]||(t[25]=e("option",{value:""},"Todos os locais",-1)),(a(!0),i(g,null,S(rt.value,s=>(a(),i("option",{key:s,value:s},r(s),9,Xt))),128))],512),[[tt,l.locale]]),l.locale?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar local",type:"button",onClick:t[8]||(t[8]=s=>x("locale"))}," × ")):d("",!0)])]),e("div",Yt,[t[27]||(t[27]=e("label",{for:"date"},"Data",-1)),e("div",Zt,[c(e("input",{id:"date","onUpdate:modelValue":t[9]||(t[9]=s=>l.date=s),type:"date"},null,512),[[_,l.date]]),l.date?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar data",type:"button",onClick:t[10]||(t[10]=s=>x("date"))}," × ")):d("",!0)])]),e("div",te,[t[28]||(t[28]=e("label",null,"Intervalo de Datas",-1)),e("div",ee,[c(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.start=s),type:"date"},null,512),[[_,l.start]]),c(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>l.end=s),type:"date"},null,512),[[_,l.end]]),l.start||l.end?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar datas",type:"button",onClick:t[13]||(t[13]=s=>x("date"))}," × ")):d("",!0)])])]),e("div",null,[e("div",le,[t[29]||(t[29]=e("label",null,"Agendas",-1)),e("div",null,[(a(!0),i(g,null,S(f(b).eventsCalendars,s=>(a(),i("div",{key:s},[c(e("input",{id:"cat-"+s,"onUpdate:modelValue":t[14]||(t[14]=p=>l.calendars=p),type:"checkbox",value:s,style:{margin:"5px 5px 0 0"}},null,8,se),[[Ct,l.calendars]]),e("label",{for:"cat-"+s,style:{"margin-bottom":"0"}},r(s),9,ne)]))),128))])]),e("div",ae,[t[30]||(t[30]=e("label",null,null,-1)),e("button",{class:"success",disabled:E.value||f(b).loading,onClick:t[15]||(t[15]=s=>ot())},r(E.value||f(b).loading?"Atualizando...":"Aplicar"),9,oe)])])]),e("div",ie,[e("span",null,[t[31]||(t[31]=e("i",{class:"la la-calendar-check"},null,-1)),C(" "+r(((K=(J=f(b))==null?void 0:J.calendars)==null?void 0:K.length)||0),1)]),e("span",null,[t[32]||(t[32]=e("i",{class:"la la-tasks"},null,-1)),C(" "+r(Array.isArray(f(b).eventsFiltered)?f(b).eventsFiltered.length:0),1)])])])],512),[[V,u.value==="filters"]]),c(e("div",re,[e("div",de,[t[36]||(t[36]=e("b",{class:"mb-4 p"},"Ajustes de impressão:",-1)),e("div",ue,[t[33]||(t[33]=e("label",null,"Fonte",-1)),c(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>l.fontSize=s),type:"range",min:"10",max:"25",step:"0.1",placeholder:"Font Size"},null,512),[[_,l.fontSize,void 0,{number:!0}]]),c(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>l.fontSize=s),type:"number",min:"10",max:"25",step:"0.1",style:{width:"70px","margin-left":"8px"},onInput:ut},null,544),[[_,l.fontSize,void 0,{number:!0}]]),t[34]||(t[34]=C(" px "))]),e("div",{class:"p"},[e("button",{class:"success",onClick:ct},t[35]||(t[35]=[e("i",{class:"la la-print"},null,-1),C(" Imprimir ")]))])]),e("div",pe,[e("div",ce,[t[37]||(t[37]=e("b",null,"Lista",-1)),e("div",null,[e("i",{class:A(["la",j.value?"la-toggle-on":"la-toggle-off"]),title:"Ocultar todos",onClick:t[18]||(t[18]=s=>vt(!j.value))},null,2)])]),(a(!0),i(g,null,S(v.value,s=>(a(),i("div",{key:s.title,class:"settings-list print-hide"},[C(r(s.title)+" ",1),e("i",{class:A(["la",m[s.title]?"la-toggle-on":"la-toggle-off"]),title:"Alterar visibilidade",onClick:p=>U(s.title)},null,10,ve)]))),128))])],512),[[V,u.value==="print"]])])]),v.value.length?(a(),i("div",fe,[(a(!0),i(g,null,S(v.value,s=>c((a(),i("div",{key:s.title,class:"table-list"},[e("div",be,[e("table",null,[e("thead",null,[e("tr",null,[e("th",me,[e("div",ye,[C(r(s.title)+" ",1),e("i",{class:"la la-toggle-on print-hide",style:{cursor:"pointer"},onClick:p=>U(s.title)},null,8,ge)])])])]),e("tbody",null,[(a(!0),i(g,null,S(s.items,p=>(a(),i("tr",{key:p.id},[e("td",null,[p.formatDate?(a(),i("span",ke,r(p.formatDate),1)):d("",!0)]),e("td",null,[p.formatWeek?(a(),i("span",_e,r(p.formatWeek),1)):d("",!0)]),e("td",null,[p.formatTime?(a(),i("span",Se,r(p.formatTime),1)):d("",!0)]),e("td",null,r(p.locale),1),e("td",null,[p.desc?(a(),i("span",{key:0,innerHTML:f(xt)(p.desc)},null,8,Ce)):d("",!0)])]))),128))])])])])),[[V,m[s.title]]])),128)),z.value?(a(),Z(f(Tt),{key:0,editor:z.value,class:"editable"},null,8,["editor"])):d("",!0)])):d("",!0)],64))],4)}}},Le=bt(xe,[["__scopeId","data-v-2acea4dc"]]);export{Le as default};
