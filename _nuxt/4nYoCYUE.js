import{_ as q,g as w,l as R,x as z,r as x,U as M,f as T,D as _,c as n,o as r,a as t,i as d,z as f,E as m,I as j,F as k,k as F,t as v,m as u,J as I,e as V,V as y}from"./Cox_WgAn.js";import{d as A}from"./BcZQbp_F.js";const N={class:"content"},O={class:"form-inline"},S={class:"form-group"},J={class:"row"},P={class:"form-group"},G={class:"row"},H={class:"form-group"},K={class:"row"},Q=["value"],W={class:"form-group"},X={class:"flex gap-xs"},Y={class:"form-group"},Z={class:"flex gap-xs"},h={class:"form-group",style:{"align-items":"flex-start"}},ee=["id","value"],te=["for"],le={class:"form-group",style:{"text-align":"right"}},ae=["disabled"],se={class:"form-inline",style:{gap:"1rem","margin-top":"1rem"}},oe={__name:"filters-lista",emits:["update:filtered"],setup(ne,{emit:C}){const L=C,U=w(),D=R(),{lista:i}=z(),c=x(!1),l=x({search:"",title:"",locale:"",date:"",start:"",end:"",calendars:[]}),B=()=>{const s=U.query||{};["search","title","locale","date","start","end"].forEach(a=>{s[a]!==void 0&&(l.value[a]=s[a])}),s.calendars&&(l.value.calendars=Array.isArray(s.calendars)?s.calendars:s.calendars.split(",").filter(Boolean));const{today:o,future:b}=y();l.value.start||(l.value.start=o),l.value.end||(l.value.end=b)},E=A(()=>{const s=Object.fromEntries(Object.entries(l.value).filter(([e,o])=>e==="calendars"?o.length:o!==""&&o!=null).map(([e,o])=>Array.isArray(o)?[e,o.join(",")]:[e,o]));D.replace({query:s})},200),g=A(()=>{c.value=!0;const s=M(i.allEvents||[],l.value);L("update:filtered",s),c.value=!1},200);T(()=>{B(),g()}),_(l,()=>{E(),g()},{deep:!0});function p(s){if(s==="calendars")l.value.calendars=[];else if(s==="date"){l.value.date="";const{today:e,future:o}=y();l.value.start=e,l.value.end=o}else if(s==="start"||s==="end"){const{today:e,future:o}=y();l.value.start=e,l.value.end=o}else l.value[s]=""}return(s,e)=>{var o,b;return r(),n("div",N,[t("div",O,[t("div",null,[t("div",S,[e[13]||(e[13]=t("label",{for:"search"},"Pesquisar",-1)),t("div",J,[d(t("input",{id:"search","onUpdate:modelValue":e[0]||(e[0]=a=>l.value.search=a),type:"text",placeholder:"Buscar itens..."},null,512),[[m,l.value.search]]),l.value.search?(r(),n("button",{key:0,class:"btn-clear","aria-label":"Limpar pesquisa",type:"button",onClick:e[1]||(e[1]=a=>p("search"))}," × ")):f("",!0)])]),t("div",P,[e[14]||(e[14]=t("label",{for:"title"},"Título",-1)),t("div",G,[d(t("input",{id:"title","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.title=a),type:"text",placeholder:"Filtrar por título..."},null,512),[[m,l.value.title]]),l.value.title?(r(),n("button",{key:0,class:"btn-clear","aria-label":"Limpar título",type:"button",onClick:e[3]||(e[3]=a=>p("title"))}," × ")):f("",!0)])]),t("div",H,[e[16]||(e[16]=t("label",{for:"locale"},"Local",-1)),t("div",K,[d(t("select",{id:"locale","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.locale=a)},[e[15]||(e[15]=t("option",{value:""},"Todos os locais",-1)),(r(!0),n(k,null,F(u(i).eventsLocales,a=>(r(),n("option",{key:a,value:a},v(a),9,Q))),128))],512),[[j,l.value.locale]]),l.value.locale?(r(),n("button",{key:0,class:"btn-clear","aria-label":"Limpar local",type:"button",onClick:e[5]||(e[5]=a=>p("locale"))}," × ")):f("",!0)])]),t("div",W,[e[17]||(e[17]=t("label",{for:"date"},"Data",-1)),t("div",X,[d(t("input",{id:"date","onUpdate:modelValue":e[6]||(e[6]=a=>l.value.date=a),type:"date"},null,512),[[m,l.value.date]]),l.value.date?(r(),n("button",{key:0,class:"btn-clear","aria-label":"Limpar data",type:"button",onClick:e[7]||(e[7]=a=>p("date"))}," × ")):f("",!0)])]),t("div",Y,[e[18]||(e[18]=t("label",null,"Intervalo de Datas",-1)),t("div",Z,[d(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>l.value.start=a),type:"date"},null,512),[[m,l.value.start]]),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>l.value.end=a),type:"date"},null,512),[[m,l.value.end]])]),l.value.start||l.value.end?(r(),n("button",{key:0,class:"btn-clear","aria-label":"Limpar datas",type:"button",onClick:e[10]||(e[10]=a=>p("date"))}," × ")):f("",!0)])]),t("div",null,[t("div",h,[e[19]||(e[19]=t("label",null,"Agendas",-1)),t("div",null,[(r(!0),n(k,null,F(u(i).eventsCalendars,a=>(r(),n("div",{key:a},[d(t("input",{id:"cat-"+a,"onUpdate:modelValue":e[11]||(e[11]=$=>l.value.calendars=$),type:"checkbox",value:a,style:{margin:"5px 5px 0 0"}},null,8,ee),[[I,l.value.calendars]]),t("label",{for:"cat-"+a,style:{"margin-bottom":"0"}},v(a),9,te)]))),128))])]),t("div",le,[e[20]||(e[20]=t("label",null,null,-1)),t("button",{class:"success",disabled:c.value||u(i).loading,onClick:e[12]||(e[12]=a=>s.applyFilters())},v(c.value||u(i).loading?"Atualizando...":"Aplicar"),9,ae)])])]),t("div",se,[t("span",null,[e[21]||(e[21]=t("i",{class:"la la-calendar-check"},null,-1)),V(" "+v(((b=(o=u(i))==null?void 0:o.calendars)==null?void 0:b.length)||0),1)]),t("span",null,[e[22]||(e[22]=t("i",{class:"la la-tasks"},null,-1)),V(" "+v(Array.isArray(u(i).eventsFiltered)?u(i).eventsFiltered.length:0),1)])]),t("pre",null,v(u(i).filters),1)])}}},ue=q(oe,[["__scopeId","data-v-f85b9a14"]]);export{ue as F};
