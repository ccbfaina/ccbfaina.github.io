import{_ as L,y as I,r as f,h as p,c as r,a as s,t as g,F as D,k as m,i as J,A as O,o as u,n as S,m as x}from"./DiDszO3n.js";const Q={class:"calendar-wrapper"},R={class:"calendar-panel"},V={class:"calendar-header"},H={class:"month-year"},j={class:"calendar-table"},G=["onClick"],K={class:"day-number"},q={key:0,class:"event-indicator"},W={class:"events-panel"},X={class:"events-list-container"},Z={class:"search-container"},ee={key:0},te={class:"event-date-title"},ne={class:"events-list"},ae={class:"sub-events-list"},se=["innerHTML"],le={key:1,class:"no-events-message"},oe={__name:"agenda",setup(re){const{lista:N}=I(),y=f(N.allEvents),_=f(""),M=new Date,i=f(M.getMonth()),d=f(M.getFullYear()),c=f(null),b=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],E=p(()=>`${b[i.value]} ${d.value}`);function h(t){return t?t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):""}const T=p(()=>{const t=_.value.trim();if(!t)return y.value;if(t.includes("|"))try{const e=new RegExp(t,"i");return y.value.filter(n=>{const a=`${h(n.title||"")} ${h(n.locale||"")} ${h(n.desc||"")}`;return e.test(a)})}catch(e){return console.error("Regex inválida:",e),[]}else{const n=h(t).replace(/\bou\b/gi,",").split(/,|\s+/).map(a=>a.trim()).filter(Boolean).map(a=>new RegExp(`${a}`,"i"));return y.value.filter(a=>{const l=`${h(a.title||"")} ${h(a.locale||"")} ${h(a.desc||"")}`;return n.every(v=>v.test(l))})}}),k=p(()=>{let t;if(c.value){const e=c.value.date;t=T.value.filter(n=>{const a=new Date(n.date);return a.getUTCFullYear()===e.getFullYear()&&a.getUTCMonth()===e.getMonth()&&a.getUTCDate()===e.getDate()})}else t=T.value.filter(e=>{const n=new Date(e.date);return n.getUTCFullYear()===d.value&&n.getUTCMonth()===i.value});return t.reduce((e,n)=>{const a=new Date(n.date),l=`${a.getUTCFullYear()}-${(a.getUTCMonth()+1).toString().padStart(2,"0")}-${a.getUTCDate().toString().padStart(2,"0")}`;return e[l]||(e[l]={}),e[l][n.title]||(e[l][n.title]=[]),e[l][n.title].push(n),e},{})}),F=p(()=>{const t=[],e=new Date(d.value,i.value,1).getDay(),n=new Date(d.value,i.value+1,0).getDate(),a=new Date(d.value,i.value,0).getDate();for(let o=e-1;o>=0;o--)t.push({dayNumber:a-o,isPrevMonth:!0,isNextMonth:!1,isToday:!1,hasEvent:!1,events:[]});for(let o=1;o<=n;o++){const U=new Date(d.value,i.value,o),$=T.value.filter(A=>{const C=new Date(A.date);return C.getUTCDate()===o&&C.getUTCMonth()===i.value&&C.getUTCFullYear()===d.value});t.push({dayNumber:o,date:U,isPrevMonth:!1,isNextMonth:!1,isToday:U.toDateString()===M.toDateString(),hasEvent:$.length>0,events:$})}const l=42-t.length;for(let o=1;o<=l;o++)t.push({dayNumber:o,isPrevMonth:!1,isNextMonth:!0,isToday:!1,hasEvent:!1,events:[]});const v=[];for(;t.length>0;)v.push(t.splice(0,7));return v});function Y(t){const e=new Date(t),n=e.getUTCDate(),a=b[e.getUTCMonth()],l=e.getUTCFullYear();return`${n} de ${a} de ${l}`}function w(t){i.value+=t,i.value<0?(i.value=11,d.value--):i.value>11&&(i.value=0,d.value++),c.value=null}function P(t){return{"prev-month-day":t.isPrevMonth||t.isNextMonth,today:t.isToday,"has-event":t.hasEvent,"selected-day":c.value&&c.value.date&&t.date&&c.value.date.toDateString()===t.date.toDateString()}}function B(t){!t.isPrevMonth&&!t.isNextMonth&&(c.value&&c.value.date.toDateString()===t.date.toDateString()?c.value=null:c.value=t)}function z(t){return c.value?t.some(e=>{const n=new Date(e.date),a=c.value.date;return n.getUTCFullYear()===a.getFullYear()&&n.getUTCMonth()===a.getMonth()&&n.getUTCDate()===a.getDate()}):!1}return(t,e)=>(u(),r("div",Q,[s("div",R,[s("div",V,[s("i",{class:"las la-chevron-left",onClick:e[0]||(e[0]=n=>w(-1))}),s("h2",H,g(E.value),1),s("i",{class:"las la-chevron-right",onClick:e[1]||(e[1]=n=>w(1))})]),s("table",j,[e[3]||(e[3]=s("thead",null,[s("tr",null,[s("th",null,"Dom"),s("th",null,"Seg"),s("th",null,"Ter"),s("th",null,"Qua"),s("th",null,"Qui"),s("th",null,"Sex"),s("th",null,"Sáb")])],-1)),s("tbody",null,[(u(!0),r(D,null,m(F.value,(n,a)=>(u(),r("tr",{key:a},[(u(!0),r(D,null,m(n,l=>(u(),r("td",{key:l.date,class:S(P(l)),onClick:v=>B(l)},[s("div",K,g(l.dayNumber),1),l.events.length?(u(),r("div",q)):x("",!0)],10,G))),128))]))),128))])])]),s("div",W,[s("div",X,[e[5]||(e[5]=s("h3",null,"Eventos do Mês",-1)),s("div",Z,[J(s("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>_.value=n),placeholder:"Buscar eventos...",class:"search-input"},null,512),[[O,_.value]]),e[4]||(e[4]=s("i",{class:"las la-search search-icon"},null,-1))]),Object.keys(k.value).length?(u(),r("div",ee,[(u(!0),r(D,null,m(k.value,(n,a)=>(u(),r("div",{key:a},[s("h4",te,g(Y(a)),1),s("ul",ne,[(u(!0),r(D,null,m(n,(l,v)=>(u(),r("li",{key:v,class:S({"selected-event":z(l)})},[s("strong",null,g(v),1),s("ul",ae,[(u(!0),r(D,null,m(l,o=>(u(),r("li",{key:o.id},[s("p",null,[s("i",null,g(o.formatDate)+" - "+g(o.formatTime),1)]),s("p",null,g(o.locale),1),o.desc?(u(),r("p",{key:0,innerHTML:o.desc},null,8,se)):x("",!0)]))),128))])],2))),128))])]))),128))])):(u(),r("p",le,"Nenhum evento agendado para este mês."))])])]))}},ie=L(oe,[["__scopeId","data-v-d9d83904"]]);export{ie as default};
