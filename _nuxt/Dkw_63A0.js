import{_ as m,s as v,f as b,c as e,a as t,e as i,t as k,m as o,z as C,o as n}from"./BeKWUAAg.js";const y={key:0},N=["disabled"],A={key:0},P={key:1},w={key:1},x={key:0},I={key:1},B={__name:"settings",setup(q){const{notifications:a,pendingConfigsCount:u,install:r}=v();function d(){navigator.share?navigator.share({title:"Agenda CCB",text:"Acesse o aplicativo Agenda CCB",url:"https://faina.ccbgo.org.br"}):alert("Compartilhamento não suportado neste navegador.")}async function c(){if(!("Notification"in window)){console.warn("Este navegador não suporta notificações."),alert("Este navegador não suporta notificações.");return}a.status="loading";try{const l=await Notification.requestPermission();l==="granted"?a.status="granted":l==="denied"?a.status="denied":a.status="default"}catch(l){console.error("Erro ao solicitar permissão de notificação:",l),a.status="default"}}function p(){r.deferredPrompt&&(r.deferredPrompt.prompt(),r.deferredPrompt.userChoice.then(({outcome:l})=>{l==="accepted"?(console.log("Usuário aceitou instalar o PWA."),r.canInstall=!1,r.deferredPrompt=null):console.log("Usuário recusou instalar o PWA.")}))}function f(){console.log(`Seu token de notificação é: ${a.fcmToken}`)}function g(){alert("Para ativar as notificações, vá nas configurações do seu navegador e permita notificações para este aplicativo.")}return b(()=>{"Notification"in window&&(a.status=Notification.permission)}),(l,s)=>(n(),e("div",null,[t("div",null,[t("button",{class:"action-button",onClick:d},s[0]||(s[0]=[t("i",{class:"la la-share-alt"},null,-1),i(" Compartilhar aplicativo ")]))]),s[14]||(s[14]=t("hr",{class:"section-separator"},null,-1)),t("div",null,k(o(u)>0?`Você tem ${o(u)} configuração(ões) pendente(s).`:"Todas as configurações estão atualizadas."),1),s[15]||(s[15]=t("hr",{class:"section-separator"},null,-1)),t("div",null,[t("section",null,[s[7]||(s[7]=t("h2",null,[t("i",{class:"la la-bell text-blue-500"}),i(" Permissões")],-1)),o(a).status==="default"||o(a).status==="loading"?(n(),e("div",y,[s[2]||(s[2]=t("p",{class:"info-message"}," Deseja receber atualizações importantes e lembretes? ",-1)),t("button",{class:"action-button primary",disabled:o(a).status==="loading",onClick:c},[s[1]||(s[1]=t("i",{class:"la la-bell"},null,-1)),o(a).status==="loading"?(n(),e("span",A," Solicitando... ")):(n(),e("span",P," Ativar Notificações "))],8,N)])):o(a).status==="denied"?(n(),e("div",w,[s[4]||(s[4]=t("p",{class:"error-message"},[t("i",{class:"la la-exclamation-triangle"}),i(" As notificações estão bloqueadas no navegador. ")],-1)),t("button",{class:"action-button secondary",onClick:g},s[3]||(s[3]=[t("i",{class:"la la-unlock"},null,-1),i(" Desbloquear Notificações ")])),s[5]||(s[5]=t("p",{class:"instructions-text"}," Para reativar, você precisará desbloqueá-las manualmente nas configurações do seu navegador para este site. ",-1))])):o(a).status==="granted"?(n(),e("div",{key:2,onClick:f},s[6]||(s[6]=[t("p",{class:"success-message"},[t("i",{class:"la la-check-circle"}),i(" Notificações ativadas! ")],-1)]))):C("",!0)]),s[12]||(s[12]=t("hr",{class:"section-separator"},null,-1)),t("section",null,[s[11]||(s[11]=t("h2",null,[t("i",{class:"lab la-app-store-ios text-blue-500"}),i(" Instalar")],-1)),o(r).canInstall?(n(),e("div",x,[s[9]||(s[9]=t("p",{class:"info-message"},"Deseja instalar o app em seu dispositivo?",-1)),t("button",{class:"action-button",onClick:p},s[8]||(s[8]=[t("i",{class:"la la-download"},null,-1),i(" Instalar aplicativo ")]))])):(n(),e("div",I,s[10]||(s[10]=[t("p",{class:"success-message"},[t("i",{class:"la la-check-circle"}),i("O aplicativo já está instalado. ")],-1)])))]),s[13]||(s[13]=t("hr",{class:"section-separator"},null,-1))])]))}},E=m(B,[["__scopeId","data-v-1331f666"]]);export{E as default};
