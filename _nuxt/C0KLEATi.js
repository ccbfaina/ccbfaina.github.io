import{_ as Z,y as ee,A as te,r as y,h as _,B as ne,c as u,a as s,t as p,F as m,k as D,e as P,i as se,C as ae,o as c,n as z,m as B,D as E,p as le,E as oe}from"./C6h-nke6.js";const re={class:"calendar-wrapper"},ue={class:"calendar-panel"},ce={class:"calendar-header"},ie={class:"month-year"},de={class:"calendar-table"},ve=["onClick"],he={class:"day-content"},ge={class:"day-number"},fe={key:0,class:"event-indicators"},pe={class:"events-panel"},me={class:"events-list-container"},De={class:"chips-container"},ye={key:0,class:"las la-toggle-on"},_e={key:1,class:"las la-toggle-off"},be=["onClick"],Ce={key:0,class:"las la-toggle-on"},we={key:1,class:"las la-toggle-off"},ke={class:"search-container"},Me={key:0},Te={class:"event-date-title"},xe={class:"events-list"},Se={class:"sub-events-list"},Ne=["onClick"],Ee=["innerHTML"],Ue={key:1,class:"no-events-message"},$e={__name:"agenda",setup(Fe){const{lista:M}=ee(),I=te(),T=new Date,v=y(T.getMonth()),f=y(T.getFullYear()),h=y(null),x=y(""),g=y([]),b=_(()=>Array.from(new Set(M.allEvents.map(e=>e.group))).filter(e=>e).sort((e,t)=>e.localeCompare(t))),U=_(()=>g.value.length===b.value.length);ne(b,e=>{g.value.length===0&&(g.value=[...e])},{immediate:!0});function O(e){const t=g.value.indexOf(e);t===-1?g.value.push(e):g.value.splice(t,1)}function R(){U.value?g.value=[]:g.value=[...b.value]}const S=_(()=>{const e=x.value.trim();let t=M.allEvents;if(I.query.next==="true"){const a=new Date;t=t.filter(d=>new Date(d.date)>a)}if(t=t.filter(a=>g.value.includes(a.group)),!e)return t;const l=a=>`${C(a.title||"")} ${C(a.locale||"")} ${C(a.desc||"")} ${new Date(a.date).toLocaleDateString("pt-BR")}`,r=(a,d)=>d.every(X=>X.test(a)),i=(a,d)=>d.test(a),o=t.map(a=>({event:a,text:l(a)}));if(e.includes("|"))try{const a=new RegExp(e,"i");return o.filter(({text:d})=>i(d,a)).map(({event:d})=>d)}catch(a){return console.error("Regex inválida:",a),[]}const k=C(e).replace(/\bou/gi,",").split(/,|\s+/).filter(Boolean).map(a=>new RegExp(a,"i"));return o.filter(({text:a})=>r(a,k)).map(({event:a})=>a)}),$=_(()=>{let e;if(h.value){const n=h.value.date;e=S.value.filter(l=>{const r=new Date(l.date);return r.getUTCFullYear()===n.getFullYear()&&r.getUTCMonth()===n.getMonth()&&r.getUTCDate()===n.getDate()})}else e=S.value.filter(n=>{const l=new Date(n.date);return l.getUTCFullYear()===f.value&&l.getUTCMonth()===v.value});const t=new Map;for(const n of e){const r=new Date(n.date).toISOString().split("T")[0];t.has(r)||t.set(r,new Map);const i=t.get(r);i.has(n.title)||i.set(n.title,[]),i.get(n.title).push(n)}return Array.from(t.entries()).sort(([n],[l])=>new Date(n)-new Date(l))}),F=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],q=_(()=>`${F[v.value]} ${f.value}`),V=_(()=>{const e=[],t=new Date(f.value,v.value,1).getDay(),n=new Date(f.value,v.value+1,0).getDate(),l=new Date(f.value,v.value,0).getDate();for(let o=t-1;o>=0;o--)e.push({dayNumber:l-o,isPrevMonth:!0,isNextMonth:!1,isToday:!1,hasEvent:!1,events:[]});for(let o=1;o<=n;o++){const w=new Date(f.value,v.value,o),k=S.value.filter(a=>{const d=new Date(a.date);return d.getUTCDate()===o&&d.getUTCMonth()===v.value&&d.getUTCFullYear()===f.value});e.push({dayNumber:o,date:w,isPrevMonth:!1,isNextMonth:!1,isToday:w.toDateString()===T.toDateString(),hasEvent:k.length>0,events:k})}const r=42-e.length;for(let o=1;o<=r;o++)e.push({dayNumber:o,isPrevMonth:!1,isNextMonth:!0,isToday:!1,hasEvent:!1,events:[]});const i=[];for(;e.length>0;)i.push(e.splice(0,7));return i});function J(e){const t=new Date(e),n=t.getUTCDate(),l=F[t.getUTCMonth()],r=t.getUTCFullYear();return`${n} de ${l} de ${r}`}function G(e){v.value+=e,v.value<0?(v.value=11,f.value--):v.value>11&&(v.value=0,f.value++),h.value=null}function Q(e){return{"prev-month-day":e.isPrevMonth||e.isNextMonth,today:e.isToday,"has-event":e.hasEvent,"selected-day":h.value&&h.value.date&&e.date&&h.value.date.toDateString()===e.date.toDateString()}}function H(e){!e.isPrevMonth&&!e.isNextMonth&&(h.value&&h.value.date.toDateString()===e.date.toDateString()?h.value=null:h.value=e)}function j(e){return h.value?e.some(t=>{const n=new Date(t.date),l=h.value.date;return n.getUTCFullYear()===l.getFullYear()&&n.getUTCMonth()===l.getMonth()&&n.getUTCDate()===l.getDate()}):!1}function C(e){return e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):""}const K=e=>{const t=`https://www.google.com/calendar/event?eid=${e.htmlLink}`;window.open(t,"_blank")};function W(e){const t=new Set;for(const n of e)n.group&&t.add(n.group);return[...t]}const Y=["#c4d7b9","#b4d0e3","#d6b8c1","#d1c965","#cdb8d1","#c3bfe0","#e6b97f","#aed4d7","#b3a9a5","#a9c6aa","#d39a8f","#b0a2cc","#d28fa9","#b2d29f","#d1b05e","#84c9cc","#d1be83","#92c2be","#a3b1b5","#bdc75d"],N=y({});function A(e){if(!N.value[e]){const n=Array.from(new Set(M.allEvents.map(l=>l.group).filter(l=>l!==null))).indexOf(e);N.value[e]=Y[n%Y.length]}return N.value[e]}function L(e){return{backgroundColor:A(e)}}return(e,t)=>(c(),u("div",re,[s("div",ue,[s("div",ce,[s("i",{class:"las la-chevron-left",onClick:t[0]||(t[0]=n=>G(-1))}),s("h2",ie,p(q.value),1),s("i",{class:"las la-chevron-right",onClick:t[1]||(t[1]=n=>G(1))})]),s("table",de,[t[3]||(t[3]=s("thead",null,[s("tr",null,[s("th",null,"Dom"),s("th",null,"Seg"),s("th",null,"Ter"),s("th",null,"Qua"),s("th",null,"Qui"),s("th",null,"Sex"),s("th",null,"Sáb")])],-1)),s("tbody",null,[(c(!0),u(m,null,D(V.value,(n,l)=>(c(),u("tr",{key:l},[(c(!0),u(m,null,D(n,r=>(c(),u("td",{key:r.date,class:z(Q(r)),onClick:i=>H(r)},[s("div",he,[s("div",ge,p(r.dayNumber),1),r.events.length?(c(),u("div",fe,[(c(!0),u(m,null,D(W(r.events),i=>(c(),u("span",{key:i,class:"event-indicator",style:E({backgroundColor:A(i)})},null,4))),128))])):B("",!0)])],10,ve))),128))]))),128))])])]),s("div",pe,[s("div",me,[s("div",De,[s("span",{class:"chip",onClick:R},[U.value?(c(),u("i",ye)):(c(),u("i",_e)),t[4]||(t[4]=P(" Todos "))]),(c(!0),u(m,null,D(b.value,n=>(c(),u("span",{key:n,class:"chip",style:E(L(n)),onClick:l=>O(n)},[g.value.includes(n)?(c(),u("i",Ce)):(c(),u("i",we)),P(" "+p(n),1)],12,be))),128))]),s("div",ke,[se(s("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>x.value=n),type:"text",placeholder:"Buscar eventos...",class:"search-input"},null,512),[[ae,x.value]]),t[5]||(t[5]=s("i",{class:"las la-search search-icon"},null,-1))]),Object.keys($.value).length?(c(),u("div",Me,[(c(!0),u(m,null,D($.value,([n,l])=>(c(),u("div",{key:n},[s("h4",Te,p(J(n)),1),s("ul",xe,[(c(!0),u(m,null,D(l,([r,i])=>(c(),u("li",{key:r,class:z({"selected-event":j(i)}),style:E(L(i[0].group))},[s("strong",null,p(r),1),s("ul",Se,[(c(!0),u(m,null,D(i,o=>(c(),u("li",{key:o.id,onClick:w=>K(o)},[s("p",null,[s("b",null,[s("i",null,p(o.formatTime)+p(o.formatTime?" - ":"")+p(o.formatDate),1)])]),s("p",null,p(o.locale),1),o.desc?(c(),u("p",{key:0,innerHTML:le(oe)(o.desc)},null,8,Ee)):B("",!0)],8,Ne))),128))])],6))),128))])]))),128))])):(c(),u("p",Ue,"Nenhum evento agendado."))])])]))}},Ye=Z($e,[["__scopeId","data-v-d771d17b"]]);export{Ye as default};
