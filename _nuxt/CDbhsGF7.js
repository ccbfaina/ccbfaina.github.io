import{L as kt}from"./IX4h_ygr.js";import{_ as _t,y as St,r as h,I as st,h as g,f as nt,B as I,P as Dt,c as i,C as at,p as x,F as y,a as e,m as p,n as k,t as r,i as c,v as q,A as z,k as A,G as ot,e as E,K as Ct,g as ht,Q as O,l as xt,R as zt,o,H as At,M as it,O as Et}from"./DiDszO3n.js";import{d as Tt,a as $t,S as Lt,E as Vt}from"./CWw0arBe.js";const qt={class:"tabs-container print-hide"},wt={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},It=["aria-selected"],Ot={class:"badge"},Ut=["aria-selected"],jt=["aria-selected"],Mt={class:"tab-content"},Ft={id:"tab-content-lista",role:"tabpanel"},Bt={class:"text-center"},Gt={key:0},Rt={key:1},Pt={key:2},Nt={key:3},Ht={key:4},Kt={id:"tab-content-filters",role:"tabpanel"},Wt={class:"content"},Qt={class:"form-inline"},Jt={class:"form-group"},Xt={class:"row"},Yt={class:"form-group"},Zt={class:"row"},te=["value"],ee={class:"form-group"},le={class:"row"},se=["value"],ne={class:"form-group"},ae={class:"flex gap-xs"},oe={class:"form-group"},ie={class:"flex gap-xs"},re={class:"form-group",style:{"align-items":"flex-start"}},ue=["id","value"],de=["for"],pe={class:"form-group",style:{"text-align":"right"}},ve=["disabled"],ce={class:"form-inline",style:{gap:"1rem","margin-top":"1rem"}},fe={id:"tab-content-print",role:"tabpanel"},me={class:"text-center flex col items-center gap-4"},be={class:"p form-group flex items-center aling-center"},ge={class:"a4 print-hide"},ye={class:"settings-list print-hide"},ke=["onDragstart","onDragover","onDrop"],_e=["onClick"],Se={key:0,class:"print-page"},De=["onDragstart","onDragover","onDrop"],Ce={class:"table-container"},he={colspan:"5"},xe={class:"flex items-center aling-center justify-center"},ze=["onClick"],Ae={key:0},Ee={key:0},Te={key:0},$e=["innerHTML"],Le={__name:"index",setup(Ve){const{lista:_}=St(),v=h("lista"),l=st({fontSize:17,search:"",title:"",locale:"",date:"",start:"",end:"",calendars:[]}),rt=ht(),ut=xt(),U=h(!1),dt=()=>{const s=rt.query||{};["search","title","locale","date","start","end"].forEach(C=>{s[C]!==void 0&&(l[C]=s[C])}),s.calendars&&(l.calendars=Array.isArray(s.calendars)?s.calendars:s.calendars.split(",").filter(Boolean));const{today:a,future:d}=O();l.start||(l.start=a),l.end||(l.end=d)},j=Tt(()=>{const s=Object.fromEntries(Object.entries(l).filter(([t,a])=>t==="calendars"?a.length:a!==""&&a!=null).map(([t,a])=>Array.isArray(a)?[t,a.join(",")]:[t,a]));ut.replace({query:s})},200),S=g(()=>{const s=zt(_.allEvents||[],l);return Array.from(new Set(s.map(a=>a.id))).map(a=>s.find(d=>d.id===a))});function pt(){j()}nt(()=>{dt()}),I(l,j,{deep:!0});function T(s){if(s==="calendars")l.calendars=[];else if(s==="date"){l.date="";const{today:t,future:a}=O();l.start=t,l.end=a}else if(s==="start"||s==="end"){const{today:t,future:a}=O();l.start=t,l.end=a}else l[s]=""}function w(s,t){return Array.from(new Set(s.map(a=>a[t]).filter(a=>typeof a=="string"&&a.trim())))}const vt=g(()=>w(S.value,"title")),ct=g(()=>w(S.value,"locale")),ft=g(()=>w(_.allEvents,"list")),$=h([]);I(S,s=>{const t=Array.from(new Set(s.map(d=>d.title||"Sem título"))),a=$.value.filter(d=>t.includes(d));t.forEach(d=>{a.includes(d)||a.push(d)}),$.value=a},{immediate:!0});const m=g(()=>{const s={};return S.value.forEach(t=>{const a=t.title||"Sem título";(s[a]||(s[a]=[])).push(t)}),$.value.filter(t=>s[t]).map(t=>({title:t,items:s[t].slice().sort((a,d)=>a.onDate&&d.onDate?a.onDate-d.onDate:0)}))});function mt(){l.fontSize<10&&(l.fontSize=10),l.fontSize>25&&(l.fontSize=25),l.fontSize=Math.round(l.fontSize*10)/10}const M=s=>{var t;return(t=s==null?void 0:s.replace(/-$/,""))==null?void 0:t.trim()},bt=g(()=>{let s=0;return l.search&&s++,l.title&&s++,l.locale&&s++,l.date&&s++,l.calendars&&l.calendars.length>0&&s++,s}),gt=()=>{v.value="lista",setTimeout(()=>{window.print()},1e3)},D=h(null),L=h(null),F=s=>{D.value=s},B=s=>{L.value=s},G=s=>{if(D.value===null||D.value===s){D.value=null,L.value=null;return}const t=$.value.slice(),[a]=t.splice(D.value,1);t.splice(s,0,a),$.value=t,D.value=null,L.value=null},b=st({});I(m,()=>{m.value&&m.value.forEach(s=>{s.title in b||(b[s.title]=!0)})},{immediate:!0});const R=s=>{v.value="print",b[s]=!b[s]},P=g(()=>m.value.length>0&&m.value.every(s=>b[s.title])),yt=s=>{m.value.forEach(t=>{b[t.title]=s})},V=h(null);return nt(()=>{V.value=new $t({extensions:[Lt],content:`
      <p>Oração Santa Ceia</p>
      <p><strong>Pão:</strong> "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo."</p>
      <p><strong>Cálice:</strong> "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo."</p>
    `,editable:!0})}),Dt(()=>{V.value&&V.value.destroy()}),(s,t)=>{var d,C,N,H,K,W,Q,J,X,Y,Z,tt,et,lt;const a=kt;return o(),i("div",{style:Ct({fontSize:(l.fontSize?l.fontSize:17)+"px"})},[x(_).loading?(o(),at(a,{key:0})):(o(),i(y,{key:1},[e("div",qt,[e("nav",wt,[e("span",{id:"tab-filters","aria-selected":v.value==="filters",role:"tab",type:"button",class:k(["tab",{active:v.value==="filters"}]),style:{position:"relative"},onClick:t[0]||(t[0]=n=>v.value="filters")},[e("span",Ot,r(bt.value),1),t[19]||(t[19]=e("i",{class:"la la-filter z-10"},null,-1))],10,It),e("span",{id:"tab-print","aria-selected":v.value==="print",role:"tab",type:"button",class:k(["tab",{active:v.value==="print"}]),onClick:t[1]||(t[1]=n=>v.value="print")},t[20]||(t[20]=[e("i",{class:"la la-print"},null,-1)]),10,Ut),e("span",{id:"tab-lista","aria-selected":v.value==="lista",role:"tab",type:"button",class:k(["tab",{active:v.value==="lista"}]),onClick:t[2]||(t[2]=n=>v.value="lista")}," Lista ",10,jt)])]),e("div",null,[e("div",Mt,[c(e("div",Ft,[e("div",Bt,[t[21]||(t[21]=e("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),l.calendars.length?(o(),i("div",Gt,[e("b",null,r(l.calendars.map(M).join(", ")),1)])):p("",!0),l.locale?(o(),i("span",Rt,[e("b",null,r(M(l.locale)),1)])):p("",!0),l.date?(o(),i("span",Pt," Data: "+r((H=(N=(C=(d=l.date)==null?void 0:d.split("T")[0])==null?void 0:C.split("-"))==null?void 0:N.reverse())==null?void 0:H.join("/")),1)):p("",!0),!l.date&&(l.start||l.end)?(o(),i("div",Nt," Período: "+r((J=(Q=(W=(K=l.start)==null?void 0:K.split("T")[0])==null?void 0:W.split("-"))==null?void 0:Q.reverse())==null?void 0:J.join("/"))+" à "+r((tt=(Z=(Y=(X=l.end)==null?void 0:X.split("T")[0])==null?void 0:Y.split("-"))==null?void 0:Z.reverse())==null?void 0:tt.join("/")),1)):p("",!0),l.search?(o(),i("div",Ht,r(l.search),1)):p("",!0)])],512),[[q,v.value==="lista"]]),c(e("div",Kt,[e("div",Wt,[e("div",Qt,[e("div",null,[e("div",Jt,[t[22]||(t[22]=e("label",{for:"search"},"Pesquisar",-1)),e("div",Xt,[c(e("input",{id:"search","onUpdate:modelValue":t[3]||(t[3]=n=>l.search=n),type:"text",placeholder:"Buscar itens..."},null,512),[[z,l.search]]),l.search?(o(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar pesquisa",type:"button",onClick:t[4]||(t[4]=n=>T("search"))}," × ")):p("",!0)])]),e("div",Yt,[t[24]||(t[24]=e("label",{for:"title"},"Título",-1)),e("div",Zt,[c(e("select",{id:"title","onUpdate:modelValue":t[5]||(t[5]=n=>l.title=n)},[t[23]||(t[23]=e("option",{value:""},"Todos os títulos",-1)),(o(!0),i(y,null,A(vt.value,n=>(o(),i("option",{key:n,value:n},r(n),9,te))),128))],512),[[ot,l.title]]),l.title?(o(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar título",type:"button",onClick:t[6]||(t[6]=n=>T("title"))}," × ")):p("",!0)])]),e("div",ee,[t[26]||(t[26]=e("label",{for:"locale"},"Local",-1)),e("div",le,[c(e("select",{id:"locale","onUpdate:modelValue":t[7]||(t[7]=n=>l.locale=n)},[t[25]||(t[25]=e("option",{value:""},"Todos os locais",-1)),(o(!0),i(y,null,A(ct.value,n=>(o(),i("option",{key:n,value:n},r(n),9,se))),128))],512),[[ot,l.locale]]),l.locale?(o(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar local",type:"button",onClick:t[8]||(t[8]=n=>T("locale"))}," × ")):p("",!0)])]),e("div",ne,[t[27]||(t[27]=e("label",{for:"date"},"Data",-1)),e("div",ae,[c(e("input",{id:"date","onUpdate:modelValue":t[9]||(t[9]=n=>l.date=n),type:"date"},null,512),[[z,l.date]]),l.date?(o(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar data",type:"button",onClick:t[10]||(t[10]=n=>T("date"))}," × ")):p("",!0)])]),e("div",oe,[t[28]||(t[28]=e("label",null,"Intervalo de Datas",-1)),e("div",ie,[c(e("input",{"onUpdate:modelValue":t[11]||(t[11]=n=>l.start=n),type:"date"},null,512),[[z,l.start]]),c(e("input",{"onUpdate:modelValue":t[12]||(t[12]=n=>l.end=n),type:"date"},null,512),[[z,l.end]]),l.start||l.end?(o(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar datas",type:"button",onClick:t[13]||(t[13]=n=>T("date"))}," × ")):p("",!0)])])]),e("div",null,[e("div",re,[t[29]||(t[29]=e("label",null,"Agendas",-1)),e("div",null,[(o(!0),i(y,null,A(ft.value,n=>(o(),i("div",{key:n},[c(e("input",{id:"cat-"+n,"onUpdate:modelValue":t[14]||(t[14]=f=>l.calendars=f),type:"checkbox",value:n,style:{margin:"5px 5px 0 0"}},null,8,ue),[[At,l.calendars]]),e("label",{for:"cat-"+n,style:{"margin-bottom":"0"}},r(n),9,de)]))),128))])]),e("div",pe,[t[30]||(t[30]=e("label",null,null,-1)),e("button",{class:"success",disabled:U.value||x(_).loading,onClick:t[15]||(t[15]=n=>pt())},r(U.value||x(_).loading?"Atualizando...":"Aplicar"),9,ve)])])]),e("div",ce,[e("span",null,[t[31]||(t[31]=e("i",{class:"la la-calendar-check"},null,-1)),E(" "+r(((lt=(et=x(_))==null?void 0:et.calendars)==null?void 0:lt.length)||0),1)]),e("span",null,[t[32]||(t[32]=e("i",{class:"la la-tasks"},null,-1)),E(" "+r(Array.isArray(S.value)?S.value.length:0),1)])])])],512),[[q,v.value==="filters"]]),c(e("div",fe,[e("div",me,[t[36]||(t[36]=e("b",{class:"mb-4 p"},"Ajustes de impressão:",-1)),e("div",be,[t[33]||(t[33]=e("label",null,"Fonte",-1)),c(e("input",{"onUpdate:modelValue":t[16]||(t[16]=n=>l.fontSize=n),type:"range",min:"10",max:"25",step:"0.1",placeholder:"Font Size"},null,512),[[z,l.fontSize,void 0,{number:!0}]]),c(e("input",{"onUpdate:modelValue":t[17]||(t[17]=n=>l.fontSize=n),type:"number",min:"10",max:"25",step:"0.1",style:{width:"70px","margin-left":"8px"},onInput:mt},null,544),[[z,l.fontSize,void 0,{number:!0}]]),t[34]||(t[34]=E(" px "))]),e("div",{class:"p"},[e("button",{class:"success",onClick:gt},t[35]||(t[35]=[e("i",{class:"la la-print"},null,-1),E(" Imprimir ")]))])]),e("div",ge,[e("div",ye,[t[37]||(t[37]=e("b",null,"Lista",-1)),e("div",null,[e("i",{class:k(["la",P.value?"la-toggle-on":"la-toggle-off"]),title:"Ocultar todos",onClick:t[18]||(t[18]=n=>yt(!P.value))},null,2)])]),(o(!0),i(y,null,A(m.value,(n,f)=>(o(),i("div",{key:n.title,class:k(["settings-list print-hide",{"drag-over":L.value===f}]),draggable:"true",onDragstart:u=>F(f),onDragover:it(u=>B(f),["prevent"]),onDrop:u=>G(f)},[E(r(n.title)+" ",1),e("i",{class:k(["la",b[n.title]?"la-toggle-on":"la-toggle-off"]),title:"Alterar visibilidade",onClick:u=>R(n.title)},null,10,_e)],42,ke))),128))])],512),[[q,v.value==="print"]])])]),m.value.length?(o(),i("div",Se,[(o(!0),i(y,null,A(m.value,(n,f)=>c((o(),i("div",{key:n.title,class:k(["table-list",{"drag-over":L.value===f}]),draggable:"true",style:{cursor:"move"},onDragstart:u=>F(f),onDragover:it(u=>B(f),["prevent"]),onDrop:u=>G(f)},[e("div",Ce,[e("table",null,[e("thead",null,[e("tr",null,[e("th",he,[e("div",xe,[E(r(n.title)+" ",1),e("i",{class:"la la-toggle-on print-hide",style:{cursor:"pointer"},onClick:u=>R(n.title)},null,8,ze)])])])]),e("tbody",null,[(o(!0),i(y,null,A(n.items,u=>(o(),i("tr",{key:u.id},[e("td",null,[u.formatDate?(o(),i("span",Ae,r(u.formatDate),1)):p("",!0)]),e("td",null,[u.formatWeek?(o(),i("span",Ee,r(u.formatWeek),1)):p("",!0)]),e("td",null,[u.formatTime?(o(),i("span",Te,r(u.formatTime),1)):p("",!0)]),e("td",null,r(u.locale),1),e("td",null,[u.desc?(o(),i("span",{key:0,innerHTML:x(Et)(u.desc)},null,8,$e)):p("",!0)])]))),128))])])])],42,De)),[[q,b[n.title]]])),128)),V.value?(o(),at(x(Vt),{key:0,editor:V.value,class:"editable"},null,8,["editor"])):p("",!0)])):p("",!0)],64))],4)}}},Ue=_t(Le,[["__scopeId","data-v-f87b8c31"]]);export{Ue as default};
