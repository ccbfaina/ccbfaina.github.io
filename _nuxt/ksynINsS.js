import{L as _t}from"./B3hUpxmr.js";import{_ as St,y as Dt,r as C,I as st,h as g,f as nt,B as I,P as ht,c as i,C as ot,p as x,F as y,a as e,m as p,n as k,t as u,i as v,v as V,A as z,k as $,G as at,e as w,K as Ct,g as xt,Q as O,l as zt,R as $t,o as a,H as wt,M as it,O as Et}from"./-PIXM2h1.js";import{d as Lt,a as At,S as Tt,E as Vt}from"./DjWE6J9z.js";const qt={class:"tabs-container print-hide"},It={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},Ot=["aria-selected"],Ut={class:"badge"},jt=["aria-selected"],Mt=["aria-selected"],Ft={class:"tab-content"},Bt={id:"tab-content-lista",role:"tabpanel"},Gt={class:"text-center"},Rt={key:0},Pt={key:1},Nt={key:2},Ht={key:3},Kt={key:4},Wt={id:"tab-content-filters",role:"tabpanel"},Qt={class:"content"},Jt={class:"form-inline"},Xt={class:"form-group"},Yt={class:"row"},Zt={class:"form-group"},te={class:"row"},ee=["value"],le={class:"form-group"},se={class:"row"},ne=["value"],oe={class:"form-group"},ae={class:"flex gap-xs"},ie={class:"form-group"},re={class:"flex gap-xs"},ue={class:"form-group",style:{"align-items":"flex-start"}},de=["id","value"],pe=["for"],ce={class:"form-group",style:{"text-align":"right"}},ve=["disabled"],fe={class:"form-inline",style:{gap:"1rem","margin-top":"1rem"}},me={id:"tab-content-print",role:"tabpanel"},be={class:"text-center flex col items-center gap-4"},ge={class:"p form-group flex items-center aling-center"},ye={class:"a4 print-hide"},ke={class:"settings-list print-hide"},_e=["onDragstart","onDragover","onDrop"],Se=["onClick"],De={key:0,class:"print-page"},he=["onDragstart","onDragover","onDrop"],Ce={class:"table-container"},xe={colspan:"5"},ze={class:"flex items-center aling-center justify-center"},$e=["onClick"],we=["onDblclick"],Ee={key:0},Le={key:0},Ae={key:0},Te=["innerHTML"],Ve={__name:"index",setup(qe){const{lista:_}=Dt(),c=C("lista"),l=st({fontSize:17,search:"",title:"",locale:"",date:"",start:"",end:"",calendars:[]}),rt=xt(),ut=zt(),U=C(!1),dt=()=>{const s=rt.query||{};["search","title","locale","date","start","end"].forEach(h=>{s[h]!==void 0&&(l[h]=s[h])}),s.calendars&&(l.calendars=Array.isArray(s.calendars)?s.calendars:s.calendars.split(",").filter(Boolean));const{today:o,future:d}=O();l.start||(l.start=o),l.end||(l.end=d)},j=Lt(()=>{const s=Object.fromEntries(Object.entries(l).filter(([t,o])=>t==="calendars"?o.length:o!==""&&o!=null).map(([t,o])=>Array.isArray(o)?[t,o.join(",")]:[t,o]));ut.replace({query:s})},200),S=g(()=>{const s=$t(_.allEvents||[],l);return Array.from(new Set(s.map(o=>o.id))).map(o=>s.find(d=>d.id===o))});function pt(){j()}nt(()=>{dt()}),I(l,j,{deep:!0});function E(s){if(s==="calendars")l.calendars=[];else if(s==="date"){l.date="";const{today:t,future:o}=O();l.start=t,l.end=o}else if(s==="start"||s==="end"){const{today:t,future:o}=O();l.start=t,l.end=o}else l[s]=""}function q(s,t){return Array.from(new Set(s.map(o=>o[t]).filter(o=>typeof o=="string"&&o.trim())))}const ct=g(()=>q(S.value,"title")),vt=g(()=>q(S.value,"locale")),ft=g(()=>q(_.allEvents,"list")),L=C([]);I(S,s=>{const t=Array.from(new Set(s.map(d=>d.title||"Sem título"))),o=L.value.filter(d=>t.includes(d));t.forEach(d=>{o.includes(d)||o.push(d)}),L.value=o},{immediate:!0});const m=g(()=>{const s={};return S.value.forEach(t=>{const o=t.title||"Sem título";(s[o]||(s[o]=[])).push(t)}),L.value.filter(t=>s[t]).map(t=>({title:t,items:s[t].slice().sort((o,d)=>o.onDate&&d.onDate?o.onDate-d.onDate:0)}))});function mt(){l.fontSize<10&&(l.fontSize=10),l.fontSize>25&&(l.fontSize=25),l.fontSize=Math.round(l.fontSize*10)/10}const M=s=>{var t;return(t=s==null?void 0:s.replace(/-$/,""))==null?void 0:t.trim()},bt=g(()=>{let s=0;return l.search&&s++,l.title&&s++,l.locale&&s++,l.date&&s++,l.calendars&&l.calendars.length>0&&s++,s}),gt=()=>{c.value="lista",setTimeout(()=>{window.print()},1e3)},D=C(null),A=C(null),F=s=>{D.value=s},B=s=>{A.value=s},G=s=>{if(D.value===null||D.value===s){D.value=null,A.value=null;return}const t=L.value.slice(),[o]=t.splice(D.value,1);t.splice(s,0,o),L.value=t,D.value=null,A.value=null},b=st({});I(m,()=>{m.value&&m.value.forEach(s=>{s.title in b||(b[s.title]=!0)})},{immediate:!0});const R=s=>{c.value="print",b[s]=!b[s]},P=g(()=>m.value.length>0&&m.value.every(s=>b[s.title])),yt=s=>{m.value.forEach(t=>{b[t.title]=s})},kt=s=>{const t=`https://www.google.com/calendar/event?eid=${s.htmlLink}`;window.open(t,"_blank")},T=C(null);return nt(()=>{T.value=new At({extensions:[Tt],content:`
      <p>Oração Santa Ceia</p>
      <p><strong>Pão:</strong> "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo."</p>
      <p><strong>Cálice:</strong> "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo."</p>
    `,editable:!0})}),ht(()=>{T.value&&T.value.destroy()}),(s,t)=>{var d,h,N,H,K,W,Q,J,X,Y,Z,tt,et,lt;const o=_t;return a(),i("div",{style:Ct({fontSize:(l.fontSize?l.fontSize:17)+"px"})},[x(_).loading?(a(),ot(o,{key:0})):(a(),i(y,{key:1},[e("div",qt,[e("nav",It,[e("span",{id:"tab-filters","aria-selected":c.value==="filters",role:"tab",type:"button",class:k(["tab",{active:c.value==="filters"}]),style:{position:"relative"},onClick:t[0]||(t[0]=n=>c.value="filters")},[e("span",Ut,u(bt.value),1),t[19]||(t[19]=e("i",{class:"la la-filter z-10"},null,-1))],10,Ot),e("span",{id:"tab-print","aria-selected":c.value==="print",role:"tab",type:"button",class:k(["tab",{active:c.value==="print"}]),onClick:t[1]||(t[1]=n=>c.value="print")},t[20]||(t[20]=[e("i",{class:"la la-print"},null,-1)]),10,jt),e("span",{id:"tab-lista","aria-selected":c.value==="lista",role:"tab",type:"button",class:k(["tab",{active:c.value==="lista"}]),onClick:t[2]||(t[2]=n=>c.value="lista")}," Lista ",10,Mt)])]),e("div",null,[e("div",Ft,[v(e("div",Bt,[e("div",Gt,[t[21]||(t[21]=e("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),l.calendars.length?(a(),i("div",Rt,[e("b",null,u(l.calendars.map(M).join(", ")),1)])):p("",!0),l.locale?(a(),i("span",Pt,[e("b",null,u(M(l.locale)),1)])):p("",!0),l.date?(a(),i("span",Nt," Data: "+u((H=(N=(h=(d=l.date)==null?void 0:d.split("T")[0])==null?void 0:h.split("-"))==null?void 0:N.reverse())==null?void 0:H.join("/")),1)):p("",!0),!l.date&&(l.start||l.end)?(a(),i("div",Ht," Período: "+u((J=(Q=(W=(K=l.start)==null?void 0:K.split("T")[0])==null?void 0:W.split("-"))==null?void 0:Q.reverse())==null?void 0:J.join("/"))+" à "+u((tt=(Z=(Y=(X=l.end)==null?void 0:X.split("T")[0])==null?void 0:Y.split("-"))==null?void 0:Z.reverse())==null?void 0:tt.join("/")),1)):p("",!0),l.search?(a(),i("div",Kt,u(l.search),1)):p("",!0)])],512),[[V,c.value==="lista"]]),v(e("div",Wt,[e("div",Qt,[e("div",Jt,[e("div",null,[e("div",Xt,[t[22]||(t[22]=e("label",{for:"search"},"Pesquisar",-1)),e("div",Yt,[v(e("input",{id:"search","onUpdate:modelValue":t[3]||(t[3]=n=>l.search=n),type:"text",placeholder:"Buscar itens..."},null,512),[[z,l.search]]),l.search?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar pesquisa",type:"button",onClick:t[4]||(t[4]=n=>E("search"))}," × ")):p("",!0)])]),e("div",Zt,[t[24]||(t[24]=e("label",{for:"title"},"Título",-1)),e("div",te,[v(e("select",{id:"title","onUpdate:modelValue":t[5]||(t[5]=n=>l.title=n)},[t[23]||(t[23]=e("option",{value:""},"Todos os títulos",-1)),(a(!0),i(y,null,$(ct.value,n=>(a(),i("option",{key:n,value:n},u(n),9,ee))),128))],512),[[at,l.title]]),l.title?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar título",type:"button",onClick:t[6]||(t[6]=n=>E("title"))}," × ")):p("",!0)])]),e("div",le,[t[26]||(t[26]=e("label",{for:"locale"},"Local",-1)),e("div",se,[v(e("select",{id:"locale","onUpdate:modelValue":t[7]||(t[7]=n=>l.locale=n)},[t[25]||(t[25]=e("option",{value:""},"Todos os locais",-1)),(a(!0),i(y,null,$(vt.value,n=>(a(),i("option",{key:n,value:n},u(n),9,ne))),128))],512),[[at,l.locale]]),l.locale?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar local",type:"button",onClick:t[8]||(t[8]=n=>E("locale"))}," × ")):p("",!0)])]),e("div",oe,[t[27]||(t[27]=e("label",{for:"date"},"Data",-1)),e("div",ae,[v(e("input",{id:"date","onUpdate:modelValue":t[9]||(t[9]=n=>l.date=n),type:"date"},null,512),[[z,l.date]]),l.date?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar data",type:"button",onClick:t[10]||(t[10]=n=>E("date"))}," × ")):p("",!0)])]),e("div",ie,[t[28]||(t[28]=e("label",null,"Intervalo de Datas",-1)),e("div",re,[v(e("input",{"onUpdate:modelValue":t[11]||(t[11]=n=>l.start=n),type:"date"},null,512),[[z,l.start]]),v(e("input",{"onUpdate:modelValue":t[12]||(t[12]=n=>l.end=n),type:"date"},null,512),[[z,l.end]]),l.start||l.end?(a(),i("button",{key:0,class:"btn-clear","aria-label":"Limpar datas",type:"button",onClick:t[13]||(t[13]=n=>E("date"))}," × ")):p("",!0)])])]),e("div",null,[e("div",ue,[t[29]||(t[29]=e("label",null,"Agendas",-1)),e("div",null,[(a(!0),i(y,null,$(ft.value,n=>(a(),i("div",{key:n},[v(e("input",{id:"cat-"+n,"onUpdate:modelValue":t[14]||(t[14]=f=>l.calendars=f),type:"checkbox",value:n,style:{margin:"5px 5px 0 0"}},null,8,de),[[wt,l.calendars]]),e("label",{for:"cat-"+n,style:{"margin-bottom":"0"}},u(n),9,pe)]))),128))])]),e("div",ce,[t[30]||(t[30]=e("label",null,null,-1)),e("button",{class:"success",disabled:U.value||x(_).loading,onClick:t[15]||(t[15]=n=>pt())},u(U.value||x(_).loading?"Atualizando...":"Aplicar"),9,ve)])])]),e("div",fe,[e("span",null,[t[31]||(t[31]=e("i",{class:"la la-calendar-check"},null,-1)),w(" "+u(((lt=(et=x(_))==null?void 0:et.calendars)==null?void 0:lt.length)||0),1)]),e("span",null,[t[32]||(t[32]=e("i",{class:"la la-tasks"},null,-1)),w(" "+u(Array.isArray(S.value)?S.value.length:0),1)])])])],512),[[V,c.value==="filters"]]),v(e("div",me,[e("div",be,[t[36]||(t[36]=e("b",{class:"mb-4 p"},"Ajustes de impressão:",-1)),e("div",ge,[t[33]||(t[33]=e("label",null,"Fonte",-1)),v(e("input",{"onUpdate:modelValue":t[16]||(t[16]=n=>l.fontSize=n),type:"range",min:"10",max:"25",step:"0.1",placeholder:"Font Size"},null,512),[[z,l.fontSize,void 0,{number:!0}]]),v(e("input",{"onUpdate:modelValue":t[17]||(t[17]=n=>l.fontSize=n),type:"number",min:"10",max:"25",step:"0.1",style:{width:"70px","margin-left":"8px"},onInput:mt},null,544),[[z,l.fontSize,void 0,{number:!0}]]),t[34]||(t[34]=w(" px "))]),e("div",{class:"p"},[e("button",{class:"success",onClick:gt},t[35]||(t[35]=[e("i",{class:"la la-print"},null,-1),w(" Imprimir ")]))])]),e("div",ye,[e("div",ke,[t[37]||(t[37]=e("b",null,"Lista",-1)),e("div",null,[e("i",{class:k(["la",P.value?"la-toggle-on":"la-toggle-off"]),title:"Ocultar todos",onClick:t[18]||(t[18]=n=>yt(!P.value))},null,2)])]),(a(!0),i(y,null,$(m.value,(n,f)=>(a(),i("div",{key:n.title,class:k(["settings-list print-hide",{"drag-over":A.value===f}]),draggable:"true",onDragstart:r=>F(f),onDragover:it(r=>B(f),["prevent"]),onDrop:r=>G(f)},[w(u(n.title)+" ",1),e("i",{class:k(["la",b[n.title]?"la-toggle-on":"la-toggle-off"]),title:"Alterar visibilidade",onClick:r=>R(n.title)},null,10,Se)],42,_e))),128))])],512),[[V,c.value==="print"]])])]),m.value.length?(a(),i("div",De,[(a(!0),i(y,null,$(m.value,(n,f)=>v((a(),i("div",{key:n.title,class:k(["table-list",{"drag-over":A.value===f}]),draggable:"true",style:{cursor:"move"},onDragstart:r=>F(f),onDragover:it(r=>B(f),["prevent"]),onDrop:r=>G(f)},[e("div",Ce,[e("table",null,[e("thead",null,[e("tr",null,[e("th",xe,[e("div",ze,[w(u(n.title)+" ",1),e("i",{class:"la la-toggle-on print-hide",style:{cursor:"pointer"},onClick:r=>R(n.title)},null,8,$e)])])])]),e("tbody",null,[(a(!0),i(y,null,$(n.items,r=>(a(),i("tr",{key:r.id,onDblclick:Oe=>kt(r)},[e("td",null,[r.formatDate?(a(),i("span",Ee,u(r.formatDate),1)):p("",!0)]),e("td",null,[r.formatWeek?(a(),i("span",Le,u(r.formatWeek),1)):p("",!0)]),e("td",null,[r.formatTime?(a(),i("span",Ae,u(r.formatTime),1)):p("",!0)]),e("td",null,u(r.locale),1),e("td",null,[r.desc?(a(),i("span",{key:0,innerHTML:x(Et)(r.desc)},null,8,Te)):p("",!0)])],40,we))),128))])])])],42,he)),[[V,b[n.title]]])),128)),T.value?(a(),ot(x(Vt),{key:0,editor:T.value,class:"editable"},null,8,["editor"])):p("",!0)])):p("",!0)],64))],4)}}},Fe=St(Ve,[["__scopeId","data-v-4ae20930"]]);export{Fe as default};
