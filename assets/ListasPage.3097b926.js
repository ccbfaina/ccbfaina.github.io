import{z as A,B as u,I as f,E as n,N as v,H as a,R as T,G as $,C as k,J as C,S as D,v as R,w as L,F as y,D as Q,T as B,U as J,Q as I,_ as U,V as W,W as V,o as Y,x as H,X as K,Y as G,Z as E,$ as X,L as N,M as q,K as c,a0 as Z,O as j,P as ee}from"./index.16f9609b.js";const te={class:""},ne=["innerHTML"],ae=A({__name:"ListaTRComponent",props:{event:{}},setup(h){const e=h.event;function d(t){return!(t instanceof Date)||isNaN(t.getTime())?"":["Dom","Seg","Ter","Qua","Qui","Sex","S\xE1b"][t.getDay()]||""}function l(t){return!(t instanceof Date)||isNaN(t.getTime())?"":String(t==null?void 0:t.getDate()).padStart(2,"0")}function x(t){return!(t instanceof Date)||isNaN(t.getTime())?"":String(t.getMonth()+1).padStart(2,"0")}function _(t){try{!(t instanceof Date)||isNaN(t.getTime());const S=String(t==null?void 0:t.getHours()).padStart(2,"0"),w=String(t==null?void 0:t.getMinutes()).padStart(2,"0");return`${S}:${w}`}catch{return console.log("Erro format hours!"),""}}function m(t){return!(!(t instanceof Date)||isNaN(t.getTime()))}return(t,S)=>(u(),f("tr",null,[n("td",{style:T(m(a(e).date)?"":"display: none;")},[n("b",null,v(l(a(e).date))+"/"+v(x(a(e).date)),1)],4),n("td",{style:T(m(a(e).date)?"":"display: none;")},v(d(a(e).date)),5),n("td",{style:T(a(e).date?"":"display: none;")},v(_(a(e).date)),5),n("td",null,[n("div",te,[$(v(a(e).locale)+" ",1),a(e).recurring?(u(),k(D,{key:0,class:"print-hide",name:"event_repeat",style:{color:"#9e9e9e"}})):C("",!0)])]),n("td",null,[n("div",{style:T(a(e).desc?"":"display: none;"),innerHTML:a(e).desc.replace(/(;\n|\n)/gi,"</br>")},null,12,ne)])]))}});const oe={class:"print-hide calendar"},se=A({__name:"IconCalendarComponent",props:{search:{},events:{}},emits:["update"],setup(h,{emit:b}){const e=h,d=b,l=R({range:"",events:[],locale:{days:"Domingo_Segunda_Ter\xE7a_Quarta_Quinta_Sexta_S\xE1bado".split("_"),daysShort:"Dom_Seg_Ter_Qua_Qui_Sex_S\xE1b".split("_"),months:"Janeiro_Fevereiro_Mar\xE7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),firstDayOfWeek:0,format24h:!0,pluralDay:"dias"}});x(),L(()=>e.events,x);function x(){l.events=[...new Set(e.events.filter(_=>_.date instanceof Date).map(_=>{var m;return((m=_.date)==null?void 0:m.toISOString().split("T")[0].replace(/-/g,"/"))||""}).filter(_=>_))]}return L(()=>l.range,()=>{l.range?d("update",`${e.search.replace(/\d+\/\d+\/\d+/gi,"").trim()} ${l.range}`):d("update",e.search.replace(/\d+\/\d+\/\d+/gi,"").trim())}),(_,m)=>(u(),f("div",oe,[y(I,{icon:"event",dense:"",round:"",color:"dark"},{default:Q(()=>[y(B,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:Q(()=>[y(J,{modelValue:l.range,"onUpdate:modelValue":m[0]||(m[0]=t=>l.range=t),minimal:"",mask:"DD/MM/YYYY",events:l.events,locale:l.locale},null,8,["modelValue","events","locale"])]),_:1})]),_:1})]))}});const O=h=>(j("data-v-586f8a11"),h=h(),ee(),h),re={class:"text-center"},ie=O(()=>n("div",{class:"print-only"},"LISTA DE ATENDIMENTO E DIVERSOS",-1)),le={id:"lista"},ce={class:"print-hide menu flex space-between"},ue={class:"search"},de=["summary"],pe={colspan:"5"},_e={key:0,class:"print-hide"},me={class:"print-only right"},he=["href"],ge={key:1,class:"print-only"},fe=O(()=>n("i",null,[$(" Ora\xE7\xE3o Santa Ceia "),n("br"),n("b",null,"P\xE3o:"),$(' "Senhor, aben\xE7oa este P\xE3o que vamos comer, que \xE9 a comunh\xE3o do Corpo de Cristo." '),n("br"),n("b",null,"C\xE1lice: "),$('"Senhor, aben\xE7oa o C\xE1lice que vamos beber, que \xE9 a comunh\xE3o do Sangue de Cristo." ')],-1)),ve=[fe],ye=A({__name:"ListasPage",setup(h){var w,M;const b=W(),e=R({search:((w=b.query.pesquisar)==null?void 0:w.toString())||"",locale:((M=b.params.local)==null?void 0:M.toString())||"",titles:{}}),d=[];l(),L(()=>V.eventos.items,l),L(()=>e.search,l);function l(){let r=V.eventos.items.filter(i=>i.end&&i.end.getTime()>new Date().getTime());if(!e.search&&!e.locale)return[];const o=i=>i.trim().toUpperCase().normalize("NFD").replace(/\p{Diacritic}/gu,"");let s=o(e.search),p=o(e.locale);if(/^(\*)/gi.test(e.search)&&(p="",s=s.replace(/^(\*|\/)/gi,"").trim()),p){const i=new RegExp(`^${p}`);r=r.filter(g=>o(g.list).includes(p)||i.test(o(g.locale)))}if(s){let i=null;try{i=new RegExp(s,"gi"),console.log(i)}catch{console.log("Regex search inv\xE1lido!")}r=r.filter(g=>{var F;const P=`${(F=g.date)==null?void 0:F.toLocaleString()} ${g.title} ${g.locale} ${g.desc}`;return s.split(" ").every(z=>o(P).includes(z))||i&&i.test(P)})}d.length=0,r.forEach(i=>{d.push(i)}),e.titles=[...new Set(d.map(i=>i.title))]}function x(r){if(r.altKey&&r.key.toLowerCase()==="a")r.preventDefault(),r.stopPropagation(),c.createEvent();else if(r.altKey&&["/","*"].includes(r.key)){const o=document.querySelector('input[type="text"]');o&&o.focus()}}Y(()=>{window.addEventListener("keydown",x)}),H(()=>{window.removeEventListener("keydown",x)});function _(){window.print()}function m(){navigator.share?navigator.share({title:"CCB",text:"Lista de Atendimento",url:location.href}).then(()=>console.log("Conte\xFAdo compartilhado com sucesso!")).catch(r=>console.error("Erro ao compartilhar:",r)):console.error("API de compartilhamento n\xE3o suportada.")}function t(){const s=`https://api.whatsapp.com/send/?phone=5562984972385&text=${encodeURIComponent(`\u{1F4C4} Batismo, Santa Ceia, ...

\u{1F4CD} Local: 
\u{1F557} Data: 
\u{1F935} Atender\xE1: `)}&type=phone_number&app_absent=0`;window.location.href=s}async function S(){if(!c.loading){c.loading=!0;try{await Z()}catch{console.log("Erro ao recarregar!")}console.log("Terminoou de recarregar..."),c.loading=!1}}return(r,o)=>(u(),f(N,null,[n("div",re,[ie,n("div",null,v(e.locale.replace(/-$/,"").trim()),1)]),n("div",le,[n("div",ce,[n("div",ue,[K(n("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>e.search=s),placeholder:"Pesquisar...","x-webkit-speech":""},null,512),[[G,e.search]])]),a(c).connected&&a(c).admin?(u(),k(D,{key:0,name:"add",onClick:E(a(c).createEvent,["prevent"])},null,8,["onClick"])):C("",!0),a(c).shared?(u(),k(D,{key:1,name:"share",onClick:E(m,["prevent"])})):C("",!0),a(c).shared?(u(),k(D,{key:2,name:"quiz",onClick:E(t,["prevent"])})):C("",!0),y(D,{name:"cached",onClick:E(S,["prevent"]),class:X({rotate:a(c).loading}),style:{transform:"scaleX(-1)"}},null,8,["class"]),y(D,{name:"print",onClick:o[1]||(o[1]=E(s=>_(),["prevent"]))}),y(I,{to:"/",dense:"",flat:"",icon:"close"})]),(u(!0),f(N,null,q(e.titles,s=>(u(),f("div",{key:s},[n("table",{summary:String(s)},[n("thead",null,[n("th",pe,v(s),1)]),n("tbody",null,[(u(!0),f(N,null,q(d.filter(p=>p.title===s),p=>(u(),k(ae,{key:p.gid,event:p,onDblclick:i=>a(c).selected=p,onContextmenu:E(i=>a(c).selected=p,["right","prevent"])},null,8,["event","onDblclick","onContextmenu"]))),128))])],8,de)]))),128)),!d.length&&!e.search.startsWith("*")?(u(),f("div",_e,[y(I,{class:"print-hide q-mt-lg",onClick:o[2]||(o[2]=s=>e.search=`*${e.search}`),color:"blue",flat:"",label:"Lista completa..."})])):C("",!0),n("div",me,[n("a",{style:{color:"black"},href:a(c).url},v(a(c).url),9,he)]),e.locale.includes("REGIONAL")?(u(),f("div",ge,ve)):C("",!0)]),y(se,{search:e.search,events:d,onUpdate:o[3]||(o[3]=s=>e.search=s)},null,8,["search"])],64))}});var Se=U(ye,[["__scopeId","data-v-586f8a11"]]);export{Se as default};
