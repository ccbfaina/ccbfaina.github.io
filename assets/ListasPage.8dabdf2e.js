import{z as M,B as c,I as h,E as n,N as y,H as a,R as N,G as $,C as k,J as v,S as w,v as R,w as L,F as C,D as Q,T as B,U as J,Q as A,_ as U,V as W,W as V,o as Y,x as H,X as K,Y as G,Z as b,$ as X,L as I,M as q,K as l,a0 as Z,O as j,P as ee}from"./index.461f839f.js";const te=["innerHTML"],ne=M({__name:"ListaTRComponent",props:{event:{}},setup(g){const e=g.event;function d(t){return t.replace(/(\r\n|\n|\r)/g,"<br>")}function u(t){return!(t instanceof Date)||isNaN(t.getTime())?"":["Dom","Seg","Ter","Qua","Qui","Sex","S\xE1b"][t.getDay()]||""}function x(t){return!(t instanceof Date)||isNaN(t.getTime())?"":String(t==null?void 0:t.getDate()).padStart(2,"0")}function _(t){return!(t instanceof Date)||isNaN(t.getTime())?"":String(t.getMonth()+1).padStart(2,"0")}function m(t){try{!(t instanceof Date)||isNaN(t.getTime());const S=String(t==null?void 0:t.getHours()).padStart(2,"0"),E=String(t==null?void 0:t.getMinutes()).padStart(2,"0");return`${S}:${E}`}catch{return console.log("Erro format hours!"),""}}function D(t){return!(!(t instanceof Date)||isNaN(t.getTime()))}return(t,S)=>{var E;return c(),h("tr",null,[n("td",{style:N(D(a(e).date)?"":"display: none;")},[n("b",null,y(x(a(e).date))+"/"+y(_(a(e).date)),1)],4),n("td",{style:N(D(a(e).date)?"":"display: none;")},y(u(a(e).date)),5),n("td",{style:N(a(e).date?"":"display: none;")},y(m(a(e).date)),5),n("td",null,[$(y(a(e).locale)+" ",1),(E=a(e).recurring)!=null&&E.includes("true")?(c(),k(w,{key:0,class:"print-hide",name:"event_repeat",style:{color:"#9e9e9e"}})):v("",!0)]),a(e).desc?(c(),h("td",{key:0,innerHTML:d(a(e).desc)},null,8,te)):v("",!0)])}}});const ae={class:"print-hide calendar"},oe=M({__name:"IconCalendarComponent",props:{search:{},events:{}},emits:["update"],setup(g,{emit:T}){const e=g,d=T,u=R({range:"",events:[],locale:{days:"Domingo_Segunda_Ter\xE7a_Quarta_Quinta_Sexta_S\xE1bado".split("_"),daysShort:"Dom_Seg_Ter_Qua_Qui_Sex_S\xE1b".split("_"),months:"Janeiro_Fevereiro_Mar\xE7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),firstDayOfWeek:0,format24h:!0,pluralDay:"dias"}});x(),L(()=>e.events,x);function x(){u.events=[...new Set(e.events.filter(_=>_.date instanceof Date).map(_=>{var m;return((m=_.date)==null?void 0:m.toISOString().split("T")[0].replace(/-/g,"/"))||""}).filter(_=>_))]}return L(()=>u.range,()=>{u.range?d("update",`${e.search.replace(/\d+\/\d+\/\d+/gi,"").trim()} ${u.range}`):d("update",e.search.replace(/\d+\/\d+\/\d+/gi,"").trim())}),(_,m)=>(c(),h("div",ae,[C(A,{icon:"event",dense:"",round:"",color:"dark"},{default:Q(()=>[C(B,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:Q(()=>[C(J,{modelValue:u.range,"onUpdate:modelValue":m[0]||(m[0]=D=>u.range=D),minimal:"",mask:"DD/MM/YYYY",events:u.events,locale:u.locale},null,8,["modelValue","events","locale"])]),_:1})]),_:1})]))}});const O=g=>(j("data-v-15b08665"),g=g(),ee(),g),re={class:"text-center"},se=O(()=>n("div",{class:"print-only"},"LISTA DE ATENDIMENTO E DIVERSOS",-1)),ie={id:"lista"},le={class:"print-hide menu flex space-between"},ce={class:"search"},ue=["summary"],de={colspan:"5"},pe={key:0,class:"print-hide"},_e={class:"print-only right"},me=["href"],he={key:1,class:"print-only"},ge=O(()=>n("i",null,[$(" Ora\xE7\xE3o Santa Ceia "),n("br"),n("b",null,"P\xE3o:"),$(' "Senhor, aben\xE7oa este P\xE3o que vamos comer, que \xE9 a comunh\xE3o do Corpo de Cristo." '),n("br"),n("b",null,"C\xE1lice: "),$('"Senhor, aben\xE7oa o C\xE1lice que vamos beber, que \xE9 a comunh\xE3o do Sangue de Cristo." ')],-1)),fe=[ge],ve=M({__name:"ListasPage",setup(g){var S,E;const T=W(),e=R({search:((S=T.query.pesquisar)==null?void 0:S.toString())||"",locale:((E=T.params.local)==null?void 0:E.toString())||"",titles:{}}),d=[];u(),L(()=>V.eventos.items,u),L(()=>e.search,u);function u(){let s=V.eventos.items.filter(i=>i.end&&i.end.getTime()>new Date().getTime());if(!e.search&&!e.locale)return[];const o=i=>i.trim().toUpperCase().normalize("NFD").replace(/\p{Diacritic}/gu,"");let r=o(e.search),p=o(e.locale);if(/^(\*)/gi.test(e.search)&&(p="",r=r.replace(/^(\*|\/)/gi,"").trim()),p){const i=new RegExp(`^${p}`);s=s.filter(f=>o(f.list).includes(p)||i.test(o(f.locale)))}if(r){let i=null;try{i=new RegExp(r,"gi"),console.log(i)}catch{console.log("Regex search inv\xE1lido!")}s=s.filter(f=>{var F;const P=`${(F=f.date)==null?void 0:F.toLocaleString()} ${f.title} ${f.locale} ${f.desc}`;return r.split(" ").every(z=>o(P).includes(z))||i&&i.test(P)})}d.length=0,s.forEach(i=>{d.push(i)}),e.titles=[...new Set(d.map(i=>i.title))]}function x(s){if(s.altKey&&s.key.toLowerCase()==="a")s.preventDefault(),s.stopPropagation(),l.createEvent();else if(s.altKey&&["/","*"].includes(s.key)){const o=document.querySelector('input[type="text"]');o&&o.focus()}}Y(()=>{window.addEventListener("keydown",x)}),H(()=>{window.removeEventListener("keydown",x)});function _(){window.print()}function m(){navigator.share?navigator.share({title:"CCB",text:"Lista de Atendimento",url:location.href}).then(()=>console.log("Conte\xFAdo compartilhado com sucesso!")).catch(s=>console.error("Erro ao compartilhar:",s)):console.error("API de compartilhamento n\xE3o suportada.")}function D(){const r=`https://api.whatsapp.com/send/?phone=5562984972385&text=${encodeURIComponent(`\u{1F4C4} Batismo, Santa Ceia, ...

\u{1F4CD} Local: 
\u{1F557} Data: 
\u{1F935} Atender\xE1: `)}&type=phone_number&app_absent=0`;window.location.href=r}async function t(){if(!l.loading){l.loading=!0;try{await Z()}catch{console.log("Erro ao recarregar!")}console.log("Terminoou de recarregar..."),l.loading=!1}}return(s,o)=>(c(),h(I,null,[n("div",re,[se,n("div",null,y(e.locale.replace(/-$/,"").trim()),1)]),n("div",ie,[n("div",le,[n("div",ce,[K(n("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=r=>e.search=r),placeholder:"Pesquisar...","x-webkit-speech":""},null,512),[[G,e.search]])]),a(l).connected&&a(l).admin?(c(),k(w,{key:0,name:"add",onClick:b(a(l).createEvent,["prevent"])},null,8,["onClick"])):v("",!0),a(l).connected&&a(l).admin?(c(),k(w,{key:1,name:"cached",onClick:b(t,["prevent"]),class:X({rotate:a(l).loading}),style:{transform:"scaleX(-1)"}},null,8,["class"])):v("",!0),a(l).shared?(c(),k(w,{key:2,name:"share",onClick:b(m,["prevent"])})):v("",!0),a(l).shared?(c(),k(w,{key:3,name:"quiz",onClick:b(D,["prevent"])})):v("",!0),C(w,{name:"print",onClick:o[1]||(o[1]=b(r=>_(),["prevent"]))}),C(A,{to:"/",dense:"",flat:"",icon:"close"})]),(c(!0),h(I,null,q(e.titles,r=>(c(),h("div",{key:r},[n("table",{summary:String(r)},[n("thead",null,[n("th",de,y(r),1)]),n("tbody",null,[(c(!0),h(I,null,q(d.filter(p=>p.title===r),p=>(c(),k(ne,{key:p.gid,event:p,onDblclick:i=>a(l).selected=p,onContextmenu:b(i=>a(l).selected=p,["right","prevent"])},null,8,["event","onDblclick","onContextmenu"]))),128))])],8,ue)]))),128)),!d.length&&!e.search.startsWith("*")?(c(),h("div",pe,[C(A,{class:"print-hide q-mt-lg",onClick:o[2]||(o[2]=r=>e.search=`*${e.search}`),color:"blue",flat:"",label:"Lista completa..."})])):v("",!0),n("div",_e,[n("a",{style:{color:"black"},href:a(l).url},y(a(l).url),9,me)]),e.locale.includes("REGIONAL")?(c(),h("div",he,fe)):v("",!0)]),C(oe,{search:e.search,events:d,onUpdate:o[3]||(o[3]=r=>e.search=r)},null,8,["search"])],64))}});var xe=U(ve,[["__scopeId","data-v-15b08665"]]);export{xe as default};
