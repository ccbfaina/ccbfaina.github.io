import{_ as V,z as U,S as z,v as M,w as I,T as A,o as O,x as W,A as c,B as p,G as e,O as y,U as K,V as Q,J as l,C as _,W as h,X as g,D as m,Y as G,H as x,Q as P,L as E,M as q,K as r,Z as X,P as H,R as J,I as C}from"./index.f6479a9a.js";import{_ as Y,a as Z}from"./IconCalendarComponent.923ee208.js";const k=f=>(H("data-v-1532f157"),f=f(),J(),f),j={class:"text-center"},ee=k(()=>e("div",{class:"print-only"}," LISTA DE ATENDIMENTO E DIVERSOS ",-1)),te=k(()=>e("div",{class:"print-hide text-red"}," PR\xC9VIA ",-1)),oe={id:"lista"},ae={class:"print-hide menu flex space-between"},se={class:"search"},ne=["summary"],re={colspan:"5"},le={key:0,class:"print-hide"},ie={class:"print-only right"},ce=["href"],de={key:1,class:"print-only"},ue=k(()=>e("i",null,[C(" Ora\xE7\xE3o Santa Ceia "),e("br"),e("b",null,"P\xE3o:"),C(' "Senhor, aben\xE7oa este P\xE3o que vamos comer, que \xE9 a comunh\xE3o do Corpo de Cristo." '),e("br"),e("b",null,"C\xE1lice: "),C('"Senhor, aben\xE7oa o C\xE1lice que vamos beber, que \xE9 a comunh\xE3o do Sangue de Cristo." ')],-1)),pe=[ue],he=U({__name:"ListasPage",setup(f){var b,L;const w=z(),a=M({search:((b=w.query.pesquisar)==null?void 0:b.toString())||"",locale:((L=w.params.local)==null?void 0:L.toString())||"",titles:{}}),u=[];v(),I(()=>A.eventos.items,v),I(()=>a.search,v);function v(){let s=A.eventos.items.filter(n=>n.end&&n.end.getTime()>new Date().getTime());if(!a.search&&!a.locale)return[];const t=n=>n.trim().toUpperCase().normalize("NFD").replace(/\p{Diacritic}/gu,"");let o=t(a.search),i=t(a.locale);if(/^(\*)/gi.test(a.search)&&(i="",o=o.replace(/^(\*|\/)/gi,"").trim()),i){const n=new RegExp(`^${i}`);s=s.filter(d=>t(d.list).includes(i)||n.test(t(d.locale)))}if(o){let n=null;try{n=new RegExp(o,"gi"),console.log(n)}catch{console.log("Regex search inv\xE1lido!")}s=s.filter(d=>{var $;const D=`${($=d.date)==null?void 0:$.toLocaleString()} ${d.title} ${d.locale} ${d.desc}`;return o.split(" ").every(N=>t(D).includes(N))||n&&n.test(D)})}u.length=0,s.forEach(n=>{u.push(n)}),a.titles=[...new Set(u.map(n=>n.title))]}function S(s){if(s.altKey&&s.key.toLowerCase()==="a")s.preventDefault(),s.stopPropagation(),r.createEvent();else if(s.altKey&&["/","*"].includes(s.key)){const t=document.querySelector('input[type="text"]');t&&t.focus()}}O(()=>{window.addEventListener("keydown",S)}),W(()=>{window.removeEventListener("keydown",S)});function T(){window.print()}function R(){navigator.share?navigator.share({title:"CCB",text:"Lista de Atendimento",url:location.href}).then(()=>console.log("Conte\xFAdo compartilhado com sucesso!")).catch(s=>console.error("Erro ao compartilhar:",s)):console.error("API de compartilhamento n\xE3o suportada.")}function B(){const o=`https://api.whatsapp.com/send/?phone=5562984972385&text=${encodeURIComponent(`\u{1F4C4} Batismo, Santa Ceia, ...

\u{1F4CD} Local: 
\u{1F557} Data: 
\u{1F935} Atender\xE1: `)}&type=phone_number&app_absent=0`;window.location.href=o}async function F(){if(!r.loading){r.loading=!0;try{await X()}catch{console.log("Erro ao recarregar!")}console.log("Terminoou de recarregar..."),r.loading=!1}}return(s,t)=>(c(),p(E,null,[e("div",j,[ee,te,e("div",null,y(a.locale.replace(/-$/,"").trim()),1)]),e("div",oe,[e("div",ae,[e("div",se,[K(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>a.search=o),placeholder:"Pesquisar...","x-webkit-speech":""},null,512),[[Q,a.search]])]),l(r).connected&&l(r).admin?(c(),_(g,{key:0,name:"add",onClick:h(l(r).createEvent,["prevent"])},null,8,["onClick"])):m("",!0),l(r).connected&&l(r).admin?(c(),_(g,{key:1,name:"cached",onClick:h(F,["prevent"]),class:G({rotate:l(r).loading}),style:{transform:"scaleX(-1)"}},null,8,["class"])):m("",!0),l(r).shared?(c(),_(g,{key:2,name:"share",onClick:h(R,["prevent"])})):m("",!0),l(r).shared?(c(),_(g,{key:3,name:"quiz",onClick:h(B,["prevent"])})):m("",!0),x(g,{name:"print",onClick:t[1]||(t[1]=h(o=>T(),["prevent"]))}),x(P,{to:"/",dense:"",flat:"",icon:"close"})]),(c(!0),p(E,null,q(a.titles,o=>(c(),p("div",{key:o},[e("table",{summary:String(o)},[e("thead",null,[e("th",re,y(o),1)]),e("tbody",null,[(c(!0),p(E,null,q(u.filter(i=>i.title===o),i=>(c(),_(Y,{key:i.gid,event:i,onDblclick:n=>l(r).selected=i,onContextmenu:h(n=>l(r).selected=i,["right","prevent"])},null,8,["event","onDblclick","onContextmenu"]))),128))])],8,ne)]))),128)),!u.length&&!a.search.startsWith("*")?(c(),p("div",le,[x(P,{class:"print-hide q-mt-lg",onClick:t[2]||(t[2]=o=>a.search=`*${a.search}`),color:"blue",flat:"",label:"Lista completa..."})])):m("",!0),e("div",ie,[e("a",{style:{color:"black"},href:l(r).url},y(l(r).url),9,ce)]),a.locale.includes("REGIONAL")?(c(),p("div",de,pe)):m("",!0)]),x(Z,{search:a.search,events:u,onUpdate:t[3]||(t[3]=o=>a.search=o)},null,8,["search"])],64))}});var ge=V(he,[["__scopeId","data-v-1532f157"]]);export{ge as default};
