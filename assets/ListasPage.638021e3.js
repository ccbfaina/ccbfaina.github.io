import{z as M,A as c,B as h,G as n,O as y,J as a,S as N,I as T,C,D as v,T as b,v as q,w as $,H as E,F,U as B,V as U,Q as I,_ as J,W,X as Q,o as Y,x as H,Y as K,Z as G,$ as D,a0 as X,L as A,M as R,K as l,a1 as Z,P as j,R as ee}from"./index.1bf1ad98.js";const te=["innerHTML"],ne=M({__name:"ListaTRComponent",props:{event:{}},setup(g){const e=g.event;function d(t){return L(t.date)&&!["AVISOS \xC0 IRMANDADE"].includes(t.title.toUpperCase())}function u(t){return t.replace(/(\r\n|\n|\r)/g,"<br>")}function x(t){return!(t instanceof Date)||isNaN(t.getTime())?"":["Dom","Seg","Ter","Qua","Qui","Sex","S\xE1b"][t.getDay()]||""}function _(t){return!(t instanceof Date)||isNaN(t.getTime())?"":String(t==null?void 0:t.getDate()).padStart(2,"0")}function m(t){return!(t instanceof Date)||isNaN(t.getTime())?"":String(t.getMonth()+1).padStart(2,"0")}function w(t){try{!(t instanceof Date)||isNaN(t.getTime());const S=String(t==null?void 0:t.getHours()).padStart(2,"0"),o=String(t==null?void 0:t.getMinutes()).padStart(2,"0");return`${S}:${o}`}catch{return console.log("Erro format hours!"),""}}function L(t){return!(!(t instanceof Date)||isNaN(t.getTime()))}return(t,S)=>{var o;return c(),h("tr",null,[n("td",{style:N(d(a(e))?"":"display: none;")},[n("b",null,y(_(a(e).date))+"/"+y(m(a(e).date)),1)],4),n("td",{style:N(d(a(e))?"":"display: none;")},y(x(a(e).date)),5),n("td",{style:N(d(a(e))?"":"display: none;")},y(w(a(e).date)),5),n("td",null,[T(y(a(e).locale)+" ",1),(o=a(e).recurring)!=null&&o.includes("true")?(c(),C(b,{key:0,class:"print-hide",name:"event_repeat",style:{color:"#9e9e9e"}})):v("",!0)]),a(e).desc?(c(),h("td",{key:0,innerHTML:u(a(e).desc)},null,8,te)):v("",!0)])}}});const ae={class:"print-hide calendar"},oe=M({__name:"IconCalendarComponent",props:{search:{},events:{}},emits:["update"],setup(g,{emit:k}){const e=g,d=k,u=q({range:"",events:[],locale:{days:"Domingo_Segunda_Ter\xE7a_Quarta_Quinta_Sexta_S\xE1bado".split("_"),daysShort:"Dom_Seg_Ter_Qua_Qui_Sex_S\xE1b".split("_"),months:"Janeiro_Fevereiro_Mar\xE7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),firstDayOfWeek:0,format24h:!0,pluralDay:"dias"}});x(),$(()=>e.events,x);function x(){u.events=[...new Set(e.events.filter(_=>_.date instanceof Date).map(_=>{var m;return((m=_.date)==null?void 0:m.toISOString().split("T")[0].replace(/-/g,"/"))||""}).filter(_=>_))]}return $(()=>u.range,()=>{u.range?d("update",`${e.search.replace(/\d+\/\d+\/\d+/gi,"").trim()} ${u.range}`):d("update",e.search.replace(/\d+\/\d+\/\d+/gi,"").trim())}),(_,m)=>(c(),h("div",ae,[E(I,{icon:"event",dense:"",round:"",color:"dark"},{default:F(()=>[E(B,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:F(()=>[E(U,{modelValue:u.range,"onUpdate:modelValue":m[0]||(m[0]=w=>u.range=w),minimal:"",mask:"DD/MM/YYYY",events:u.events,locale:u.locale},null,8,["modelValue","events","locale"])]),_:1})]),_:1})]))}});const O=g=>(j("data-v-15b08665"),g=g(),ee(),g),re={class:"text-center"},se=O(()=>n("div",{class:"print-only"},"LISTA DE ATENDIMENTO E DIVERSOS",-1)),ie={id:"lista"},le={class:"print-hide menu flex space-between"},ce={class:"search"},ue=["summary"],de={colspan:"5"},pe={key:0,class:"print-hide"},_e={class:"print-only right"},me=["href"],he={key:1,class:"print-only"},ge=O(()=>n("i",null,[T(" Ora\xE7\xE3o Santa Ceia "),n("br"),n("b",null,"P\xE3o:"),T(' "Senhor, aben\xE7oa este P\xE3o que vamos comer, que \xE9 a comunh\xE3o do Corpo de Cristo." '),n("br"),n("b",null,"C\xE1lice: "),T('"Senhor, aben\xE7oa o C\xE1lice que vamos beber, que \xE9 a comunh\xE3o do Sangue de Cristo." ')],-1)),fe=[ge],ve=M({__name:"ListasPage",setup(g){var t,S;const k=W(),e=q({search:((t=k.query.pesquisar)==null?void 0:t.toString())||"",locale:((S=k.params.local)==null?void 0:S.toString())||"",titles:{}}),d=[];u(),$(()=>Q.eventos.items,u),$(()=>e.search,u);function u(){let o=Q.eventos.items.filter(i=>i.end&&i.end.getTime()>new Date().getTime());if(!e.search&&!e.locale)return[];const r=i=>i.trim().toUpperCase().normalize("NFD").replace(/\p{Diacritic}/gu,"");let s=r(e.search),p=r(e.locale);if(/^(\*)/gi.test(e.search)&&(p="",s=s.replace(/^(\*|\/)/gi,"").trim()),p){const i=new RegExp(`^${p}`);o=o.filter(f=>r(f.list).includes(p)||i.test(r(f.locale)))}if(s){let i=null;try{i=new RegExp(s,"gi"),console.log(i)}catch{console.log("Regex search inv\xE1lido!")}o=o.filter(f=>{var V;const P=`${(V=f.date)==null?void 0:V.toLocaleString()} ${f.title} ${f.locale} ${f.desc}`;return s.split(" ").every(z=>r(P).includes(z))||i&&i.test(P)})}d.length=0,o.forEach(i=>{d.push(i)}),e.titles=[...new Set(d.map(i=>i.title))]}function x(o){if(o.altKey&&o.key.toLowerCase()==="a")o.preventDefault(),o.stopPropagation(),l.createEvent();else if(o.altKey&&["/","*"].includes(o.key)){const r=document.querySelector('input[type="text"]');r&&r.focus()}}Y(()=>{window.addEventListener("keydown",x)}),H(()=>{window.removeEventListener("keydown",x)});function _(){window.print()}function m(){navigator.share?navigator.share({title:"CCB",text:"Lista de Atendimento",url:location.href}).then(()=>console.log("Conte\xFAdo compartilhado com sucesso!")).catch(o=>console.error("Erro ao compartilhar:",o)):console.error("API de compartilhamento n\xE3o suportada.")}function w(){const s=`https://api.whatsapp.com/send/?phone=5562984972385&text=${encodeURIComponent(`\u{1F4C4} Batismo, Santa Ceia, ...

\u{1F4CD} Local: 
\u{1F557} Data: 
\u{1F935} Atender\xE1: `)}&type=phone_number&app_absent=0`;window.location.href=s}async function L(){if(!l.loading){l.loading=!0;try{await Z()}catch{console.log("Erro ao recarregar!")}console.log("Terminoou de recarregar..."),l.loading=!1}}return(o,r)=>(c(),h(A,null,[n("div",re,[se,n("div",null,y(e.locale.replace(/-$/,"").trim()),1)]),n("div",ie,[n("div",le,[n("div",ce,[K(n("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=s=>e.search=s),placeholder:"Pesquisar...","x-webkit-speech":""},null,512),[[G,e.search]])]),a(l).connected&&a(l).admin?(c(),C(b,{key:0,name:"add",onClick:D(a(l).createEvent,["prevent"])},null,8,["onClick"])):v("",!0),a(l).connected&&a(l).admin?(c(),C(b,{key:1,name:"cached",onClick:D(L,["prevent"]),class:X({rotate:a(l).loading}),style:{transform:"scaleX(-1)"}},null,8,["class"])):v("",!0),a(l).shared?(c(),C(b,{key:2,name:"share",onClick:D(m,["prevent"])})):v("",!0),a(l).shared?(c(),C(b,{key:3,name:"quiz",onClick:D(w,["prevent"])})):v("",!0),E(b,{name:"print",onClick:r[1]||(r[1]=D(s=>_(),["prevent"]))}),E(I,{to:"/",dense:"",flat:"",icon:"close"})]),(c(!0),h(A,null,R(e.titles,s=>(c(),h("div",{key:s},[n("table",{summary:String(s)},[n("thead",null,[n("th",de,y(s),1)]),n("tbody",null,[(c(!0),h(A,null,R(d.filter(p=>p.title===s),p=>(c(),C(ne,{key:p.gid,event:p,onDblclick:i=>a(l).selected=p,onContextmenu:D(i=>a(l).selected=p,["right","prevent"])},null,8,["event","onDblclick","onContextmenu"]))),128))])],8,ue)]))),128)),!d.length&&!e.search.startsWith("*")?(c(),h("div",pe,[E(I,{class:"print-hide q-mt-lg",onClick:r[2]||(r[2]=s=>e.search=`*${e.search}`),color:"blue",flat:"",label:"Lista completa..."})])):v("",!0),n("div",_e,[n("a",{style:{color:"black"},href:a(l).url},y(a(l).url),9,me)]),e.locale.includes("REGIONAL")?(c(),h("div",he,fe)):v("",!0)]),E(oe,{search:e.search,events:d,onUpdate:r[3]||(r[3]=s=>e.search=s)},null,8,["search"])],64))}});var xe=J(ve,[["__scopeId","data-v-15b08665"]]);export{xe as default};
