import{_ as V,z as U,S as z,v as M,w as L,T as I,o as O,x as W,A as c,B as p,G as a,O as y,U as K,V as Q,J as l,C as _,W as h,X as g,D as m,Y as G,H as x,Q as A,L as C,M as P,K as r,Z as X,P as H,R as J,I as E}from"./index.537a6ff1.js";import{_ as Y,a as Z}from"./IconCalendarComponent.f6e489bf.js";const q=f=>(H("data-v-585a0a8f"),f=f(),J(),f),j={class:"text-center"},ee=q(()=>a("div",{class:"print-only"},"LISTA DE ATENDIMENTO E DIVERSOS",-1)),te={id:"lista"},ae={class:"print-hide menu flex space-between"},oe={class:"search"},ne=["summary"],se={colspan:"5"},re={key:0,class:"print-hide"},le={class:"print-only right"},ie=["href"],ce={key:1,class:"print-only"},de=q(()=>a("i",null,[E(" Ora\xE7\xE3o Santa Ceia "),a("br"),a("b",null,"P\xE3o:"),E(' "Senhor, aben\xE7oa este P\xE3o que vamos comer, que \xE9 a comunh\xE3o do Corpo de Cristo." '),a("br"),a("b",null,"C\xE1lice: "),E('"Senhor, aben\xE7oa o C\xE1lice que vamos beber, que \xE9 a comunh\xE3o do Sangue de Cristo." ')],-1)),ue=[de],pe=U({__name:"CalendarPage",setup(f){var S,b;const k=z(),o=M({search:((S=k.query.pesquisar)==null?void 0:S.toString())||"",locale:((b=k.params.local)==null?void 0:b.toString())||"",titles:{}}),u=[];v(),L(()=>I.eventos.items,v),L(()=>o.search,v);function v(){let n=I.eventos.items.filter(s=>s.end&&s.end.getTime()>new Date().getTime());if(!o.search&&!o.locale)return[];const e=s=>s.trim().toUpperCase().normalize("NFD").replace(/\p{Diacritic}/gu,"");let t=e(o.search),i=e(o.locale);if(/^(\*)/gi.test(o.search)&&(i="",t=t.replace(/^(\*|\/)/gi,"").trim()),i){const s=new RegExp(`^${i}`);n=n.filter(d=>e(d.list).includes(i)||s.test(e(d.locale)))}if(t){let s=null;try{s=new RegExp(t,"gi"),console.log(s)}catch{console.log("Regex search inv\xE1lido!")}n=n.filter(d=>{var $;const D=`${($=d.date)==null?void 0:$.toLocaleString()} ${d.title} ${d.locale} ${d.desc}`;return t.split(" ").every(R=>e(D).includes(R))||s&&s.test(D)})}u.length=0,n.forEach(s=>{u.push(s)}),o.titles=[...new Set(u.map(s=>s.title))]}function w(n){if(n.altKey&&n.key.toLowerCase()==="a")n.preventDefault(),n.stopPropagation(),r.createEvent();else if(n.altKey&&["/","*"].includes(n.key)){const e=document.querySelector('input[type="text"]');e&&e.focus()}}O(()=>{window.addEventListener("keydown",w)}),W(()=>{window.removeEventListener("keydown",w)});function T(){window.print()}function B(){navigator.share?navigator.share({title:"CCB",text:"Lista de Atendimento",url:location.href}).then(()=>console.log("Conte\xFAdo compartilhado com sucesso!")).catch(n=>console.error("Erro ao compartilhar:",n)):console.error("API de compartilhamento n\xE3o suportada.")}function F(){const t=`https://api.whatsapp.com/send/?phone=5562984972385&text=${encodeURIComponent(`\u{1F4C4} Batismo, Santa Ceia, ...

\u{1F4CD} Local: 
\u{1F557} Data: 
\u{1F935} Atender\xE1: `)}&type=phone_number&app_absent=0`;window.location.href=t}async function N(){if(!r.loading){r.loading=!0;try{await X()}catch{console.log("Erro ao recarregar!")}console.log("Terminoou de recarregar..."),r.loading=!1}}return(n,e)=>(c(),p(C,null,[a("div",j,[ee,a("div",null,y(o.locale.replace(/-$/,"").trim()),1)]),a("div",te,[a("div",ae,[a("div",oe,[K(a("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.search=t),placeholder:"Pesquisar...","x-webkit-speech":""},null,512),[[Q,o.search]])]),l(r).connected&&l(r).admin?(c(),_(g,{key:0,name:"add",onClick:h(l(r).createEvent,["prevent"])},null,8,["onClick"])):m("",!0),l(r).connected&&l(r).admin?(c(),_(g,{key:1,name:"cached",onClick:h(N,["prevent"]),class:G({rotate:l(r).loading}),style:{transform:"scaleX(-1)"}},null,8,["class"])):m("",!0),l(r).shared?(c(),_(g,{key:2,name:"share",onClick:h(B,["prevent"])})):m("",!0),l(r).shared?(c(),_(g,{key:3,name:"quiz",onClick:h(F,["prevent"])})):m("",!0),x(g,{name:"print",onClick:e[1]||(e[1]=h(t=>T(),["prevent"]))}),x(A,{to:"/",dense:"",flat:"",icon:"close"})]),(c(!0),p(C,null,P(o.titles,t=>(c(),p("div",{key:t},[a("table",{summary:String(t)},[a("thead",null,[a("th",se,y(t),1)]),a("tbody",null,[(c(!0),p(C,null,P(u.filter(i=>i.title===t),i=>(c(),_(Y,{key:i.gid,event:i,onDblclick:s=>l(r).selected=i,onContextmenu:h(s=>l(r).selected=i,["right","prevent"])},null,8,["event","onDblclick","onContextmenu"]))),128))])],8,ne)]))),128)),!u.length&&!o.search.startsWith("*")?(c(),p("div",re,[x(A,{class:"print-hide q-mt-lg",onClick:e[2]||(e[2]=t=>o.search=`*${o.search}`),color:"blue",flat:"",label:"Lista completa..."})])):m("",!0),a("div",le,[a("a",{style:{color:"black"},href:l(r).url},y(l(r).url),9,ie)]),o.locale.includes("REGIONAL")?(c(),p("div",ce,ue)):m("",!0)]),x(Z,{search:o.search,events:u,onUpdate:e[3]||(e[3]=t=>o.search=t)},null,8,["search"])],64))}});var _e=V(pe,[["__scopeId","data-v-585a0a8f"]]);export{_e as default};
