import{_ as V,z as U,S as z,v as M,w as $,T as I,o as O,x as W,A as c,B as p,G as o,O as y,U as K,V as Q,J as l,C as _,W as h,X as g,D as m,Y as G,H as x,Q as A,L as E,M as P,K as r,Z as X,P as H,R as J,I as C}from"./index.537a6ff1.js";import{_ as Y,a as Z}from"./IconCalendarComponent.f6e489bf.js";const q=f=>(H("data-v-60496785"),f=f(),J(),f),j={class:"text-center"},ee=q(()=>o("div",{class:"print-only"},"LISTA DE ATENDIMENTO E DIVERSOS",-1)),te={id:"lista"},oe={class:"print-hide menu flex space-between"},ae={class:"search"},se=["summary"],ne={colspan:"5"},re={key:0,class:"print-hide"},le={class:"print-only right"},ie=["href"],ce={key:1,class:"print-only"},de=q(()=>o("i",null,[C(" Ora\xE7\xE3o Santa Ceia "),o("br"),o("b",null,"P\xE3o:"),C(' "Senhor, aben\xE7oa este P\xE3o que vamos comer, que \xE9 a comunh\xE3o do Corpo de Cristo." '),o("br"),o("b",null,"C\xE1lice: "),C('"Senhor, aben\xE7oa o C\xE1lice que vamos beber, que \xE9 a comunh\xE3o do Sangue de Cristo." ')],-1)),ue=[de],pe=U({__name:"ListasPage",setup(f){var S,b;const k=z(),a=M({search:((S=k.query.pesquisar)==null?void 0:S.toString())||"",locale:((b=k.params.local)==null?void 0:b.toString())||"",titles:{}}),u=[];v(),$(()=>I.eventos.items,v),$(()=>a.search,v);function v(){let s=I.eventos.items.filter(n=>n.end&&n.end.getTime()>new Date().getTime());if(!a.search&&!a.locale)return[];const e=n=>n.trim().toUpperCase().normalize("NFD").replace(/\p{Diacritic}/gu,"");let t=e(a.search),i=e(a.locale);if(/^(\*)/gi.test(a.search)&&(i="",t=t.replace(/^(\*|\/)/gi,"").trim()),i){const n=new RegExp(`^${i}`);s=s.filter(d=>e(d.list).includes(i)||n.test(e(d.locale)))}if(t){let n=null;try{n=new RegExp(t,"gi"),console.log(n)}catch{console.log("Regex search inv\xE1lido!")}s=s.filter(d=>{var D;const L=`${(D=d.date)==null?void 0:D.toLocaleString()} ${d.title} ${d.locale} ${d.desc}`;return t.split(" ").every(R=>e(L).includes(R))||n&&n.test(L)})}u.length=0,s.forEach(n=>{u.push(n)}),a.titles=[...new Set(u.map(n=>n.title))]}function w(s){if(s.altKey&&s.key.toLowerCase()==="a")s.preventDefault(),s.stopPropagation(),r.createEvent();else if(s.altKey&&["/","*"].includes(s.key)){const e=document.querySelector('input[type="text"]');e&&e.focus()}}O(()=>{window.addEventListener("keydown",w)}),W(()=>{window.removeEventListener("keydown",w)});function T(){window.print()}function B(){navigator.share?navigator.share({title:"CCB",text:"Lista de Atendimento",url:location.href}).then(()=>console.log("Conte\xFAdo compartilhado com sucesso!")).catch(s=>console.error("Erro ao compartilhar:",s)):console.error("API de compartilhamento n\xE3o suportada.")}function F(){const t=`https://api.whatsapp.com/send/?phone=5562984972385&text=${encodeURIComponent(`\u{1F4C4} Batismo, Santa Ceia, ...

\u{1F4CD} Local: 
\u{1F557} Data: 
\u{1F935} Atender\xE1: `)}&type=phone_number&app_absent=0`;window.location.href=t}async function N(){if(!r.loading){r.loading=!0;try{await X()}catch{console.log("Erro ao recarregar!")}console.log("Terminoou de recarregar..."),r.loading=!1}}return(s,e)=>(c(),p(E,null,[o("div",j,[ee,o("div",null,y(a.locale.replace(/-$/,"").trim()),1)]),o("div",te,[o("div",oe,[o("div",ae,[K(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>a.search=t),placeholder:"Pesquisar...","x-webkit-speech":""},null,512),[[Q,a.search]])]),l(r).connected&&l(r).admin?(c(),_(g,{key:0,name:"add",onClick:h(l(r).createEvent,["prevent"])},null,8,["onClick"])):m("",!0),l(r).connected&&l(r).admin?(c(),_(g,{key:1,name:"cached",onClick:h(N,["prevent"]),class:G({rotate:l(r).loading}),style:{transform:"scaleX(-1)"}},null,8,["class"])):m("",!0),l(r).shared?(c(),_(g,{key:2,name:"share",onClick:h(B,["prevent"])})):m("",!0),l(r).shared?(c(),_(g,{key:3,name:"quiz",onClick:h(F,["prevent"])})):m("",!0),x(g,{name:"print",onClick:e[1]||(e[1]=h(t=>T(),["prevent"]))}),x(A,{to:"/",dense:"",flat:"",icon:"close"})]),(c(!0),p(E,null,P(a.titles,t=>(c(),p("div",{key:t},[o("table",{summary:String(t)},[o("thead",null,[o("th",ne,y(t),1)]),o("tbody",null,[(c(!0),p(E,null,P(u.filter(i=>i.title===t),i=>(c(),_(Y,{key:i.gid,event:i,onDblclick:n=>l(r).selected=i,onContextmenu:h(n=>l(r).selected=i,["right","prevent"])},null,8,["event","onDblclick","onContextmenu"]))),128))])],8,se)]))),128)),!u.length&&!a.search.startsWith("*")?(c(),p("div",re,[x(A,{class:"print-hide q-mt-lg",onClick:e[2]||(e[2]=t=>a.search=`*${a.search}`),color:"blue",flat:"",label:"Lista completa..."})])):m("",!0),o("div",le,[o("a",{style:{color:"black"},href:l(r).url},y(l(r).url),9,ie)]),a.locale.includes("REGIONAL")?(c(),p("div",ce,ue)):m("",!0)]),x(Z,{search:a.search,events:u,onUpdate:e[3]||(e[3]=t=>a.search=t)},null,8,["search"])],64))}});var _e=V(pe,[["__scopeId","data-v-60496785"]]);export{_e as default};
